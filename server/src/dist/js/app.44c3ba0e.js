(function(){"use strict";var e={5271:function(e,t,a){a(5524);var s=a(5850),n=a(799),l=a(1357),i=a(3751),r=a(641);function o(e,t,a,s,n,l){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(i)}var d={created(){this.$store.dispatch("initializeAuth")}},c=a(6262);const u=(0,c.A)(d,[["render",o]]);var m=u,g=a(5220),h=a(33);const p={class:"form"},f={key:0,class:"error"},k={key:0,class:"error"};function v(e,t,a,s,n,l){const o=(0,r.g2)("PageHeader");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle),id:"bp"},[(0,r.Lk)("div",p,[(0,r.Lk)("form",{class:"login-form",onSubmit:t[3]||(t[3]=(0,i.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[t[8]||(t[8]=(0,r.Lk)("h2",null,"Login",-1)),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.User=e),placeholder:"Username",required:""},null,512),[[i.Jo,n.User]]),n.errors.username?((0,r.uX)(),(0,r.CE)("p",f,(0,h.v_)(n.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.Pass=e),placeholder:"Password",required:""},null,512),[[i.Jo,n.Pass]]),n.errors.password?((0,r.uX)(),(0,r.CE)("p",k,(0,h.v_)(n.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{class:"btn",dark:"",onClick:t[2]||(t[2]=(...e)=>l.login&&l.login(...e)),rounded:"xl",size:"x-large",block:""},[t[4]||(t[4]=(0,r.Lk)("span",null,null,-1)),t[5]||(t[5]=(0,r.Lk)("span",null,null,-1)),t[6]||(t[6]=(0,r.Lk)("span",null,null,-1)),t[7]||(t[7]=(0,r.Lk)("span",null,null,-1)),(0,r.Lk)("strong",null,(0,h.v_)(n.isLoggingIn?"Logging in...":"log in"),1)])],32)])],4)],64)}function b(e,t,a,s,n,l){const i=(0,r.g2)("v-btn"),o=(0,r.g2)("v-toolbar-items"),d=(0,r.g2)("v-spacer"),c=(0,r.g2)("v-toolbar-title"),u=(0,r.g2)("v-toolbar");return(0,r.uX)(),(0,r.Wv)(u,{elevation:8,dark:"",prominent:"",style:{"background-color":"navy"}},{default:(0,r.k6)((()=>[(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.bF)(i,{to:{name:"about"},class:"toolbar-btn"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/info.png",alt:"About Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"About",-1)]))),_:1,__:[0]})])),_:1}),(0,r.bF)(d),(0,r.bF)(i,{class:"bytesbutton",onClick:l.goToLogin},{default:(0,r.k6)((()=>[(0,r.bF)(c,{class:"text-h4 font-weight-black"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("BYTES TOUCH LOG")]))),_:1,__:[1]})])),_:1},8,["onClick"])])),_:1})}var F=a(6278),_=a(4335);const S=_.A.create({baseURL:"http://localhost:2002"});S.interceptors.request.use((e=>{const t=w.state.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e})),S.interceptors.response.use((e=>e),(e=>(401===e.response?.status&&w.dispatch("logout"),Promise.reject(e))));var y=S;const L=async()=>{try{const e=await fetch("https://api.ipify.org?format=json"),t=await e.json();return t.ip}catch(e){return"Unknown IP"}};var w=(0,F.y$)({state:{user:null,token:localStorage.getItem("token")||null},mutations:{SET_USER(e,{user:t,token:a}){e.user=t,e.token=a,localStorage.setItem("token",a)},CLEAR_USER(e){e.user=null,e.token=null,localStorage.removeItem("token")}},actions:{async login({commit:e},t){try{const s=await y.post("/",t);if(console.log("Login response:",s),!(s.data&&s.data.user&&s.data.token))throw console.error("Unexpected login response format:",s.data),new Error("Invalid login response");e("SET_USER",{user:s.data.user,token:s.data.token});try{const e={ip:await L(),device:navigator.userAgent};await y.recordLogin(e)}catch(a){console.error("Failed to record login history:",a)}return s}catch(s){throw e("CLEAR_USER"),s}},async initializeAuth({commit:e}){const t=localStorage.getItem("token");if(t)try{const a=await y.get("/api/me",{headers:{Authorization:`Bearer ${t}`,"Cache-Control":"no-cache"},params:{_:Date.now()}});if(!a.data||!a.data.id)throw new Error("Invalid user data");e("SET_USER",{user:a.data,token:t})}catch(a){e("CLEAR_USER"),console.error("Token validation failed:",a)}},async logout({commit:e,state:t,dispatch:a}){try{if(t.token){const e={ip:await a("getClientIP"),device:navigator.userAgent};await y.recordLogout(e),await y.logout()}}catch(s){console.error("Logout error:",s)}finally{e("CLEAR_USER"),window.location.reload()}},async getClientIP(){try{const e=await fetch("https://api.ipify.org?format=json"),t=await e.json();return t.ip}catch{return"Unknown IP"}}},getters:{isAuthenticated:e=>!!e.token,currentUser:e=>e.user,userRole:e=>e.user?.role||"user"}}),C={methods:{goToLogin(){if(w.getters.isAuthenticated){w.getters.userRole;this.$router.push({name:"Home"})}else this.$router.push({name:"login"})}}};const D=(0,c.A)(C,[["render",b],["__scopeId","data-v-b1f4a89a"]]);var E=D,A={data(){return{backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",User:"",Pass:"",errors:{},isLoggingIn:!1}},watch:{User(){this.errors.username=null},Pass(){this.errors.password=null}},methods:{async login(){if(!this.isLoggingIn){this.isLoggingIn=!0,this.errors={};try{await this.$store.dispatch("login",{username:this.User,password:this.Pass});const e="/home";this.$router.push(e)}catch(e){e.response?.data?.error?this.handleError(e.response.data.error):(console.error("Login error:",e),alert("Login failed. Please try again."))}finally{this.isLoggingIn=!1}}},handleError(e){e.includes("Username")?this.errors.username=e:e.includes("password")?this.errors.password=e:alert(e)}},components:{PageHeader:E},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",margin:0,padding:0}}}};const x=(0,c.A)(A,[["render",v],["__scopeId","data-v-6e4aa7ee"]]);var V=x;const N={class:"d-flex flex-row"},W={class:"d-flex flex-column section"},R={class:"d-flex flex-column section"};function I(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-toolbar-title"),c=(0,r.g2)("v-toolbar"),u=(0,r.g2)("v-card-text"),m=(0,r.g2)("v-card");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle),class:"main-content idle"},[(0,r.bF)(m,{class:"form idle"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{color:"primary"},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("User Profile")]))),_:1,__:[2]})])),_:1}),(0,r.Lk)("div",N,[(0,r.Lk)("div",W,[(0,r.Lk)("button",{class:"btn","prepend-icon":"mdi-account",onClick:t[0]||(t[0]=e=>n.tab="option-1")},"Admin"),(0,r.bo)((0,r.bF)(m,{class:"section-card",flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("p",{class:"mb-0"}," Admins have full access to manage all user accounts within the system. They can add, edit, or delete account details, ensuring data accuracy. Admins are also able to generate, view, and export comprehensive reports for analysis. ",-1)]))),_:1,__:[3]})])),_:1},512),[[i.aG,"option-1"===n.tab]])]),(0,r.Lk)("div",R,[(0,r.Lk)("button",{class:"btn","prepend-icon":"mdi-lock",onClick:t[1]||(t[1]=e=>n.tab="option-2")},"User"),(0,r.bo)((0,r.bF)(m,{class:"section-card",flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("p",{class:"mb-0"}," Users can view and update their personal profiles and account information. They have access to track their account status, activities, and transaction history. Users can request changes or support through the system's integrated help desk. ",-1)]))),_:1,__:[4]})])),_:1},512),[[i.aG,"option-2"===n.tab]])])])])),_:1})],4)],64)}var M={data(){return{tab:"option-1",backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg"}},components:{PageHeader:E},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",margin:0,padding:0}}}};const T=(0,c.A)(M,[["render",I],["__scopeId","data-v-21d38517"]]);var P=T;const U={class:"sidebar-header"},$={class:"sidebar-button-content"},X={class:"sidebar-text"},q={class:"chart-header"},B={class:"pie-percentage-box"},H={class:"percentage-item"},Y={class:"percentage-value"},O={class:"percentage-item"},j={class:"percentage-value"},Q={class:"chart-header"},z={class:"area-percentage-container"},K={class:"area-percentage-box current"},G={class:"percentage-value"},J={class:"percentage-label"},Z={class:"percentage-year"},ee={class:"area-percentage-box previous-1"},te={class:"percentage-value"},ae={class:"percentage-label"},se={class:"area-percentage-box previous-2"},ne={class:"percentage-value"},le={class:"percentage-label"},ie={class:"chart-header"},re={class:"chart-header"},oe={class:"col-fname text-center"},de={class:"col-mi text-center"},ce={class:"col-lname text-center"},ue={class:"col-course text-center"},me={class:"col-year text-center"},ge={class:"col-status text-center"},he={class:"col-actions text-center"},pe={class:"action-buttons"},fe={class:"text-center pt-2"},ke={class:"details-header"},ve={class:"student-info mb-4"},be={class:"col-event"},Fe={class:"col-semester"},_e={class:"col-fine"},Se={class:"col-date"},ye={class:"total-fines"};function Le(e,t,a,s,n,l){const i=(0,r.g2)("page-header"),o=(0,r.g2)("v-icon"),d=(0,r.g2)("v-list-item"),c=(0,r.g2)("v-list"),u=(0,r.g2)("v-navigation-drawer"),m=(0,r.g2)("v-btn"),g=(0,r.g2)("v-card-title"),p=(0,r.g2)("v-select"),f=(0,r.g2)("PieChart"),k=(0,r.g2)("v-card-text"),v=(0,r.g2)("v-card"),b=(0,r.g2)("v-col"),F=(0,r.g2)("AreaChart"),_=(0,r.g2)("BarChart"),S=(0,r.g2)("DonutChart"),y=(0,r.g2)("v-row"),L=(0,r.g2)("v-text-field"),w=(0,r.g2)("v-chip"),C=(0,r.g2)("v-pagination"),D=(0,r.g2)("v-data-table"),E=(0,r.g2)("v-container"),A=(0,r.g2)("v-main"),x=(0,r.g2)("v-layout"),V=(0,r.g2)("v-app");return(0,r.uX)(),(0,r.Wv)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(i),(0,r.bF)(x,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{permanent:"",width:"250",class:"sidebar overlapping-sidebar"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",U,[(0,r.bF)(o,{size:"40",color:"white"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("mdi-account-circle")]))),_:1,__:[9]})]),(0,r.bF)(c,{class:"sidebar-buttons"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sidebarButtons,(e=>((0,r.uX)(),(0,r.Wv)(d,{key:e.route,class:"sidebar-button-wrapper",onClick:t=>l.navigateTo(e.route)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",$,[(0,r.bF)(o,{size:"30",class:"sidebar-icon"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.icon),1)])),_:2},1024),(0,r.Lk)("span",X,(0,h.v_)(e.text),1)]),t[10]||(t[10]=(0,r.Lk)("div",{class:"border-animation"},null,-1))])),_:2,__:[10]},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,r.bF)(A,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(E,null,{default:(0,r.k6)((()=>[(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{class:"text-left d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>[t[11]||(t[11]=(0,r.Lk)("h1",{class:"table-title"},"STUDENT MANAGEMENT",-1)),(0,r.bF)(m,{color:"primary",onClick:t[0]||(t[0]=e=>n.showStudentList=!n.showStudentList),class:"show-list-btn"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.showStudentList?"Show Graph":"Show List"),1)])),_:1})])),_:1,__:[11]}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[n.showStudentList?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(y,{key:0,class:"charts-grid"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12",md:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"chart-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",q,[(0,r.bF)(g,{class:"chart-title"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:"",color:"white"},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("mdi-chart-pie")]))),_:1,__:[12]}),t[13]||(t[13]=(0,r.eW)(" Fines Distribution "))])),_:1,__:[13]}),(0,r.bF)(p,{modelValue:n.selectedFineEvent,"onUpdate:modelValue":[t[1]||(t[1]=e=>n.selectedFineEvent=e),l.updateFineData],items:n.fineEvents,label:"Select Event",outlined:"",dense:"",dark:"",class:"event-selector"},null,8,["modelValue","items","onUpdate:modelValue"])]),(0,r.bF)(k,{class:"chart-container"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{data:n.pieChartData,options:n.pieChartOptions},null,8,["data","options"]),(0,r.Lk)("div",B,[(0,r.Lk)("div",H,[(0,r.Lk)("span",Y,(0,h.v_)(100-n.currentFinePercentage)+"%",1),t[14]||(t[14]=(0,r.Lk)("span",{class:"percentage-label"},"No Fines",-1))]),(0,r.Lk)("div",O,[(0,r.Lk)("span",j,(0,h.v_)(n.currentFinePercentage)+"%",1),t[15]||(t[15]=(0,r.Lk)("span",{class:"percentage-label"},"With Fines",-1))])])])),_:1})])),_:1})])),_:1}),(0,r.bF)(b,{cols:"12",md:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"chart-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Q,[(0,r.bF)(g,{class:"chart-title"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:"",color:"white"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("mdi-chart-areaspline")]))),_:1,__:[16]}),t[17]||(t[17]=(0,r.eW)(" Fines Over Time "))])),_:1,__:[17]}),(0,r.bF)(p,{modelValue:n.selectedSchoolYear,"onUpdate:modelValue":[t[2]||(t[2]=e=>n.selectedSchoolYear=e),l.updateAreaChartData],items:n.schoolYears,label:"School Year",outlined:"",dense:"",dark:"",class:"event-selector area-selector"},null,8,["modelValue","items","onUpdate:modelValue"])]),(0,r.bF)(k,{class:"chart-container"},{default:(0,r.k6)((()=>[(0,r.bF)(F,{data:n.areaChartData,options:n.areaChartOptions},null,8,["data","options"]),(0,r.Lk)("div",z,[(0,r.Lk)("div",K,[(0,r.Lk)("div",G,(0,h.v_)(n.currentSemesterData.percentage)+"%",1),(0,r.Lk)("div",J,(0,h.v_)(n.currentSemesterData.semester),1),(0,r.Lk)("div",Z,(0,h.v_)(n.selectedSchoolYear),1)]),(0,r.Lk)("div",ee,[(0,r.Lk)("div",te,(0,h.v_)(n.previousYear1Data.percentage)+"%",1),(0,r.Lk)("div",ae,(0,h.v_)(n.previousYear1Data.year),1)]),(0,r.Lk)("div",se,[(0,r.Lk)("div",ne,(0,h.v_)(n.previousYear2Data.percentage)+"%",1),(0,r.Lk)("div",le,(0,h.v_)(n.previousYear2Data.year),1)])])])),_:1})])),_:1})])),_:1}),(0,r.bF)(b,{cols:"12",md:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"chart-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",ie,[(0,r.bF)(g,{class:"chart-title"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:"",color:"white"},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)("mdi-chart-bar")]))),_:1,__:[18]}),t[19]||(t[19]=(0,r.eW)(" Attendance by Course "))])),_:1,__:[19]}),(0,r.bF)(p,{modelValue:n.selectedAttendanceEvent,"onUpdate:modelValue":[t[3]||(t[3]=e=>n.selectedAttendanceEvent=e),l.updateAttendanceData],items:n.attendanceEvents,label:"Select Event",outlined:"",dense:"",dark:"",class:"event-selector"},null,8,["modelValue","items","onUpdate:modelValue"])]),(0,r.bF)(k,{class:"chart-container"},{default:(0,r.k6)((()=>[(0,r.bF)(_,{data:n.attendanceBarData,options:n.barChartOptions},null,8,["data","options"])])),_:1})])),_:1})])),_:1}),(0,r.bF)(b,{cols:"12",md:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"chart-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",re,[(0,r.bF)(g,{class:"chart-title"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:"",color:"white"},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("mdi-account-group")]))),_:1,__:[20]}),t[21]||(t[21]=(0,r.eW)(" Total Students of CICS "))])),_:1,__:[21]})]),(0,r.bF)(k,{class:"chart-container"},{default:(0,r.k6)((()=>[(0,r.bF)(S,{data:n.donutChartData,options:n.donutChartOptions},null,8,["data","options"]),t[22]||(t[22]=(0,r.Lk)("div",{class:"donut-text-container"},[(0,r.Lk)("div",{class:"donut-percentage-box"},[(0,r.Lk)("div",{class:"percentage-item"},[(0,r.Lk)("span",{class:"percentage-percent"},"45%"),(0,r.Lk)("span",{class:"percentage-value"},"1,350 students"),(0,r.Lk)("span",{class:"percentage-course"},"BSIT")]),(0,r.Lk)("div",{class:"percentage-item"},[(0,r.Lk)("span",{class:"percentage-percent"},"30%"),(0,r.Lk)("span",{class:"percentage-value"},"900 students"),(0,r.Lk)("span",{class:"percentage-course"},"BSIS")]),(0,r.Lk)("div",{class:"percentage-item"},[(0,r.Lk)("span",{class:"percentage-percent"},"25%"),(0,r.Lk)("span",{class:"percentage-value"},"750 students"),(0,r.Lk)("span",{class:"percentage-course"},"BSCS")])])],-1))])),_:1,__:[22]})])),_:1})])),_:1})])),_:1})),n.showStudentList?((0,r.uX)(),(0,r.Wv)(y,{key:1,class:"student-list-section"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:n.showFineDetails?8:12},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"student-list-card"},{default:(0,r.k6)((()=>[(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(y,{class:"mb-1",align:"center"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12",class:"d-flex"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:n.filter.course,"onUpdate:modelValue":t[4]||(t[4]=e=>n.filter.course=e),items:n.courses,label:"Select Course",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1}),(0,r.bF)(b,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:n.filter.yearLevel,"onUpdate:modelValue":t[5]||(t[5]=e=>n.filter.yearLevel=e),items:n.yearLevels,label:"Select Year Level",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1})])),_:1}),(0,r.bF)(b,{cols:"12",class:"mt-n4"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{modelValue:n.search,"onUpdate:modelValue":t[6]||(t[6]=e=>n.search=e),"append-icon":"mdi-magnify",label:"Search students...","single-line":"","hide-details":"",outlined:"",dark:"",class:"search-field"},null,8,["modelValue"])])),_:1})])),_:1}),t[23]||(t[23]=(0,r.Lk)("div",{class:"student-list-header"},[(0,r.Lk)("span",{class:"col-fname"},"First Name"),(0,r.Lk)("span",{class:"col-mi"},"M.I."),(0,r.Lk)("span",{class:"col-lname"},"Last Name"),(0,r.Lk)("span",{class:"col-course"},"Course"),(0,r.Lk)("span",{class:"col-year"},"Year Level"),(0,r.Lk)("span",{class:"col-status"},"Status"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(D,{headers:n.studentFinesHeaders,items:l.filteredStudents,search:n.search,"items-per-page":10,page:n.page,"onUpdate:page":t[8]||(t[8]=e=>n.page=e),class:"elevation-1 student-fines-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",oe,(0,h.v_)(e.firstName),1),(0,r.Lk)("td",de,(0,h.v_)(e.middleInitial),1),(0,r.Lk)("td",ce,(0,h.v_)(e.lastName),1),(0,r.Lk)("td",ue,(0,h.v_)(e.department),1),(0,r.Lk)("td",me,(0,h.v_)(e.yearLevel),1),(0,r.Lk)("td",ge,[(0,r.bF)(w,{small:"",color:l.getStatusColor(e.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.status),1)])),_:2},1032,["color"])]),(0,r.Lk)("td",he,[(0,r.Lk)("div",pe,[(0,r.bF)(m,{small:"",color:"primary",onClick:t=>l.toggleFineDetails(e),class:"action-btn"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent&&n.selectedStudent.id===e.id?"Hide":"View"),1)])),_:2},1032,["onClick"])])])])])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",fe,[(0,r.bF)(C,{modelValue:n.page,"onUpdate:modelValue":t[7]||(t[7]=e=>n.page=e),length:n.pageCount,"total-visible":5,color:"primary",dark:""},null,8,["modelValue","length"])])])),_:1},8,["headers","items","search","page"])])),_:1,__:[23]})])),_:1})])),_:1},8,["cols"]),n.showFineDetails?((0,r.uX)(),(0,r.Wv)(b,{key:0,cols:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"fine-details-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",ke,[(0,r.bF)(g,{class:"details-title"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent.fname)+" "+(0,h.v_)(n.selectedStudent.lname)+"'s Details ",1)])),_:1})]),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",ve,[(0,r.Lk)("p",null,[t[24]||(t[24]=(0,r.Lk)("strong",null,"Course:",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedStudent.course),1)]),(0,r.Lk)("p",null,[t[25]||(t[25]=(0,r.Lk)("strong",null,"Year Level:",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedStudent.year),1)]),(0,r.Lk)("p",null,[t[26]||(t[26]=(0,r.Lk)("strong",null,"Status:",-1)),(0,r.bF)(w,{small:"",color:l.getStatusColor(n.selectedStudent.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent.status),1)])),_:1},8,["color"])])]),t[27]||(t[27]=(0,r.Lk)("div",{class:"fine-details-header"},[(0,r.Lk)("span",{class:"col-event"},"Event"),(0,r.Lk)("span",{class:"col-semester"},"Semester"),(0,r.Lk)("span",{class:"col-fine"},"Fine Amount"),(0,r.Lk)("span",{class:"col-date"},"Date")],-1)),(0,r.bF)(D,{headers:n.fineDetailsHeaders,items:n.fineDetails,"hide-default-footer":!0,class:"elevation-1 fine-details-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",be,(0,h.v_)(e.event),1),(0,r.Lk)("td",Fe,(0,h.v_)(e.semester),1),(0,r.Lk)("td",_e,(0,h.v_)(e.fine),1),(0,r.Lk)("td",Se,(0,h.v_)(l.formatDate(e.date)),1)])])),_:1},8,["headers","items"]),(0,r.Lk)("div",ye,[(0,r.Lk)("strong",null,"Total Fines: "+(0,h.v_)(l.calculateTotalFines()),1)])])),_:1,__:[27]})])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],4)])),_:1})])),_:1})])),_:1})}const we={key:0},Ce={key:1};function De(e,t,a,s,n,l){const o=(0,r.g2)("v-btn"),d=(0,r.g2)("v-toolbar-items"),c=(0,r.g2)("v-icon"),u=(0,r.g2)("v-chip"),m=(0,r.g2)("v-spacer"),g=(0,r.g2)("v-card-title"),p=(0,r.g2)("v-textarea"),f=(0,r.g2)("v-card-text"),k=(0,r.g2)("v-card-actions"),v=(0,r.g2)("v-card"),b=(0,r.g2)("v-dialog"),F=(0,r.g2)("v-text-field"),_=(0,r.g2)("v-toolbar");return(0,r.uX)(),(0,r.Wv)(_,{elevation:8,dark:"",prominent:"",style:{"background-color":"navy"}},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(o,{onClick:t[0]||(t[0]=e=>n.showNoteDialog=!0),class:"toolbar-btn"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/note.png",alt:"Note Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"Note",-1)]))),_:1,__:[13]})])),_:1}),(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(o,{onClick:t[1]||(t[1]=e=>n.showAboutDialog=!0),class:"toolbar-btn"},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/info.png",alt:"About Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"About",-1)]))),_:1,__:[14]})])),_:1}),(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"ma-2",color:l.roleColor,"text-color":"white"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{left:""},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("mdi-account")]))),_:1,__:[15]}),(0,r.eW)(" "+(0,h.v_)(l.roleText),1)])),_:1},8,["color"])])),_:1}),(0,r.bF)(m),(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(o,{to:{name:"AccountList"},class:"toolbar-btn"},{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("mdi-account")]))),_:1,__:[16]}),t[17]||(t[17]=(0,r.Lk)("span",{class:"toolbar-text"},"Account List",-1))])),_:1,__:[17]})])),_:1}),(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(o,{class:"toolbar-btn",onClick:l.logout},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/logout-rounded-left.png",alt:"Logout Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"Logout",-1)]))),_:1,__:[18]},8,["onClick"])])),_:1}),(0,r.bF)(b,{modelValue:n.showNoteDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>n.showNoteDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("Quick Note")]))),_:1,__:[19]}),(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:n.note,"onUpdate:modelValue":t[2]||(t[2]=e=>n.note=e),outlined:"",placeholder:"Type your notes here..."},null,8,["modelValue"])])),_:1}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(m),(0,r.bF)(o,{color:"primary",onClick:l.saveNote},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("Save")]))),_:1,__:[20]},8,["onClick"]),(0,r.bF)(o,{onClick:t[3]||(t[3]=e=>n.showNoteDialog=!1)},{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("Cancel")]))),_:1,__:[21]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(b,{modelValue:n.showAboutDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>n.showAboutDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)("About Bytes Touchlog")]))),_:1,__:[22]}),(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.Lk)("p",null,[t[23]||(t[23]=(0,r.eW)("Bytes Touchlog is an efficient attendance system designed for Bytes officers to streamline student attendance tracking during events. This user-friendly system simplifies the check-in process, ensuring accurate and real-time recording of participants. With Bytes Touchlog, officers can quickly verify attendance, reduce manual errors, and generate reports effortlessly, making event management smoother and more organized. Ideal for tech-driven environments, it enhances accountability and saves time, allowing officers to focus on delivering a seamless event experience")),(0,r.Lk)("span",{class:"secret-link",onClick:t[5]||(t[5]=(...e)=>l.handleSecretClick&&l.handleSecretClick(...e))},".")])])),_:1}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(m),(0,r.bF)(o,{color:"primary",onClick:t[6]||(t[6]=e=>n.showAboutDialog=!1)},{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)("Close")]))),_:1,__:[24]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(b,{modelValue:n.showDevAuthDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>n.showDevAuthDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>t[25]||(t[25]=[(0,r.eW)("Dev Authentication Required")]))),_:1,__:[25]}),(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,{modelValue:n.devPassword,"onUpdate:modelValue":t[8]||(t[8]=e=>n.devPassword=e),type:"password",label:"Enter Dev Password",outlined:"",onKeyup:(0,i.jR)(l.verifyDevAccess,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(o,{color:"error",onClick:t[9]||(t[9]=e=>n.showDevAuthDialog=!1)},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.eW)("Cancel")]))),_:1,__:[26]}),(0,r.bF)(m),(0,r.bF)(o,{color:"primary",onClick:l.verifyDevAccess},{default:(0,r.k6)((()=>t[27]||(t[27]=[(0,r.eW)("Verify")]))),_:1,__:[27]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(b,{modelValue:n.showLogoutDialog,"onUpdate:modelValue":t[12]||(t[12]=e=>n.showLogoutDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>t[28]||(t[28]=[(0,r.eW)("Confirm Logout")]))),_:1,__:[28]}),(0,r.bF)(f,null,{default:(0,r.k6)((()=>t[29]||(t[29]=[(0,r.eW)(" Are you sure you want to log out? ")]))),_:1,__:[29]}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(m),(0,r.bF)(o,{color:"primary",loading:n.isLoggingOut,disabled:n.isLoggingOut,onClick:l.confirmLogout},{default:(0,r.k6)((()=>[n.isLoggingOut?((0,r.uX)(),(0,r.CE)("span",Ce,"Logging out...")):((0,r.uX)(),(0,r.CE)("span",we,"Logout"))])),_:1},8,["loading","disabled","onClick"]),(0,r.bF)(o,{onClick:t[11]||(t[11]=e=>n.showLogoutDialog=!1)},{default:(0,r.k6)((()=>t[30]||(t[30]=[(0,r.eW)("Cancel")]))),_:1,__:[30]})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Ee={recordLogin(e){return y.post("/api/history/record-login",e)},recordLogout(e){return y.post("/api/history/record-logout",{ip:e.ip,device:e.device})},getLoginHistory(){return y.get("/api/history/login-logs")},getFullSessionHistory(){return y.get("/api/history/session-logs")},logout(){return y.post("/api/logout")},login(e){return y.post("/",e)},createAccount(e){return y.post("/api/users",e)},verifyDevPassword:e=>y.post("/api/verify-dev",{password:e}),getAccounts(){return y.get("/api/users")},toggleAccountStatus(e){return y.put(`/api/users/${e}/status`).catch((e=>{throw new Error(`Toggle failed: ${e.response?.data?.error||e.message}`)}))},updateAccount(e){return y.put(`/api/users/${e.id}`,e)},getStudents(){return y.get("/students")},createStudent(e){return y.post("/students",e)},uploadStudents(e){const t=new FormData;return t.append("file",e),y.post("/students/upload",t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}).catch((e=>{throw console.error("Upload error details:",e.response?.data),e}))},clearStudents(){return y.delete("/students/clear")},updateStudents(e,t){return y.put(`/students/${e}/api`,t)},EnrollExist(e){return y.post("/student/enrollexist",e)},getEvents(){return y.get("/events")},createEvent(e){return y.post("/events",e)},updateEvent(e,t){return y.put(`/events/${e}`,t)},enrollFingerprint(e){return y.post("/fingerprint/enroll",e)},identifyFingerprint(e){return y.post("/fingerprint/identify",e)},identifyFingerprint2(e){return y.post("/fingerprint/identify2",e)},saveFine(e,t){return y.put(`/fines/${e}`,t)},getFinesForEvent(e){return y.get(`/fines/student/${e}`)},deleteFine(e){return y.delete(`/fines/${e}`)},getAttendanceForEvent(e){return y.get(`/attendance/${e}`)},updateAttendance(e){return y.put("/attendance",e)},getStudentFines(e){return y.get(`/fines/student/${e}`)},clearStudentFines(e){return y.put(`/fines/student/${e}/clear`)}},Ae={computed:{roleText(){return this.$store.getters.isAuthenticated?"admin"===this.$store.getters.userRole?"Administrator":"User":"Guest"},roleColor(){return this.$store.getters.isAuthenticated?"admin"===this.$store.getters.userRole?"green":"blue":"grey"}},data(){return{showDevAuthDialog:!1,showLogoutDialog:!1,showNoteDialog:!1,showAboutDialog:!1,note:"",devPassword:"",isLoggingOut:!1}},methods:{logout(){this.showLogoutDialog=!0},async confirmLogout(){this.isLoggingOut=!0;try{const e={ip:await L(),device:navigator.userAgent};await Ee.recordLogout({ip:e.ip,device:e.device}),await this.$store.dispatch("logout"),this.showLogoutDialog=!1}catch(e){console.error("Logout failed:",e)}finally{this.isLoggingOut=!1}},saveNote(){alert("Note saved successfully!"),this.showNoteDialog=!1},handleSecretClick(){"dev"===this.$store.getters.currentUser?.username?this.showDevAuthDialog=!0:(alert("⚠️ Restricted Feature\nOnly dev account can access this"),this.$router.push("/home"))},async verifyDevAccess(){try{const e=this.devPassword.trim();if(!e)return void alert("Please enter dev password");await Ee.verifyDevPassword(e),sessionStorage.setItem("devVerified","true"),this.showDevAuthDialog=!1,this.devPassword="",this.$router.push({name:"AccountManagement"})}catch(e){this.devPassword="";const t=e.response?.data?.error||e.message;console.error("Dev verification error:",e),alert(`🚫 Verification Failed\n${t}`),this.showDevAuthDialog=!1}}}};const xe=(0,c.A)(Ae,[["render",De],["__scopeId","data-v-3ae7738d"]]);var Ve=xe;const Ne={class:"pie-chart-container"},We={ref:"pieChart"};function Re(e,t,a,s,n,l){return(0,r.uX)(),(0,r.CE)("div",Ne,[(0,r.Lk)("canvas",We,null,512)])}var Ie=a(3468),Me={name:"PieChart",props:{data:{type:Object,required:!0},options:{type:Object,default:()=>({})}},mounted(){this.renderChart()},watch:{data:{handler(){this.renderChart()},deep:!0},options:{handler(){this.renderChart()},deep:!0}},methods:{renderChart(){Ie.t1.register(...Ie.$L),this.chart&&this.chart.destroy();const e=this.$refs.pieChart.getContext("2d");this.chart=new Ie.t1(e,{type:"pie",data:this.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"white",font:{family:"'Poppins', sans-serif",size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1,callbacks:{label:function(e){return`${e.label}: ${e.raw}`}}}},...this.options}})}},beforeUnmount(){this.chart&&this.chart.destroy()}};const Te=(0,c.A)(Me,[["render",Re],["__scopeId","data-v-1df9ccc0"]]);var Pe=Te;const Ue={class:"bar-chart-container"},$e={ref:"barChart"};function Xe(e,t,a,s,n,l){return(0,r.uX)(),(0,r.CE)("div",Ue,[(0,r.Lk)("canvas",$e,null,512)])}var qe={name:"BarChart",props:{data:{type:Object,required:!0},options:{type:Object,default:()=>({})}},mounted(){this.renderChart()},watch:{data:{handler(){this.renderChart()},deep:!0},options:{handler(){this.renderChart()},deep:!0}},methods:{renderChart(){Ie.t1.register(...Ie.$L),this.chart&&this.chart.destroy();const e=this.$refs.barChart.getContext("2d");this.chart=new Ie.t1(e,{type:"bar",data:this.data,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},y:{stacked:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}},plugins:{legend:{labels:{color:"white",font:{family:"'Poppins', sans-serif",size:14}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1,callbacks:{label:function(e){return`${e.dataset.label}: ${e.raw}`}}}},...this.options}})}},beforeUnmount(){this.chart&&this.chart.destroy()}};const Be=(0,c.A)(qe,[["render",Xe],["__scopeId","data-v-49c88e06"]]);var He=Be;const Ye={class:"donut-chart-container"},Oe={ref:"donutChart"};function je(e,t,a,s,n,l){return(0,r.uX)(),(0,r.CE)("div",Ye,[(0,r.Lk)("canvas",Oe,null,512)])}var Qe=a(1670),ze=a.n(Qe),Ke={name:"DonutChart",props:{data:{type:Object,required:!0},options:{type:Object,default:()=>({})}},mounted(){this.renderChart()},watch:{data:{handler(){this.renderChart()},deep:!0},options:{handler(){this.renderChart()},deep:!0}},methods:{renderChart(){Ie.t1.register(...Ie.$L,ze()),this.chart&&this.chart.destroy();const e=this.$refs.donutChart.getContext("2d");this.chart=new Ie.t1(e,{type:"doughnut",data:this.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1},doughnutlabel:{labels:[{text:"CICS",font:{size:20,weight:"bold",family:"'Poppins', sans-serif"},color:"white"},{text:"Students",font:{size:16,family:"'Poppins', sans-serif"},color:"rgba(255,255,255,0.8)"}]}},cutout:"70%",...this.options}})}},beforeUnmount(){this.chart&&this.chart.destroy()}};const Ge=(0,c.A)(Ke,[["render",je],["__scopeId","data-v-6f112cec"]]);var Je=Ge;const Ze={class:"chart-container"},et={ref:"chartCanvas"};function tt(e,t,a,s,n,l){return(0,r.uX)(),(0,r.CE)("div",Ze,[(0,r.Lk)("canvas",et,null,512)])}var at={name:"AreaChart",props:{data:{type:Object,required:!0},options:{type:Object,default:()=>({})}},data(){return{chart:null}},mounted(){Ie.t1.register(...Ie.$L),this.renderChart()},beforeUnmount(){this.chart&&this.chart.destroy()},watch:{data:{deep:!0,handler(){this.chart?(this.chart.data=this.data,this.chart.update()):this.renderChart()}},options:{deep:!0,handler(){this.chart&&(this.chart.options=this.options,this.chart.update())}}},methods:{renderChart(){this.$refs.chartCanvas&&(this.chart=new Ie.t1(this.$refs.chartCanvas,{type:"line",data:this.data,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{color:"white"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1}},scales:{x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}},elements:{point:{radius:4,hoverRadius:6,backgroundColor:"#2196F3",borderColor:"white",borderWidth:2}},...this.options}}))}}};const st=(0,c.A)(at,[["render",tt],["__scopeId","data-v-73c70622"]]);var nt=st,lt=a(1152),it={components:{PageHeader:Ve,PieChart:Pe,BarChart:He,DonutChart:Je,AreaChart:nt},data(){return{showStudentList:!1,showFineDetails:!1,sidebarButtons:[{text:"Dashboard",route:"Home",icon:"mdi-view-dashboard"},{text:"Manage Student",route:"manage-students",icon:"mdi-account-group"},{text:"Manage Event",route:"manage-events",icon:"mdi-calendar-multiple"},{text:"History Log",route:"history-log",icon:"mdi-history"}],filter:{course:null,yearLevel:null},search:"",selectedStudent:null,students:[],backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",page:1,pageCount:1,courses:["All","BSIT","BSIS","BSCS"],yearLevels:["All","1st Year","2nd Year","3rd Year","4th Year"],statusOptions:["Enrolled","Shifted","Graduated","Dropped"],fineDetailsHeaders:[{text:"Event Name",value:"event",width:"30%"},{text:"Semester",value:"semester",width:"20%"},{text:"Fine Amount",value:"fine",width:"25%"},{text:"Date",value:"date",width:"25%"}],fineDetails:[],selectedFineEvent:"Orientation",selectedAttendanceEvent:"Today",selectedSchoolYear:"2023-2024",currentFinePercentage:40,currentGrowthRate:12.5,fineEvents:["Orientation","Seminar","Workshop","Meeting"],attendanceEvents:["Today","Event A","Event B"],schoolYears:["2022-2023","2023-2024","2024-2025"],studentFinesHeaders:[{text:"First Name",value:"fname",align:"center",width:"15%"},{text:"M.I.",value:"mi",align:"center",width:"5%"},{text:"Last Name",value:"lname",align:"center",width:"15%"},{text:"Course",value:"course",align:"center",width:"15%"},{text:"Year Level",value:"year",align:"center",width:"15%"},{text:"Status",value:"status",align:"center",width:"15%"},{text:"Actions",value:"actions",align:"center",width:"20%",sortable:!1}],studentFines:[{id:1,fname:"Al-shiolla",mi:"H.",lname:"Haron",course:"BSIT",year:"3rd Year",status:"Regular",hasFine:!0,hasFingerprint:!0,fingerprintDate:"2023-05-15"},{id:2,fname:"Jane",mi:"A.",lname:"Batuhan",course:"BSIT",year:"4th Year",status:"Graduated",hasFine:!1,hasFingerprint:!1},{id:3,fname:"Aiman",mi:"C.",lname:"Pumbaya",course:"BSIT",year:"3rd Year",status:"Regular",hasFine:!0,hasFingerprint:!0,fingerprintDate:"2023-06-20"},{id:4,fname:"Sodais",mi:"M.",lname:"Macapantao",course:"BSIS",year:"2nd Year",status:"Irregular",hasFine:!1,hasFingerprint:!1},{id:5,fname:"Abdulazis",mi:"D.",lname:"Mapandi",course:"BSCS",year:"1st Year",status:"Regular",hasFine:!0,hasFingerprint:!1},{id:6,fname:"Faiz",mi:"A.",lname:"Rataban",course:"BSCS",year:"3rd Year",status:"Shifted",hasFine:!1,hasFingerprint:!0,fingerprintDate:"2023-04-10"},{id:7,fname:"Doms",mi:"M.",lname:"Benito",course:"BSIS",year:"2nd Year",status:"Regular",hasFine:!0,hasFingerprint:!1}],pieChartData:{labels:["No Fines","With Fines"],datasets:[{data:[60,40],backgroundColor:["#2196F3","#F44336"],borderWidth:0,hoverOffset:10}]},areaChartData:{labels:["1st Sem","2nd Sem","Summer"],datasets:[{label:"Fines Collected",data:[3200,4800,1200],backgroundColor:"rgba(33, 150, 243, 0.3)",borderColor:"#2196F3",borderWidth:2,fill:!0,tension:.4}]},attendanceBarData:{labels:["BSIT","BSIS","BSCS"],datasets:[{label:"Attended",backgroundColor:"#2196F3",data:[42,28,35],borderRadius:6},{label:"Absent",backgroundColor:"#F44336",data:[8,12,5],borderRadius:6}]},donutChartData:{labels:["BSIT","BSIS","BSCS"],datasets:[{data:[45,30,25],backgroundColor:["#2196F3","#4CAF50","#FFC107"],borderWidth:0,hoverOffset:10}]},currentSemesterData:{semester:"2nd Sem",percentage:12.5,year:"2023-2024"},previousYear1Data:{year:"2022-2023",percentage:8.2},previousYear2Data:{year:"2021-2022",percentage:5.5},barChartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}},plugins:{legend:{labels:{color:"white",font:{size:14}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1}}},pieChartOptions:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"white",font:{size:14}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1}}},areaChartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"white"}}},plugins:{legend:{display:!1,labels:{color:"white",font:{size:14}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1}}},donutChartOptions:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#2196F3",bodyColor:"white",borderColor:"#2196F3",borderWidth:1},doughnutlabel:{labels:[{text:"CICS",font:{size:20,weight:"bold",family:"'Poppins', sans-serif"},color:"white"},{text:"Students",font:{size:16,family:"'Poppins', sans-serif"},color:"rgba(255,255,255,0.8)"}]}}}}},async mounted(){await this.fetchStudents()},computed:{filteredStudents(){return this.students.filter((e=>("All"===this.filter.department||!this.filter.department||e.department===this.filter.department)&&("All"===this.filter.yearLevel||!this.filter.yearLevel||e.yearLevel===this.filter.yearLevel)&&(""===this.search||e.firstName.toLowerCase().includes(this.search.toLowerCase())||e.lastName.toLowerCase().includes(this.search.toLowerCase())||e.department.toLowerCase().includes(this.search.toLowerCase())||e.yearLevel.toLowerCase().includes(this.search.toLowerCase()))))},backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}}},methods:{async fetchStudents(){try{const e=await Ee.getStudents();this.students=e.data}catch(e){console.error("Error fetching students:",e)}},navigateTo(e){this.$router.push({name:e})},updatePagination(){this.pageCount=Math.ceil(this.filteredStudents.length/10)},getStatusColor(e){const t={Enrolled:"green",Shifted:"blue",Graduated:"purple",Dropped:"red"};return t[e]||"gray"},calculateTotalFines(){const e=this.fineDetails.reduce(((e,t)=>e+parseFloat(t.fine.replace("₱",""))),0);return`₱${e.toFixed(2)}`},toggleFineDetails(e){this.selectedStudent&&this.selectedStudent.id===e.id?(this.selectedStudent=null,this.showFineDetails=!1,this.fineDetails=[]):(this.selectedStudent=e,this.showFineDetails=!0,this.fineDetails=this.generateMockFineDetails())},updateFineData(e){const t="Orientation"===e?40:"Seminar"===e?35:"Workshop"===e?25:45;this.currentFinePercentage=t,this.pieChartData={...this.pieChartData,datasets:[{...this.pieChartData.datasets[0],data:[100-t,t]}]}},updateAttendanceData(e){const t="Today"===e?[42,28,35]:"Event A"===e?[38,25,32]:[45,30,28],a="Today"===e?[8,12,5]:"Event A"===e?[12,15,8]:[5,10,12];this.attendanceBarData={...this.attendanceBarData,datasets:[{...this.attendanceBarData.datasets[0],data:t},{...this.attendanceBarData.datasets[1],data:a}]}},updateAreaChartData(e){const t="2022-2023"===e?[2800,3500,800]:"2023-2024"===e?[3200,4800,1200]:[3800,5200,1500];this.currentSemesterData={semester:"2nd Sem",percentage:this.yearGrowthRates[e]||12.5,year:e},this.areaChartData={...this.areaChartData,datasets:[{...this.areaChartData.datasets[0],data:t}]}},generateMockFineDetails(){const e=["Orientation","Seminar","Workshop","Meeting"],t=["1st Semester","2nd Semester"],a=[];for(let s=0;s<3;s++){const s=e[Math.floor(Math.random()*e.length)],n=t[Math.floor(Math.random()*t.length)],l=new Date;l.setDate(l.getDate()-Math.floor(30*Math.random())),a.push({event:s,semester:n,fine:"₱"+(500*Math.random()).toFixed(2),date:l.toISOString()})}return a},formatDate(e){return e?(0,lt.GP)(new Date(e),"MMM dd, yyyy"):"N/A"}},watch:{selectedFineEvent(e){this.updateFineData(e)},selectedAttendanceEvent(e){this.updateAttendanceData(e)},selectedSchoolYear(e){this.updateAreaChartData(e)},filteredStudents(){this.updatePagination()}},created(){this.updatePagination()}};const rt=(0,c.A)(it,[["render",Le],["__scopeId","data-v-783a565a"]]);var ot=rt;const dt={class:"sidebar-header"},ct={class:"sidebar-button-content"},ut={class:"sidebar-text"},mt={class:"col-name text-left"},gt={class:"col-sem text-left"},ht={class:"col-fee text-left"},pt={class:"col-date text-left"},ft={class:"col-actions text-center"},kt={class:"action-buttons"},vt={class:"fingerprint-sensor"},bt={class:"instruction"},Ft={key:0,class:"fingerprint-animation"},_t={key:1,class:"scan-result"};function St(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-icon"),c=(0,r.g2)("v-list-item"),u=(0,r.g2)("v-list"),m=(0,r.g2)("v-navigation-drawer"),g=(0,r.g2)("v-btn"),p=(0,r.g2)("v-card-title"),f=(0,r.g2)("v-data-table"),k=(0,r.g2)("v-card-text"),v=(0,r.g2)("v-card"),b=(0,r.g2)("v-col"),F=(0,r.g2)("v-row"),_=(0,r.g2)("v-container"),S=(0,r.g2)("v-text-field"),y=(0,r.g2)("v-form"),L=(0,r.g2)("v-spacer"),w=(0,r.g2)("v-card-actions"),C=(0,r.g2)("v-dialog"),D=(0,r.g2)("v-select"),E=(0,r.g2)("v-progress-linear"),A=(0,r.g2)("v-main"),x=(0,r.g2)("v-layout"),V=(0,r.g2)("v-app");return(0,r.uX)(),(0,r.Wv)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(o),(0,r.bF)(x,null,{default:(0,r.k6)((()=>[(0,r.bF)(m,{permanent:"",width:"250",class:"sidebar overlapping-sidebar"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",dt,[(0,r.bF)(d,{size:"40",color:"white"},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("mdi-account-circle")]))),_:1,__:[12]})]),(0,r.bF)(u,{class:"sidebar-buttons"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sidebarButtons,(e=>((0,r.uX)(),(0,r.Wv)(c,{key:e.route,class:"sidebar-button-wrapper",onClick:t=>l.navigateTo(e.route)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",ct,[(0,r.bF)(d,{size:"30",class:"sidebar-icon"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.icon),1)])),_:2},1024),(0,r.Lk)("span",ut,(0,h.v_)(e.text),1)]),t[13]||(t[13]=(0,r.Lk)("div",{class:"border-animation"},null,-1))])),_:2,__:[13]},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,r.bF)(A,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(_,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>[t[16]||(t[16]=(0,r.Lk)("h1",{class:"table-title"},"Event Management",-1)),(0,r.bF)(g,{color:"teal",dark:"",onClick:l.openCreateDialog},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("mdi-plus")]))),_:1,__:[14]}),t[15]||(t[15]=(0,r.eW)(" Create New Event "))])),_:1,__:[15]},8,["onClick"])])),_:1,__:[16]}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[t[23]||(t[23]=(0,r.Lk)("div",{class:"event-list-header"},[(0,r.Lk)("span",{class:"col-name"},"Event Name"),(0,r.Lk)("span",{class:"col-fee"},"Fee Amount"),(0,r.Lk)("span",{class:"col-date"},"Date"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(f,{headers:n.tableHeaders,items:n.events,"items-per-page":-1,"hide-default-footer":!0,class:"elevation-1 event-table",dark:"","hide-default-header":"",loading:e.loading},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",mt,(0,h.v_)(e.name),1),(0,r.Lk)("td",gt,"₱"+(0,h.v_)(e.semester),1),(0,r.Lk)("td",ht,"₱"+(0,h.v_)(e.fee),1),(0,r.Lk)("td",pt,(0,h.v_)(l.formatDate(e.date)),1),(0,r.Lk)("td",ft,[(0,r.Lk)("div",kt,[(0,r.bF)(g,{small:"",color:"teal",onClick:t=>l.openAttendanceDialog(e)},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("mdi-fingerprint")]))),_:1,__:[17]}),t[18]||(t[18]=(0,r.eW)(" Attendance "))])),_:2,__:[18]},1032,["onClick"]),(0,r.bF)(g,{small:"",color:"primary",onClick:t=>l.initiateEdit(e)},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("mdi-pencil")]))),_:1,__:[19]}),t[20]||(t[20]=(0,r.eW)(" Edit "))])),_:2,__:[20]},1032,["onClick"]),(0,r.bF)(g,{small:"",color:"error",onClick:t=>l.confirmDeletion(e)},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("mdi-delete")]))),_:1,__:[21]}),t[22]||(t[22]=(0,r.eW)(" Remove "))])),_:2,__:[22]},1032,["onClick"])])])])])),_:1},8,["headers","items","loading"])])),_:1,__:[23]})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(C,{modelValue:n.createDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>n.createDialog=e),"max-width":"600",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"fine-card"},{default:(0,r.k6)((()=>[(0,r.bF)(p,null,{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)("Create New Event")]))),_:1,__:[24]}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(y,{ref:"creationForm",onSubmit:(0,i.D$)(l.submitNewEvent,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(S,{modelValue:n.newEvent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.newEvent.name=e),label:"Event Name",outlined:"",dark:"",rules:[e=>!!e||"Event name is required"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(S,{modelValue:n.newEvent.semester,"onUpdate:modelValue":t[1]||(t[1]=e=>n.newEvent.semester=e),label:"Fee Amount",type:"number",prefix:"₱",outlined:"",dark:"",rules:[e=>!!e||"Fee is required",e=>e>=0||"Fee must be positive"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(S,{modelValue:n.newEvent.fee,"onUpdate:modelValue":t[2]||(t[2]=e=>n.newEvent.fee=e),label:"Fee Amount",type:"number",prefix:"₱",outlined:"",dark:"",rules:[e=>!!e||"Fee is required",e=>e>=0||"Fee must be positive"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(S,{modelValue:n.newEvent.date,"onUpdate:modelValue":t[3]||(t[3]=e=>n.newEvent.date=e),label:"Date",type:"date",outlined:"",dark:"",rules:[e=>!!e||"Date is required"],required:""},null,8,["modelValue","rules"])])),_:1},8,["onSubmit"])])),_:1}),(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.bF)(L),(0,r.bF)(g,{color:"secondary",onClick:l.closeCreateDialog},{default:(0,r.k6)((()=>t[25]||(t[25]=[(0,r.eW)("Cancel")]))),_:1,__:[25]},8,["onClick"]),(0,r.bF)(g,{color:"teal",dark:"",onClick:l.submitNewEvent},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.eW)("Create")]))),_:1,__:[26]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(C,{modelValue:n.editDialog,"onUpdate:modelValue":t[9]||(t[9]=e=>n.editDialog=e),"max-width":"600",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"fine-card"},{default:(0,r.k6)((()=>[(0,r.bF)(p,null,{default:(0,r.k6)((()=>t[27]||(t[27]=[(0,r.eW)("Edit Event")]))),_:1,__:[27]}),(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(y,{ref:"editForm",onSubmit:(0,i.D$)(l.updateEvent,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(S,{modelValue:n.editingEvent.name,"onUpdate:modelValue":t[5]||(t[5]=e=>n.editingEvent.name=e),label:"Event Name",outlined:"",dark:"",rules:[e=>!!e||"Event name is required"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(D,{modelValue:n.editingEvent.semester,"onUpdate:modelValue":t[6]||(t[6]=e=>n.editingEvent.semester=e),items:n.semesters.filter((e=>"All"!==e)),label:"Semester",outlined:"",dense:"",dark:"","hide-details":"",rules:[e=>!!e||"Semester is required"],required:""},null,8,["modelValue","items","rules"]),(0,r.bF)(S,{modelValue:n.editingEvent.fee,"onUpdate:modelValue":t[7]||(t[7]=e=>n.editingEvent.fee=e),label:"Fee Amount",type:"number",prefix:"₱",outlined:"",dark:"",rules:[e=>!!e||"Fee is required",e=>e>=0||"Fee must be positive"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(S,{modelValue:n.editingEvent.date,"onUpdate:modelValue":t[8]||(t[8]=e=>n.editingEvent.date=e),label:"Date",type:"date",outlined:"",dark:"",rules:[e=>!!e||"Date is required"],required:""},null,8,["modelValue","rules"])])),_:1},8,["onSubmit"])])),_:1}),(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.bF)(L),(0,r.bF)(g,{color:"secondary",onClick:l.closeEditDialog},{default:(0,r.k6)((()=>t[28]||(t[28]=[(0,r.eW)("Cancel")]))),_:1,__:[28]},8,["onClick"]),(0,r.bF)(g,{color:"teal",dark:"",onClick:l.updateEvent},{default:(0,r.k6)((()=>t[29]||(t[29]=[(0,r.eW)("Save")]))),_:1,__:[29]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(C,{modelValue:n.attendanceDialog,"onUpdate:modelValue":t[11]||(t[11]=e=>n.attendanceDialog=e),"max-width":"500",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(v,{class:"fingerprint-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"headline text-center"},{default:(0,r.k6)((()=>[(0,r.eW)(" Biometric Attendance - "+(0,h.v_)(n.currentEvent.name),1)])),_:1}),(0,r.bF)(k,{class:"text-center"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",vt,[(0,r.Lk)("p",bt,(0,h.v_)(n.instructionText),1),(0,r.Lk)("div",{class:"fingerprint-image-container",onClick:t[10]||(t[10]=(...e)=>l.startScan&&l.startScan(...e))},[(0,r.bF)(d,{"x-large":"",class:(0,h.C4)(["fingerprint-icon",{scanning:n.isScanning}])},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.isScanning?"mdi-fingerprint-off":"mdi-fingerprint"),1)])),_:1},8,["class"]),n.isScanning?((0,r.uX)(),(0,r.CE)("div",Ft,t[30]||(t[30]=[(0,r.Lk)("div",{class:"scan-line"},null,-1)]))):(0,r.Q3)("",!0)]),n.isScanning?((0,r.uX)(),(0,r.Wv)(E,{key:0,indeterminate:"",color:"#FFA000",height:"5",class:"progress-bar"})):(0,r.Q3)("",!0),n.scanResult?((0,r.uX)(),(0,r.CE)("div",_t,[(0,r.bF)(d,{large:"",color:n.scanResult.success?"green":"red"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.scanResult.success?"mdi-check-circle":"mdi-alert-circle"),1)])),_:1},8,["color"]),(0,r.Lk)("p",null,(0,h.v_)(n.scanResult.message),1),n.scanResult.success?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(g,{key:0,color:"orange",small:"",onClick:l.startScan,class:"retry-btn"},{default:(0,r.k6)((()=>t[31]||(t[31]=[(0,r.eW)(" Try Again ")]))),_:1,__:[31]},8,["onClick"]))])):(0,r.Q3)("",!0)])])),_:1}),(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.bF)(L),(0,r.bF)(g,{color:"secondary",onClick:l.closeAttendanceDialog},{default:(0,r.k6)((()=>t[32]||(t[32]=[(0,r.eW)(" Close ")]))),_:1,__:[32]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],4)])),_:1})])),_:1})])),_:1})}var yt={components:{PageHeader:Ve},async mounted(){await this.fetchEvents()},data(){return{sidebarButtons:[{text:"Dashboard",route:"Home",icon:"mdi-view-dashboard"},{text:"Manage Student",route:"manage-students",icon:"mdi-account-group"},{text:"Manage Event",route:"manage-events",icon:"mdi-calendar-multiple"},{text:"History Log",route:"history-log",icon:"mdi-history"}],backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",createDialog:!1,editDialog:!1,attendanceDialog:!1,searchQuery:"",filter:{semester:"All"},semesters:["All","1st Semester","2nd Semester","Summer"],newEvent:{name:"",semester:"1st Semester",fee:"",date:""},editingEvent:{id:null,name:"",semester:"",fee:"",date:""},currentEvent:{id:null,name:""},isScanning:!1,scanResult:null,instructionText:"Place your finger on the sensor to scan",events:[],tableHeaders:[{text:"Event Name",value:"name"},{text:"Semester",value:"semester"},{text:"Fee Amount",value:"fee"},{text:"Date",value:"date"},{text:"Actions",value:"actions",sortable:!1}]}},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}},filteredEvents(){let e=this.events;if("All"!==this.filter.semester&&(e=e.filter((e=>e.semester===this.filter.semester))),this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.semester.toLowerCase().includes(t)||e.fee.toString().includes(t)||this.formatDate(e.date).toLowerCase().includes(t)))}return e}},methods:{navigateTo(e){this.$router.push({name:e})},formatDate(e){return e?(0,lt.GP)(new Date(e),"MMM dd, yyyy"):"N/A"},openCreateDialog(){this.createDialog=!0},closeCreateDialog(){this.createDialog=!1,this.$refs.creationForm?.reset(),this.newEvent={name:"",semester:"1st Semester",fee:0,date:""}},async fetchEvents(){try{const e=await Ee.getEvents();this.events=e.data}catch(e){console.error("Error fetching events:",e)}},async submitNewEvent(){if(this.$refs.creationForm.validate())try{const e=await Ee.createEvent(this.newEvent);this.events.push(e.data),this.closeCreateDialog()}catch(e){console.error("Failed to create event:",e)}},initiateEdit(e){this.editingEvent={...e},this.editDialog=!0},closeEditDialog(){this.editDialog=!1,this.$refs.editForm?.reset(),this.editingEvent={id:null,name:"",semester:"",fee:"",date:""}},async updateEvent(){if(!this.$refs.editForm.validate())return;const e=this.events.findIndex((e=>e.id===this.editingEvent.id));-1!==e&&this.events.splice(e,1,{...this.editingEvent,fee:parseFloat(this.editingEvent.fee)}),this.closeEditDialog()},confirmDeletion(e){confirm(`Are you sure you want to delete "${e.name}"?`)&&(this.events=this.events.filter((t=>t.id!==e.id)))},openAttendanceDialog(e){this.currentEvent={id:e.id,name:e.name},this.attendanceDialog=!0,this.resetScanner()},closeAttendanceDialog(){this.attendanceDialog=!1,this.resetScanner()},resetScanner(){this.isScanning=!1,this.scanResult=null,this.instructionText="Place your finger on the sensor to scan"},startScan(){this.isScanning||(this.isScanning=!0,this.scanResult=null,this.instructionText="Scanning in progress...",setTimeout((()=>{this.isScanning=!1;const e=Math.random()>.2;this.scanResult={success:e,message:e?"Attendance recorded successfully!":"Scan failed. Fingerprint not recognized."},this.instructionText=e?"Scan completed successfully":"Scan failed. Please try again.",e&&setTimeout((()=>{this.scanResult=null,this.instructionText="Place your finger on the sensor to scan"}),3e3)}),2e3))}}};const Lt=(0,c.A)(yt,[["render",St],["__scopeId","data-v-e4632fca"]]);var wt=Lt;const Ct={class:"sidebar-header"},Dt={class:"sidebar-button-content"},Et={class:"sidebar-text"},At={class:"d-flex align-center flex-wrap",style:{gap:"12px"}},xt={class:"col-fname text-center"},Vt={class:"col-mi text-center"},Nt={class:"col-lname text-center"},Wt={class:"col-course text-center"},Rt={class:"col-year text-center"},It={class:"col-status text-center"},Mt={class:"col-actions text-center"},Tt={class:"action-buttons"},Pt={class:"text-center pt-2"},Ut={class:"details-header"},$t={class:"mt-4 fingerprint-section"},Xt={class:"regular-buttons"},qt={class:"details-header"},Bt={class:"regular-buttons"},Ht={class:"student-info mb-4"},Yt={key:0,class:"locked-notice mb-4"},Ot={class:"col-event"},jt={class:"col-semester"},Qt={class:"col-fine"},zt={class:"col-date"},Kt={class:"col-actions"},Gt={class:"total-fines"},Jt={class:"file-input-container"},Zt={class:"title"};function ea(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-icon"),c=(0,r.g2)("v-list-item"),u=(0,r.g2)("v-list"),m=(0,r.g2)("v-navigation-drawer"),g=(0,r.g2)("v-select"),p=(0,r.g2)("v-btn"),f=(0,r.g2)("v-card-title"),k=(0,r.g2)("v-col"),v=(0,r.g2)("v-text-field"),b=(0,r.g2)("v-row"),F=(0,r.g2)("v-chip"),_=(0,r.g2)("v-pagination"),S=(0,r.g2)("v-data-table"),y=(0,r.g2)("v-card-text"),L=(0,r.g2)("v-card"),w=(0,r.g2)("v-alert"),C=(0,r.g2)("v-progress-linear"),D=(0,r.g2)("v-form"),E=(0,r.g2)("v-edit-dialog"),A=(0,r.g2)("v-container"),x=(0,r.g2)("v-spacer"),V=(0,r.g2)("v-card-actions"),N=(0,r.g2)("v-dialog"),W=(0,r.g2)("v-file-input"),R=(0,r.g2)("v-main"),I=(0,r.g2)("v-layout"),M=(0,r.g2)("v-app");return(0,r.uX)(),(0,r.Wv)(M,null,{default:(0,r.k6)((()=>[(0,r.bF)(o),(0,r.bF)(I,null,{default:(0,r.k6)((()=>[(0,r.bF)(m,{permanent:"",width:"250",class:"sidebar overlapping-sidebar"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Ct,[(0,r.bF)(d,{size:"40",color:"white"},{default:(0,r.k6)((()=>t[25]||(t[25]=[(0,r.eW)("mdi-account-circle")]))),_:1,__:[25]})]),(0,r.bF)(u,{class:"sidebar-buttons"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sidebarButtons,(e=>((0,r.uX)(),(0,r.Wv)(c,{key:e.route,class:"sidebar-button-wrapper",onClick:t=>l.navigateTo(e.route)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Dt,[(0,r.bF)(d,{size:"30",class:"sidebar-icon"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.icon),1)])),_:2},1024),(0,r.Lk)("span",Et,(0,h.v_)(e.text),1)]),t[26]||(t[26]=(0,r.Lk)("div",{class:"border-animation"},null,-1))])),_:2,__:[26]},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,r.bF)(R,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(A,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.bF)(k,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>[t[31]||(t[31]=(0,r.Lk)("h1",{class:"table-title"},"STUDENT MANAGEMENT",-1)),(0,r.Lk)("div",At,[(0,r.bF)(g,{modelValue:n.selectedReader,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedReader=e),items:n.readers,"item-title":"name","item-value":"serialNumber",label:"Select Reader",density:"compact","hide-details":"",outlined:"",placeholder:"No Reader",class:"reader-select",style:{"min-width":"220px"}},null,8,["modelValue","items"]),(0,r.bF)(p,{color:"success",dark:"",onClick:l.openRegistrationDialog,class:"mr-2"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[27]||(t[27]=[(0,r.eW)("mdi-account-plus")]))),_:1,__:[27]}),t[28]||(t[28]=(0,r.eW)(" Register Student "))])),_:1,__:[28]},8,["onClick"]),(0,r.bF)(p,{color:"primary",dark:"",onClick:l.openUploadDialog},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[29]||(t[29]=[(0,r.eW)("mdi-upload")]))),_:1,__:[29]}),t[30]||(t[30]=(0,r.eW)(" Upload Students "))])),_:1,__:[30]},8,["onClick"])])])),_:1,__:[31]}),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.bF)(k,{cols:n.selectedStudent||n.isNewStudent?8:12},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"student-list-card"},{default:(0,r.k6)((()=>[(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{class:"mb-1",align:"center"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{cols:"12",class:"d-flex"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{modelValue:n.filter.course,"onUpdate:modelValue":t[1]||(t[1]=e=>n.filter.course=e),items:n.courses,label:"Select Course",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1}),(0,r.bF)(k,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{modelValue:n.filter.yearLevel,"onUpdate:modelValue":t[2]||(t[2]=e=>n.filter.yearLevel=e),items:n.yearLevels,label:"Select Year Level",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1})])),_:1}),(0,r.bF)(k,{cols:"12",class:"mt-n4"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:n.search,"onUpdate:modelValue":t[3]||(t[3]=e=>n.search=e),"append-icon":"mdi-magnify",label:"Search students...","single-line":"","hide-details":"",outlined:"",dark:"",class:"search-field"},null,8,["modelValue"])])),_:1})])),_:1}),t[34]||(t[34]=(0,r.Lk)("div",{class:"student-list-header"},[(0,r.Lk)("span",{class:"col-fname"},"First Name"),(0,r.Lk)("span",{class:"col-mi"},"M.I."),(0,r.Lk)("span",{class:"col-lname"},"Last Name"),(0,r.Lk)("span",{class:"col-course"},"Course"),(0,r.Lk)("span",{class:"col-year"},"Year Level"),(0,r.Lk)("span",{class:"col-status"},"Status"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(S,{headers:n.studentFinesHeaders,items:l.filteredStudentFines,search:n.search,"items-per-page":10,class:"elevation-1 student-fines-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",xt,(0,h.v_)(e.firstName),1),(0,r.Lk)("td",Vt,(0,h.v_)(e.middleInitial),1),(0,r.Lk)("td",Nt,(0,h.v_)(e.lastName),1),(0,r.Lk)("td",Wt,(0,h.v_)(e.department),1),(0,r.Lk)("td",Rt,(0,h.v_)(e.yearLevel),1),(0,r.Lk)("td",It,[(0,r.bF)(F,{small:"",color:l.getStatusColor(e.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.status),1)])),_:2},1032,["color"])]),(0,r.Lk)("td",Mt,[(0,r.Lk)("div",Tt,[(0,r.bF)(p,{small:"",color:"primary",onClick:t=>{l.viewFine(e)},class:"action-btn",disabled:l.isStudentLocked(e)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent&&n.selectedStudent.id===e.id?"Hide":"View"),1)])),_:2},1032,["onClick","disabled"]),(0,r.bF)(p,{small:"",color:"warning",onClick:t=>{l.editStudent(e)},class:"action-btn",disabled:l.isStudentLocked(e)},{default:(0,r.k6)((()=>t[32]||(t[32]=[(0,r.eW)(" Update ")]))),_:2,__:[32]},1032,["onClick","disabled"]),(0,r.bF)(p,{small:"",color:"teal",dark:"",onClick:t=>l.openFingerprintDialog(e),class:"action-btn",disabled:l.isStudentLocked(e)},{default:(0,r.k6)((()=>t[33]||(t[33]=[(0,r.eW)(" Fingerprint ")]))),_:2,__:[33]},1032,["onClick","disabled"])])])])])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",Pt,[(0,r.bF)(_,{modelValue:n.page,"onUpdate:modelValue":t[4]||(t[4]=e=>n.page=e),length:n.pageCount,"total-visible":5,color:"primary",dark:""},null,8,["modelValue","length"])])])),_:1},8,["headers","items","search"])])),_:1,__:[34]})])),_:1})])),_:1},8,["cols"]),n.isNewStudent?((0,r.uX)(),(0,r.Wv)(k,{key:0,cols:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"right-side-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Ut,[(0,r.bF)(f,{class:"details-title"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.isNewStudent?"New Student Registration":n.selectedStudent.firstName+" "+n.selectedStudent.lastName),1)])),_:1})]),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(D,{onSubmit:(0,i.D$)(l.handleRegistration,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:n.RegForm.firstName,"onUpdate:modelValue":t[5]||(t[5]=e=>n.RegForm.firstName=e),label:"First Name",outlined:"",dense:"",class:"mb-2",required:""},null,8,["modelValue"]),(0,r.bF)(v,{modelValue:n.RegForm.middleInitial,"onUpdate:modelValue":t[6]||(t[6]=e=>n.RegForm.middleInitial=e),label:"Middle Initial",outlined:"",dense:"",class:"mb-2",maxlength:"1"},null,8,["modelValue"]),(0,r.bF)(v,{modelValue:n.RegForm.lastName,"onUpdate:modelValue":t[7]||(t[7]=e=>n.RegForm.lastName=e),label:"Last Name",outlined:"",dense:"",class:"mb-2",required:""},null,8,["modelValue"]),(0,r.bF)(g,{modelValue:n.RegForm.department,"onUpdate:modelValue":t[8]||(t[8]=e=>n.RegForm.department=e),items:n.courses.filter((e=>"All"!==e)),label:"Department",outlined:"",dense:"",class:"mb-2",required:""},null,8,["modelValue","items"]),(0,r.bF)(g,{modelValue:n.RegForm.yearLevel,"onUpdate:modelValue":t[9]||(t[9]=e=>n.RegForm.yearLevel=e),items:n.yearLevels.filter((e=>"All"!==e)),label:"Year Level",outlined:"",dense:"",class:"mb-2",required:""},null,8,["modelValue","items"]),(0,r.Lk)("div",$t,[e.statusMessage?((0,r.uX)(),(0,r.Wv)(w,{key:0,color:e.fingerprintCaptured?"success":"info",dense:"",outlined:"",class:"mb-2"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.statusMessage),1)])),_:1},8,["color"])):(0,r.Q3)("",!0),(0,r.bF)(p,{color:"primary",disabled:n.enrollmentStarted,onClick:l.startFingerprintEnrollment,class:"mb-2",block:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[35]||(t[35]=[(0,r.eW)("mdi-fingerprint")]))),_:1,__:[35]}),t[36]||(t[36]=(0,r.eW)(" Start Fingerprint Enrollment "))])),_:1,__:[36]},8,["disabled","onClick"]),n.enrollmentStarted||e.fingerprintCaptured?((0,r.uX)(),(0,r.Wv)(C,{key:1,value:n.fingerprintProgress,height:"20",color:"teal",class:"mb-2"},{default:(0,r.k6)((()=>[(0,r.Lk)("strong",null,(0,h.v_)(n.fingerprintProgress)+"%",1)])),_:1},8,["value"])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Xt,[(0,r.bF)(p,{type:"submit",color:"success"},{default:(0,r.k6)((()=>t[37]||(t[37]=[(0,r.eW)("Complete Registration")]))),_:1,__:[37]}),(0,r.bF)(p,{onClick:l.cancelRegistration,class:"ml-2"},{default:(0,r.k6)((()=>t[38]||(t[38]=[(0,r.eW)("Cancel")]))),_:1,__:[38]},8,["onClick"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})):(0,r.Q3)("",!0),n.selectedStudent?((0,r.uX)(),(0,r.Wv)(k,{key:1,cols:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"right-side-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",qt,[(0,r.bF)(f,{class:"details-title"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent.firstName)+" "+(0,h.v_)(n.selectedStudent.lastName)+"'s Details ",1)])),_:1})]),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[n.isEditing&&!l.isStudentLocked(n.selectedStudent)?((0,r.uX)(),(0,r.Wv)(D,{key:0,onSubmit:(0,i.D$)(l.checkStatusBeforeSave,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:n.editForm.firstName,"onUpdate:modelValue":t[10]||(t[10]=e=>n.editForm.firstName=e),label:"First Name",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue"]),(0,r.bF)(v,{modelValue:n.editForm.lastName,"onUpdate:modelValue":t[11]||(t[11]=e=>n.editForm.lastName=e),label:"Last Name",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue"]),(0,r.bF)(v,{modelValue:n.editForm.middleInitial,"onUpdate:modelValue":t[12]||(t[12]=e=>n.editForm.middleInitial=e),label:"Middle Initial",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue"]),(0,r.bF)(g,{modelValue:n.editForm.department,"onUpdate:modelValue":t[13]||(t[13]=e=>n.editForm.department=e),items:n.courses.filter((e=>"All"!==e)),label:"Course",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.bF)(g,{modelValue:n.editForm.yearLevel,"onUpdate:modelValue":t[14]||(t[14]=e=>n.editForm.yearLevel=e),items:n.yearLevels.filter((e=>"All"!==e)),label:"Year Level",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.bF)(g,{modelValue:n.editForm.status,"onUpdate:modelValue":t[15]||(t[15]=e=>n.editForm.status=e),items:n.statusOptions,label:"Status",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.Lk)("div",Bt,[(0,r.bF)(p,{type:"submit",color:"success"},{default:(0,r.k6)((()=>t[39]||(t[39]=[(0,r.eW)("Save Changes")]))),_:1,__:[39]}),(0,r.bF)(p,{onClick:l.cancelEdit,class:"ml-2"},{default:(0,r.k6)((()=>t[40]||(t[40]=[(0,r.eW)("Cancel")]))),_:1,__:[40]},8,["onClick"])])])),_:1},8,["onSubmit"])):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("div",Ht,[(0,r.Lk)("p",null,[t[41]||(t[41]=(0,r.Lk)("strong",null,"Course:",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedStudent.course),1)]),(0,r.Lk)("p",null,[t[42]||(t[42]=(0,r.Lk)("strong",null,"Year Level:",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedStudent.year),1)]),(0,r.Lk)("p",null,[t[43]||(t[43]=(0,r.Lk)("strong",null,"Status:",-1)),(0,r.bF)(F,{small:"",color:l.getStatusColor(n.selectedStudent.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent.status),1)])),_:1},8,["color"])])]),l.isStudentLocked(n.selectedStudent)?((0,r.uX)(),(0,r.CE)("div",Yt,[(0,r.bF)(w,{type:"info",dense:""},{default:(0,r.k6)((()=>t[44]||(t[44]=[(0,r.eW)(" This student record is locked and cannot be modified. ")]))),_:1,__:[44]})])):(0,r.Q3)("",!0),t[47]||(t[47]=(0,r.Lk)("div",{class:"fine-details-header"},[(0,r.Lk)("span",{class:"col-event"},"Event"),(0,r.Lk)("span",{class:"col-semester"},"Semester"),(0,r.Lk)("span",{class:"col-fine"},"Fine Amount"),(0,r.Lk)("span",{class:"col-date"},"Date"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(S,{headers:n.fineDetailsHeaders,items:n.fineDetails,"hide-default-footer":!0,class:"elevation-1 fine-details-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",Ot,[(0,r.bF)(E,{modelValue:e.event,"onUpdate:modelValue":t=>e.event=t,onSave:l.updateFineDetail,large:"",disabled:l.isStudentLocked(n.selectedStudent)},{input:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:e.event,"onUpdate:modelValue":t=>e.event=t,label:"Edit","single-line":""},null,8,["modelValue","onUpdate:modelValue"])])),default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.event)+" ",1)])),_:2},1032,["modelValue","onUpdate:modelValue","onSave","disabled"])]),(0,r.Lk)("td",jt,(0,h.v_)(e.semester),1),(0,r.Lk)("td",Qt,[(0,r.bF)(E,{modelValue:e.fine,"onUpdate:modelValue":t=>e.fine=t,onSave:l.updateFineDetail,large:"",disabled:l.isStudentLocked(n.selectedStudent)},{input:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:e.fine,"onUpdate:modelValue":t=>e.fine=t,label:"Edit","single-line":"",type:"number",prefix:"₱"},null,8,["modelValue","onUpdate:modelValue"])])),default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.fine)+" ",1)])),_:2},1032,["modelValue","onUpdate:modelValue","onSave","disabled"])]),(0,r.Lk)("td",zt,(0,h.v_)(l.formatDate(e.date)),1),(0,r.Lk)("td",Kt,[(0,r.bF)(p,{"x-small":"",color:"error",onClick:t=>l.removeFine(e),disabled:l.isStudentLocked(n.selectedStudent)},{default:(0,r.k6)((()=>t[45]||(t[45]=[(0,r.eW)(" Remove ")]))),_:2,__:[45]},1032,["onClick","disabled"])])])])),_:1},8,["headers","items"]),(0,r.Lk)("div",Gt,[(0,r.Lk)("strong",null,"Total Fines: "+(0,h.v_)(l.calculateTotalFines()),1)]),(0,r.bF)(p,{color:"success",class:"paid-btn mt-2",onClick:l.clearFines,disabled:0===n.fineDetails.length||l.isStudentLocked(n.selectedStudent)},{default:(0,r.k6)((()=>t[46]||(t[46]=[(0,r.eW)(" Mark All as Paid ")]))),_:1,__:[46]},8,["onClick","disabled"])],64))])),_:1})])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(N,{modelValue:n.confirmDialog,"onUpdate:modelValue":t[17]||(t[17]=e=>n.confirmDialog=e),"max-width":"400"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"confirm-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"headline"},{default:(0,r.k6)((()=>t[48]||(t[48]=[(0,r.eW)("Warning!")]))),_:1,__:[48]}),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[t[49]||(t[49]=(0,r.eW)(" Changing status to ")),(0,r.Lk)("strong",null,(0,h.v_)(n.editForm.status),1),t[50]||(t[50]=(0,r.eW)(" will permanently lock this student record. Are you sure you want to proceed? "))])),_:1,__:[49,50]}),(0,r.bF)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(x),(0,r.bF)(p,{color:"grey",onClick:t[16]||(t[16]=e=>n.confirmDialog=!1)},{default:(0,r.k6)((()=>t[51]||(t[51]=[(0,r.eW)("Cancel")]))),_:1,__:[51]}),(0,r.bF)(p,{color:"red darken-1",onClick:l.confirmAndSave},{default:(0,r.k6)((()=>t[52]||(t[52]=[(0,r.eW)("Yes, Save and Lock")]))),_:1,__:[52]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(N,{modelValue:n.uploadDialog,"onUpdate:modelValue":t[20]||(t[20]=e=>n.uploadDialog=e),"max-width":"600"},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"upload-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"headline"},{default:(0,r.k6)((()=>t[53]||(t[53]=[(0,r.eW)("Upload Students")]))),_:1,__:[53]}),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",Jt,[(0,r.bF)(W,{modelValue:n.uploadFile,"onUpdate:modelValue":t[18]||(t[18]=e=>n.uploadFile=e),label:"SELECT FILE",accept:".xlsx",outlined:"","prepend-icon":"mdi-paperclip",onChange:e.previewUpload,class:"centered-file-input"},null,8,["modelValue","onChange"])]),(0,r.bF)(S,{headers:n.uploadHeaders,items:e.uploadPreview,class:"elevation-1 upload-table",dark:""},null,8,["headers","items"])])),_:1}),(0,r.bF)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(x),(0,r.bF)(p,{color:"error",onClick:l.clearStudentTable},{default:(0,r.k6)((()=>t[54]||(t[54]=[(0,r.eW)("Clear Table")]))),_:1,__:[54]},8,["onClick"]),(0,r.bF)(p,{color:"primary",onClick:l.uploadStudents},{default:(0,r.k6)((()=>t[55]||(t[55]=[(0,r.eW)("Upload")]))),_:1,__:[55]},8,["onClick"]),(0,r.bF)(p,{text:"",onClick:t[19]||(t[19]=e=>n.uploadDialog=!1)},{default:(0,r.k6)((()=>t[56]||(t[56]=[(0,r.eW)("Cancel")]))),_:1,__:[56]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(N,{modelValue:n.fingerprintDialog,"onUpdate:modelValue":t[22]||(t[22]=e=>n.fingerprintDialog=e),"max-width":"500",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(L,{class:"fingerprint-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"headline text-center"},{default:(0,r.k6)((()=>[(0,r.eW)(" Fingerprint Enrollment - "+(0,h.v_)(n.fingerprintStudent.fname)+" "+(0,h.v_)(n.fingerprintStudent.lname),1)])),_:1}),(0,r.bF)(y,{class:"text-center"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{"x-large":"",class:"mb-4 fingerprint-icon"},{default:(0,r.k6)((()=>t[57]||(t[57]=[(0,r.eW)("mdi-fingerprint")]))),_:1,__:[57]}),(0,r.Lk)("p",Zt,(0,h.v_)(n.fingerprintMessage),1),n.fingerprintLoading?((0,r.uX)(),(0,r.Wv)(C,{key:1,modelValue:n.fingerprintProgress,"onUpdate:modelValue":t[21]||(t[21]=e=>n.fingerprintProgress=e),height:"25",color:"teal",class:"mt-4"},{default:(0,r.k6)((()=>[(0,r.Lk)("strong",null,(0,h.v_)(n.fingerprintProgress)+"%",1)])),_:1},8,["modelValue"])):((0,r.uX)(),(0,r.Wv)(p,{key:0,color:"primary",class:"mt-4",onClick:l.startFingerprintProcess,disabled:l.isStudentLocked(n.fingerprintStudent)},{default:(0,r.k6)((()=>t[58]||(t[58]=[(0,r.eW)(" Start Enrollment ")]))),_:1,__:[58]},8,["onClick","disabled"]))])),_:1}),(0,r.bF)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(x),(0,r.bF)(p,{color:"error",onClick:l.cancelFingerprintEnrollment,disabled:n.fingerprintLoading},{default:(0,r.k6)((()=>t[59]||(t[59]=[(0,r.eW)(" Cancel ")]))),_:1,__:[59]},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(N,{modelValue:n.confirmDialog,"onUpdate:modelValue":t[24]||(t[24]=e=>n.confirmDialog=e),"max-width":"400"},{default:(0,r.k6)((()=>[(0,r.bF)(L,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"headline"},{default:(0,r.k6)((()=>t[60]||(t[60]=[(0,r.eW)("Confirm Update")]))),_:1,__:[60]}),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.confirmDialogMessage),1)])),_:1}),(0,r.bF)(V,null,{default:(0,r.k6)((()=>[(0,r.bF)(x),(0,r.bF)(p,{text:"",onClick:t[23]||(t[23]=e=>n.confirmDialog=!1)},{default:(0,r.k6)((()=>t[61]||(t[61]=[(0,r.eW)("Cancel")]))),_:1,__:[61]}),(0,r.bF)(p,{color:"primary",text:"",onClick:l.executeConfirmCallback},{default:(0,r.k6)((()=>t[62]||(t[62]=[(0,r.eW)("Yes, Save")]))),_:1,__:[62]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],4)])),_:1})])),_:1})])),_:1})}var ta={components:{PageHeader:Ve},data(){return{sidebarButtons:[{text:"Dashboard",route:"Home",icon:"mdi-view-dashboard"},{text:"Manage Student",route:"manage-students",icon:"mdi-account-group"},{text:"Manage Event",route:"manage-events",icon:"mdi-calendar-multiple"},{text:"History Log",route:"history-log",icon:"mdi-history"}],availableReaders:[],reader:null,readers:[],selectedReader:null,enrollmentStarted:!1,enrollScanStep:0,indexFingerSamples:[],middleFingerSamples:[],currentEnrollFinger:"index",backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",page:1,pageCount:3,search:"",filter:{course:null,yearLevel:null},isNewStudent:!1,selectedStudent:null,isEditing:!1,students:[],editForm:{firstName:"",lastName:"",middleInitial:"",course:"",yearLevel:""},RegForm:{firstName:"",lastName:"",middleInitial:"",course:"",yearLevel:""},uploadDialog:!1,uploadFile:null,uploadHeaders:[{text:"ID",value:"id"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Course",value:"department"},{text:"Year Level",value:"yearLevel"}],confirmDialog:!1,confirmDialogMessage:"",confirmDialogCallback:null,responseDialog:!1,responseType:"",responseTitle:"",responseMessage:"",responseIcon:"",fingerprintDialog:!1,fingerprintStudent:{},fingerprintLoading:!1,fingerprintMessage:"Ready to enroll fingerprint",fingerprintProgress:0,statusOptions:["Enrolled","Graduated","Shifted","Dropped"],fineDetails:[],courses:["All","BSIT","BSIS","BSCS"],yearLevels:["All","1st Year","2nd Year","3rd Year","4th Year"],semesters:["1st Semester","2nd Semester"],studentFinesHeaders:[{text:"First Name",value:"firstName",align:"center",width:"15%"},{text:"M.I.",value:"middleInitial",align:"center",width:"5%"},{text:"Last Name",value:"lastName",align:"center",width:"15%"},{text:"Course",value:"department",align:"center",width:"15%"},{text:"Year Level",value:"yearLevel",align:"center",width:"15%"},{text:"Status",value:"status",align:"center",width:"15%"},{text:"Actions",value:"actions",align:"center",width:"20%",sortable:!1}],fineDetailsHeaders:[{text:"Event Name",value:"event",width:"30%"},{text:"Semester",value:"semester",width:"20%"},{text:"Fine Amount",value:"fine",width:"15%"},{text:"Date",value:"date",width:"20%"},{text:"Actions",value:"actions",width:"15%"}]}},async mounted(){await this.fetchStudents();try{if(!window.Fingerprint?.WebApi)throw new Error("Fingerprint SDK not available");console.log("✅ SDK available"),this.reader=new window.Fingerprint.WebApi,this.reader.onDeviceConnected=()=>this.statusMessage="Device connected. Ready to scan.",this.reader.onDeviceDisconnected=()=>this.statusMessage="Device disconnected.",this.reader.onCommunicationFailed=()=>this.statusMessage="Communication with reader failed.",this.reader.onSamplesAcquired=this.handleEnrollmentSample;const e=await this.reader.enumerateDevices();this.readers=e,this.selectedReader=e[0]?.serialNumber||null,this.statusMessage=e.length?"Select a reader":"No fingerprint readers found",console.log("📡 Available readers:",e)}catch(e){console.error("❌ SDK init error:",e),this.statusMessage=`SDK error: ${e.message}`,this.showLiteClientLink=!0}},computed:{filteredStudentFines(){return this.students.filter((e=>("All"===this.filter.department||!this.filter.department||e.department===this.filter.department)&&("All"===this.filter.yearLevel||!this.filter.yearLevel||e.year===this.filter.yearLevel)&&(""===this.search||e.fname.toLowerCase().includes(this.search.toLowerCase())||e.lname.toLowerCase().includes(this.search.toLowerCase())||e.course.toLowerCase().includes(this.search.toLowerCase())||e.year.toLowerCase().includes(this.search.toLowerCase()))))},backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}}},methods:{async clearStudentTable(){if(confirm("Are you sure you want to delete all students? This action is irreversible."))try{await Ee.clearStudents(),this.uploadPreview=[],alert("All student records have been cleared.")}catch(e){console.error("[CLEAR STUDENTS ERROR]",e),alert("Failed to clear student table.")}},navigateTo(e){this.$router.push({name:e})},getStatusColor(e){const t={Enrolled:"green",Shifted:"blue",Graduated:"purple",Dropped:"red"};return t[e]||"gray"},isStudentLocked(e){return e.isLocked||["Graduated","Shifted","Dropped"].includes(e.status)},editStudent(e){this.isStudentLocked(e)||(this.isNewStudent=!1,this.selectedStudent=e,this.isEditing=!0,this.editForm={...e})},confirmAndSave(){this.confirmDialog=!1,this.saveStudent(!0)},executeConfirmCallback(){this.confirmDialogCallback&&(this.confirmDialog=!1,this.confirmDialogCallback())},async saveStudent(e=!1){try{const t=this.selectedStudent.id,a={firstName:this.editForm.firstName,lastName:this.editForm.lastName,middleInitial:this.editForm.middleInitial,department:this.editForm.department,yearLevel:this.editForm.yearLevel,status:this.editForm.status},s=await Ee.updateStudents(t,a);this.selectedStudent=s.data.student||s.data,this.isEditing=!1,e&&(this.selectedStudent.isLocked=!0),this.showResponse("success","Student Updated",`${this.selectedStudent.firstName} ${this.selectedStudent.lastName}'s record has been updated.`),await this.fetchStudents(),this.resetForm()}catch(t){console.error("Update failed:",t),this.showResponse("error","Update Failed",t.response?.data?.message||"An error occurred during the update.")}},hasChanges(){const e=["firstName","lastName","middleInitial","department","yearLevel","status"];return e.some((e=>this.editForm[e]!==this.selectedStudent[e]))},cancelEdit(){this.isEditing=!1,this.editForm={}},showResponse(e,t,a){this.responseType=e,this.responseTitle=t,this.responseMessage=a,this.responseIcon="success"===e?"mdi-check-circle":"mdi-alert-circle",this.responseDialog=!0},checkStatusBeforeSave(){this.hasChanges()?(["Graduated","Shifted","Dropped"].includes(this.editForm.status)?(this.confirmDialogMessage=`Changing the status to "${this.editForm.status}" will lock this student. Proceed?`,this.confirmDialogCallback=()=>this.saveStudent(!0)):(this.confirmDialogMessage="Are you sure you want to save these changes?",this.confirmDialogCallback=()=>this.saveStudent()),this.confirmDialog=!0):this.showResponse("info","No Changes Detected","You haven’t made any changes to the student record.")},openUploadDialog(){this.uploadDialog=!0,this.uploadFile=null,this.uploadPreview=[]},async uploadStudents(){try{if(!this.uploadFile)return void this.showResponse("error","Upload Error","Please select a file first");const e=await Ee.uploadStudents(this.uploadFile);if(e.data.error)return void this.showResponse("error","Upload Failed",e.data.error);this.showResponse("success","Success",`${e.data.count} students uploaded successfully`),await this.fetchStudents(),this.uploadDialog=!1,this.uploadFile=null}catch(e){const t=e.response?.data?.message||"File upload failed";this.showResponse("error","Upload Error",t)}},async fetchStudents(){try{const e=await Ee.getStudents();this.students=e.data}catch(e){console.error("Error fetching students:",e)}},openRegistrationDialog(){this.selectedStudent=null,this.isEditing=!1,this.isNewStudent=!0,this.RegForm={firstName:"",middleInitial:"",lastName:"",course:"",yearLevel:""},this.fingerprintCaptured=!1,this.statusMessage="",this.fingerprintProgress=0,this.enrollmentStarted=!1},cancelRegistration(){this.selectedStudent=null,this.isNewStudent=!1,this.RegForm={firstName:"",middleInitial:"",lastName:"",department:"",yearLevel:""},this.fingerprintCaptured=!1,this.statusMessage="",this.fingerprintProgress=0,this.enrollmentStarted=!1},async handleRegistration(){if(!this.fingerprintCaptured)return void this.showResponse("error","Missing Fingerprint","Please complete fingerprint enrollment first.");const e={...this.RegForm,middleInitial:this.RegForm.middleInitial?.trim().charAt(0).toUpperCase()||"",enrolled_index_finger_data:this.indexFingerSamples,enrolled_middle_finger_data:this.middleFingerSamples};if(console.log(e),e.firstName&&e.lastName&&e.department&&e.yearLevel)try{const t=await Ee.createStudent(e);if(t.data.error)return void this.showResponse("error","Registration Failed",t.data.error);this.showResponse("success","Success","Student registered successfully"),await this.fetchStudents(),this.resetForm()}catch(t){const e=t.response?.data?.message||"Registration failed due to server error";this.showResponse("error","Error",e)}else this.showResponse("error","Validation Error","Please fill all required fields")},validateRegistrationForm(){return this.RegForm.firstName.trim()&&this.RegForm.lastName.trim()&&this.RegForm.course&&this.RegForm.yearLevel},resetForm(){this.selectedStudent=null,this.isNewStudent=!1,this.editForm={firstName:"",lastName:"",middleInitial:"",course:"",yearLevel:""}},async startFingerprintEnrollment(){if(this.readers&&this.selectedReader){this.enrollScanStep=0,this.indexFingerSamples=[],this.middleFingerSamples=[],this.currentEnrollFinger="index",this.enrollmentStarted=!0,this.statusMessage="Starting enrollment... Scan 1/4 for index finger",this.fingerprintProgress=0;try{await this.reader.startAcquisition(window.Fingerprint.SampleFormat.Intermediate,this.selectedReader)}catch(e){this.statusMessage=`Failed to start acquisition: ${e.message}`}}else this.statusMessage="No reader selected"},async handleEnrollmentSample(e){const t=JSON.parse(e.samples)[0].Data;"index"===this.currentEnrollFinger?this.indexFingerSamples.push(t):this.middleFingerSamples.push(t),this.enrollScanStep++,this.fingerprintProgress=Math.floor(this.enrollScanStep/4*100),this.statusMessage=`Scan ${this.enrollScanStep+1}/4 for ${this.currentEnrollFinger} finger`,4===this.enrollScanStep&&("index"===this.currentEnrollFinger?(this.currentEnrollFinger="middle",this.enrollScanStep=0,this.statusMessage="Now scan 1/4 for middle finger"):(await this.reader.stopAcquisition(),this.enrollmentStarted=!1,this.statusMessage="Fingerprint enrollment completed",this.fingerprintCaptured=!0))},openFingerprintDialog(e){this.fingerprintStudent={...e},this.fingerprintDialog=!0,this.fingerprintLoading=!1,this.fingerprintMessage="Ready to enroll fingerprint",this.fingerprintProgress=0},async startFingerprintProcess(){if(this.readers&&this.selectedReader)if(this.fingerprintStudent?.id){this.fingerprintLoading=!0,this.enrollScanStep=0,this.indexFingerSamples=[],this.middleFingerSamples=[],this.currentEnrollFinger="index",this.fingerprintMessage="Starting fingerprint enrollment...";try{const e=this.reader,t=window.Fingerprint.SampleFormat.Intermediate;await e.startAcquisition(t,this.selectedReader),e.onSamplesAcquired=async t=>{const a=JSON.parse(t.samples)[0].Data;if("index"===this.currentEnrollFinger?this.indexFingerSamples.push(a):this.middleFingerSamples.push(a),this.enrollScanStep++,this.fingerprintMessage=`Scan ${this.enrollScanStep}/4 for ${this.currentEnrollFinger} finger`,4===this.enrollScanStep)if("index"===this.currentEnrollFinger)this.currentEnrollFinger="middle",this.enrollScanStep=0,this.fingerprintMessage="Now scan 1/4 for middle finger";else{await e.stopAcquisition(),this.fingerprintMessage="Sending to backend...";const t={studentId:this.fingerprintStudent.id,enrolled_index_finger_data:this.indexFingerSamples,enrolled_middle_finger_data:this.middleFingerSamples};try{console.log("Enroll Payload:",t);const e=await Ee.EnrollExist(t);if(e.data?.error){const t="string"===typeof e.data.error?e.data.error:"Unknown error during enrollment";return void this.showResponse("error","Registration Failed",t)}this.showResponse("success","Enrollment Complete","Fingerprint enrolled for student successfully"),await this.fetchStudents(),this.completeFingerprintEnrollment(),this.resetForm()}catch(s){const e=s.response?.data?.message||"Registration failed due to server error";this.showResponse("error","Error",e)}}}}catch(e){this.showResponse("error","Acquisition Failed",e.message||"Error during fingerprint acquisition"),this.resetFingerprintState()}}else this.showResponse("error","Missing Student","Please select a valid student.");else this.showResponse("Try again","No reader selected","Please Select a reader")},completeFingerprintEnrollment(){this.fingerprintMessage="Fingerprint enrolled successfully!",setTimeout((()=>{this.fingerprintDialog=!1,this.$toast&&this.$toast.success("Fingerprint enrollment completed")}),1500)},resetFingerprintState(){this.fingerprintLoading=!1,this.fingerprintProgress=0,this.fingerprintMessage="Ready to enroll fingerprint"},cancelFingerprintEnrollment(){this.fingerprintLoading&&this.showResponse("warning","Warning","Enrollment process was interrupted"),this.resetFingerprintState(),this.fingerprintDialog=!1},clearFines(){this.fineDetails=[],this.$toast&&this.$toast.success(`${this.selectedStudent.fname} ${this.selectedStudent.lname}'s fines have been marked as paid!`)},calculateTotalFines(){const e=this.fineDetails.reduce(((e,t)=>e+parseFloat(t.fine.replace("₱",""))),0);return`₱${e.toFixed(2)}`},viewFine(e){this.selectedStudent&&this.selectedStudent.id===e.id?(this.selectedStudent=null,this.isEditing=!1,this.isNewStudent=!1):(this.selectedStudent=e,this.isEditing=!1,this.isNewStudent=!1,this.fineDetails=this.generateMockFineDetails())},updateFineDetail(){this.$toast&&this.$toast.success("Fine updated successfully")},removeFine(e){try{this.fineDetails=this.fineDetails.filter((t=>t!==e)),this.$toast&&this.$toast.success("Fine removed successfully")}catch(t){console.error("Error removing fine:",t),this.$toast&&this.$toast.error("Failed to remove fine")}},generateMockFineDetails(){const e=["Orientation","Seminar","Workshop","Meeting"],t=[];for(let a=0;a<3;a++){const a=e[Math.floor(Math.random()*e.length)],s=new Date;s.setDate(s.getDate()-Math.floor(30*Math.random()));const n=this.semesters[Math.floor(Math.random()*this.semesters.length)];t.push({event:a,fine:"₱"+(500*Math.random()).toFixed(2),date:s.toISOString(),semester:n})}return t},formatDate(e){return e?(0,lt.GP)(new Date(e),"MMM dd, yyyy"):"N/A"}}};const aa=(0,c.A)(ta,[["render",ea],["__scopeId","data-v-4092cb54"]]);var sa=aa;const na={class:"about"},la={class:"content-box"},ia={class:"feature-container"};function ra(e,t,a,s,n,l){const i=(0,r.g2)("PageHeader"),o=(0,r.g2)("v-icon");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i),(0,r.Lk)("div",{style:(0,h.Tr)(l.mainContentStyle)},[(0,r.Lk)("div",na,[(0,r.Lk)("div",la,[t[0]||(t[0]=(0,r.Lk)("h1",{class:"page-header"},"Bytes Touch Log",-1)),t[1]||(t[1]=(0,r.Lk)("p",{class:"description"}," This system is a web-based fingerprint biometric application designed as an attendance recorder system for events at the Bytes Office. ",-1)),(0,r.Lk)("div",ia,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.features,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"feature-card",key:t},[(0,r.bF)(o,{class:"feature-icon"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.icon),1)])),_:2},1024),(0,r.Lk)("h3",null,(0,h.v_)(e.title),1),(0,r.Lk)("p",null,(0,h.v_)(e.text),1)])))),128))]),t[2]||(t[2]=(0,r.Lk)("div",{class:"action-buttons"},[(0,r.Lk)("a",{href:"https://github.com/Wet-Codes/BytesTouchLog",class:"btn"},[(0,r.eW)(" Learn More "),(0,r.Lk)("span"),(0,r.Lk)("span"),(0,r.Lk)("span"),(0,r.Lk)("span")]),(0,r.Lk)("a",{href:"/dev",class:"btn"},[(0,r.eW)(" Get Started "),(0,r.Lk)("span"),(0,r.Lk)("span"),(0,r.Lk)("span"),(0,r.Lk)("span")])],-1))])])],4)])}var oa={components:{PageHeader:E},data(){return{backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",features:[{icon:"mdi-fingerprint",title:"Biometric Auth",text:"Secure fingerprint-based authentication system"},{icon:"mdi-chart-areaspline",title:"Real-time Tracking",text:"Instant attendance monitoring and reporting"},{icon:"mdi-calendar-check",title:"Event Management",text:"Seamless event scheduling integration"}]}},computed:{mainContentStyle(){return{background:`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"}}}};const da=(0,c.A)(oa,[["render",ra],["__scopeId","data-v-82315186"]]);var ca=da;function ua(e,t,a,s,n,l){const i=(0,r.g2)("v-card-title"),o=(0,r.g2)("v-table-cell"),d=(0,r.g2)("v-table-row"),c=(0,r.g2)("v-table-body"),u=(0,r.g2)("v-data-table"),m=(0,r.g2)("v-card-text"),g=(0,r.g2)("v-card"),p=(0,r.g2)("v-col"),f=(0,r.g2)("v-row"),k=(0,r.g2)("v-container");return(0,r.uX)(),(0,r.Wv)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(p,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{class:"form idle",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("h2",{class:"text-h5"},"Attendance History Log",-1)]))),_:1,__:[0]}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{headers:n.headers,items:n.attendanceRecords,"item-key":"id",class:"elevation-1"},{body:(0,r.k6)((e=>[(0,r.bF)(c,{items:e.items,headers:n.headers},{item:(0,r.k6)((({item:e})=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.date),1)])),_:2},1024),(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.status),1)])),_:2},1024),(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.notes),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["items","headers"])])),_:1},8,["headers","items"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var ma={data(){return{headers:[{text:"Date",value:"date"},{text:"Status",value:"status"},{text:"Notes",value:"notes"}],attendanceRecords:[{id:1,date:"2024-07-01",status:"Present",notes:"On time"},{id:2,date:"2024-07-02",status:"Absent",notes:"Sick leave"}]}}};const ga=(0,c.A)(ma,[["render",ua],["__scopeId","data-v-3509f0a8"]]);var ha=ga;const pa={class:"sidebar-header"},fa={class:"sidebar-button-content"},ka={class:"sidebar-text"},va={class:"tabs-container"},ba={key:0,class:"table-container"},Fa={class:"table-cell text-center"},_a={class:"table-cell text-center"},Sa={class:"table-cell text-center"},ya={class:"table-cell text-center"},La={key:0},wa={key:1},Ca={key:2},Da={class:"text-center pt-2"},Ea={key:1,class:"table-container"},Aa={class:"table-cell text-center"},xa={class:"table-cell text-center"},Va={class:"table-cell text-center"},Na={class:"table-cell text-center"},Wa={class:"table-cell text-center"},Ra={class:"table-cell text-center"},Ia={class:"text-center pt-2"},Ma={key:2,class:"table-container"},Ta={class:"table-cell text-center"},Pa={class:"table-cell text-center"},Ua={class:"table-cell text-center"},$a={class:"table-cell text-center"},Xa={class:"text-center pt-2"},qa={class:"receipt-content"},Ba={class:"receipt-details"},Ha={class:"receipt-row"},Ya={class:"receipt-value white--text"},Oa={class:"receipt-row"},ja={class:"receipt-value white--text"},Qa={class:"receipt-row"},za={class:"receipt-value white--text"},Ka={class:"receipt-row"},Ga={class:"receipt-value white--text"},Ja={class:"receipt-row"},Za={class:"receipt-value white--text"},es={class:"receipt-row"},ts={class:"receipt-value white--text"},as={class:"receipt-footer"},ss={class:"receipt-total white--text"},ns={class:"total-amount"},ls={class:"receipt-actions"},is={class:"changes-content"},rs={class:"changes-info"},os={class:"info-row"},ds={class:"info-value"},cs={class:"info-row"},us={class:"info-value"},ms={class:"info-row"},gs={class:"info-value"},hs={class:"info-row"},ps={class:"info-value"},fs={class:"changes-table-container"},ks={class:"text-left field-column"},vs={class:"text-center old-value-column"},bs={class:"text-center new-value-column"};function Fs(e,t,a,s,n,l){const i=(0,r.g2)("page-header"),o=(0,r.g2)("v-icon"),d=(0,r.g2)("v-list-item"),c=(0,r.g2)("v-list"),u=(0,r.g2)("v-navigation-drawer"),m=(0,r.g2)("v-text-field"),g=(0,r.g2)("v-card-title"),p=(0,r.g2)("v-btn"),f=(0,r.g2)("v-data-table"),k=(0,r.g2)("v-pagination"),v=(0,r.g2)("v-card-text"),b=(0,r.g2)("v-card"),F=(0,r.g2)("v-col"),_=(0,r.g2)("v-row"),S=(0,r.g2)("v-spacer"),y=(0,r.g2)("v-dialog"),L=(0,r.g2)("v-simple-table"),w=(0,r.g2)("v-container"),C=(0,r.g2)("v-main"),D=(0,r.g2)("v-layout"),E=(0,r.g2)("v-app");return(0,r.uX)(),(0,r.Wv)(E,null,{default:(0,r.k6)((()=>[(0,r.bF)(i),(0,r.bF)(D,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{permanent:"",width:"250",class:"sidebar overlapping-sidebar"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",pa,[(0,r.bF)(o,{size:"40",color:"white"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("mdi-account-circle")]))),_:1,__:[8]})]),(0,r.bF)(c,{class:"sidebar-buttons"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sidebarButtons,(e=>((0,r.uX)(),(0,r.Wv)(d,{key:e.route,class:"sidebar-button-wrapper",onClick:t=>l.navigateTo(e.route)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",fa,[(0,r.bF)(o,{size:"30",class:"sidebar-icon"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.icon),1)])),_:2},1024),(0,r.Lk)("span",ka,(0,h.v_)(e.text),1)]),t[9]||(t[9]=(0,r.Lk)("div",{class:"border-animation"},null,-1))])),_:2,__:[9]},1032,["onClick"])))),128))])),_:1})])),_:1}),(0,r.bF)(C,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{class:"history-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{class:"d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>[t[10]||(t[10]=(0,r.Lk)("h1",{class:"table-title"},"HISTORY LOG",-1)),(0,r.bF)(m,{modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=e=>n.search=e),"append-icon":"mdi-magnify",label:"Search...","single-line":"","hide-details":"",outlined:"",dark:"",class:"search-field"},null,8,["modelValue"])])),_:1,__:[10]}),(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",va,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.tabs,((e,a)=>((0,r.uX)(),(0,r.Wv)(p,{key:e,class:(0,h.C4)(["tab-btn",{"active-tab":n.tab===a}]),onClick:e=>{n.tab=a,n.page=1},depressed:"",height:"40"},{default:(0,r.k6)((()=>[0===a?((0,r.uX)(),(0,r.Wv)(o,{key:0,left:""},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("mdi-login-variant")]))),_:1,__:[11]})):(0,r.Q3)("",!0),1===a?((0,r.uX)(),(0,r.Wv)(o,{key:1,left:""},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("mdi-cash-multiple")]))),_:1,__:[12]})):(0,r.Q3)("",!0),2===a?((0,r.uX)(),(0,r.Wv)(o,{key:2,left:""},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("mdi-database-edit")]))),_:1,__:[13]})):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,h.v_)(e),1)])),_:2},1032,["class","onClick"])))),128))]),0===n.tab?((0,r.uX)(),(0,r.CE)("div",ba,[t[17]||(t[17]=(0,r.Lk)("div",{class:"table-header login-header"},[(0,r.Lk)("span",{class:"col-user"},"User"),(0,r.Lk)("span",{class:"col-ip"},"IP Address"),(0,r.Lk)("span",{class:"col-device"},"Device"),(0,r.Lk)("span",{class:"col-login-timestamp"},"Login/Logout")],-1)),(0,r.bF)(f,{headers:n.loginHeaders,items:l.paginatedLoginLogs,search:n.search,"hide-default-header":"","hide-default-footer":"",class:"elevation-1 history-table login-table",dark:""},{["item.user"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Fa,(0,h.v_)(e.user),1)])),["item.ip"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",_a,(0,h.v_)(e.ip),1)])),["item.device"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Sa,(0,h.v_)(e.device),1)])),["item.timestamp"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",ya,["Login"===e.action?((0,r.uX)(),(0,r.CE)("div",La,[(0,r.bF)(o,{small:"",color:"success"},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("mdi-login")]))),_:1,__:[14]}),(0,r.eW)(" Login: "+(0,h.v_)(l.formatDateTime(e.timestamp)),1)])):"Logout"===e.action?((0,r.uX)(),(0,r.CE)("div",wa,[(0,r.bF)(o,{small:"",color:"error"},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("mdi-logout")]))),_:1,__:[15]}),(0,r.eW)(" Logout: "+(0,h.v_)(l.formatDateTime(e.timestamp)),1)])):((0,r.uX)(),(0,r.CE)("div",Ca,[(0,r.bF)(o,{small:"",color:"grey"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("mdi-help-circle")]))),_:1,__:[16]}),(0,r.eW)(" Unknown: "+(0,h.v_)(l.formatDateTime(e.timestamp)),1)]))])])),_:2},1032,["headers","items","search"]),(0,r.Lk)("div",Da,[(0,r.bF)(k,{modelValue:n.page,"onUpdate:modelValue":t[1]||(t[1]=e=>n.page=e),length:l.loginPageCount,"total-visible":7,color:"primary",dark:""},null,8,["modelValue","length"])])])):(0,r.Q3)("",!0),1===n.tab?((0,r.uX)(),(0,r.CE)("div",Ea,[t[20]||(t[20]=(0,r.Lk)("div",{class:"table-header payment-header"},[(0,r.Lk)("span",{class:"col-student"},"Student"),(0,r.Lk)("span",{class:"col-admin"},"Admin"),(0,r.Lk)("span",{class:"col-event"},"Event"),(0,r.Lk)("span",{class:"col-amount"},"Amount"),(0,r.Lk)("span",{class:"col-timestamp"},"Timestamp"),(0,r.Lk)("span",{class:"col-receipt"},"Receipt")],-1)),(0,r.bF)(f,{headers:n.paymentHeaders,items:l.paginatedPaymentLogs,search:n.search,"hide-default-header":"","hide-default-footer":"",class:"elevation-1 history-table payment-table",dark:""},{["item.studentName"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Aa,(0,h.v_)(e.studentName),1)])),["item.adminName"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",xa,(0,h.v_)(e.adminName),1)])),["item.event"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Va,(0,h.v_)(e.event),1)])),["item.amount"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Na,"₱"+(0,h.v_)(e.amount.toFixed(2)),1)])),["item.timestamp"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Wa,(0,h.v_)(l.formatDateTime(e.timestamp)),1)])),["item.receipt"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Ra,[(0,r.bF)(p,{small:"",color:"success",onClick:t=>l.generateReceipt(e),class:"receipt-btn white--text"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:"",small:""},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)("mdi-receipt")]))),_:1,__:[18]}),t[19]||(t[19]=(0,r.eW)(" E-Receipt "))])),_:2,__:[19]},1032,["onClick"])])])),_:2},1032,["headers","items","search"]),(0,r.Lk)("div",Ia,[(0,r.bF)(k,{modelValue:n.page,"onUpdate:modelValue":t[2]||(t[2]=e=>n.page=e),length:l.paymentPageCount,"total-visible":7,color:"primary",dark:""},null,8,["modelValue","length"])])])):(0,r.Q3)("",!0),2===n.tab?((0,r.uX)(),(0,r.CE)("div",Ma,[t[23]||(t[23]=(0,r.Lk)("div",{class:"table-header transaction-header"},[(0,r.Lk)("span",{class:"col-admin"},"Admin"),(0,r.Lk)("span",{class:"col-target"},"Target"),(0,r.Lk)("span",{class:"col-changes"},"Changes"),(0,r.Lk)("span",{class:"col-timestamp"},"Timestamp")],-1)),(0,r.bF)(f,{headers:n.transactionHeaders,items:l.paginatedTransactionLogs,search:n.search,"hide-default-header":"","hide-default-footer":"",class:"elevation-1 history-table transaction-table",dark:""},{["item.adminName"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Ta,(0,h.v_)(e.adminName),1)])),["item.target"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Pa,(0,h.v_)(e.target),1)])),["item.changes"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",Ua,[(0,r.bF)(p,{small:"",color:"info",onClick:t=>l.showChanges(e),class:"changes-btn white--text"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:"",small:""},{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("mdi-eye")]))),_:1,__:[21]}),t[22]||(t[22]=(0,r.eW)(" View "))])),_:2,__:[22]},1032,["onClick"])])])),["item.timestamp"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",$a,[(0,r.Lk)("div",null,(0,h.v_)(e.action)+":",1),(0,r.Lk)("div",null,(0,h.v_)(l.formatDateTime(e.timestamp)),1)])])),_:2},1032,["headers","items","search"]),(0,r.Lk)("div",Xa,[(0,r.bF)(k,{modelValue:n.page,"onUpdate:modelValue":t[3]||(t[3]=e=>n.page=e),length:l.transactionPageCount,"total-visible":7,color:"primary",dark:""},null,8,["modelValue","length"])])])):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(y,{modelValue:n.receiptDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>n.receiptDialog=e),"max-width":"600"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{class:"receipt-card"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{class:"receipt-header"},{default:(0,r.k6)((()=>[t[25]||(t[25]=(0,r.Lk)("div",{class:"receipt-title"},"Payment Receipt",-1)),(0,r.bF)(S),(0,r.bF)(p,{icon:"",onClick:t[4]||(t[4]=e=>n.receiptDialog=!1),class:"close-btn"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{small:""},{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)("mdi-close")]))),_:1,__:[24]})])),_:1})])),_:1,__:[25]}),(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",qa,[(0,r.Lk)("div",Ba,[(0,r.Lk)("div",Ha,[t[26]||(t[26]=(0,r.Lk)("span",{class:"receipt-label"},"Receipt No:",-1)),(0,r.Lk)("span",Ya,(0,h.v_)(n.currentReceipt.id),1)]),(0,r.Lk)("div",Oa,[t[27]||(t[27]=(0,r.Lk)("span",{class:"receipt-label"},"Date:",-1)),(0,r.Lk)("span",ja,(0,h.v_)(l.formatDateTime(n.currentReceipt.timestamp)),1)]),(0,r.Lk)("div",Qa,[t[28]||(t[28]=(0,r.Lk)("span",{class:"receipt-label"},"Student:",-1)),(0,r.Lk)("span",za,(0,h.v_)(n.currentReceipt.studentName),1)]),(0,r.Lk)("div",Ka,[t[29]||(t[29]=(0,r.Lk)("span",{class:"receipt-label"},"Admin:",-1)),(0,r.Lk)("span",Ga,(0,h.v_)(n.currentReceipt.adminName),1)]),(0,r.Lk)("div",Ja,[t[30]||(t[30]=(0,r.Lk)("span",{class:"receipt-label"},"Event:",-1)),(0,r.Lk)("span",Za,(0,h.v_)(n.currentReceipt.event),1)]),(0,r.Lk)("div",es,[t[31]||(t[31]=(0,r.Lk)("span",{class:"receipt-label"},"Amount:",-1)),(0,r.Lk)("span",ts,"₱"+(0,h.v_)(n.currentReceipt.amount.toFixed(2)),1)])]),(0,r.Lk)("div",as,[(0,r.Lk)("div",ss,[t[32]||(t[32]=(0,r.Lk)("span",null,"Total Paid:",-1)),(0,r.Lk)("span",ns,"₱"+(0,h.v_)(n.currentReceipt.amount.toFixed(2)),1)]),(0,r.Lk)("div",ls,[(0,r.bF)(p,{color:"primary",onClick:l.printReceipt,class:"action-btn white--text"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:""},{default:(0,r.k6)((()=>t[33]||(t[33]=[(0,r.eW)("mdi-printer")]))),_:1,__:[33]}),t[34]||(t[34]=(0,r.eW)(" Print Receipt "))])),_:1,__:[34]},8,["onClick"]),(0,r.bF)(p,{color:"success",onClick:l.downloadReceipt,class:"action-btn ml-2 white--text"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{left:""},{default:(0,r.k6)((()=>t[35]||(t[35]=[(0,r.eW)("mdi-download")]))),_:1,__:[35]}),t[36]||(t[36]=(0,r.eW)(" Download PDF "))])),_:1,__:[36]},8,["onClick"])])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(y,{modelValue:n.changesDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>n.changesDialog=e),"max-width":"800"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{class:"changes-card"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{class:"changes-header"},{default:(0,r.k6)((()=>[t[38]||(t[38]=(0,r.Lk)("div",{class:"changes-title"},"Transaction Details",-1)),(0,r.bF)(S),(0,r.bF)(p,{icon:"",onClick:t[6]||(t[6]=e=>n.changesDialog=!1),class:"close-btn"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{small:""},{default:(0,r.k6)((()=>t[37]||(t[37]=[(0,r.eW)("mdi-close")]))),_:1,__:[37]})])),_:1})])),_:1,__:[38]}),(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",is,[(0,r.Lk)("div",rs,[(0,r.Lk)("div",os,[t[39]||(t[39]=(0,r.Lk)("span",{class:"info-label"},"Admin:",-1)),(0,r.Lk)("span",ds,(0,h.v_)(n.currentTransaction.adminName),1)]),(0,r.Lk)("div",cs,[t[40]||(t[40]=(0,r.Lk)("span",{class:"info-label"},"Action:",-1)),(0,r.Lk)("span",us,(0,h.v_)(n.currentTransaction.action),1)]),(0,r.Lk)("div",ms,[t[41]||(t[41]=(0,r.Lk)("span",{class:"info-label"},"Target:",-1)),(0,r.Lk)("span",gs,(0,h.v_)(n.currentTransaction.target),1)]),(0,r.Lk)("div",hs,[t[42]||(t[42]=(0,r.Lk)("span",{class:"info-label"},"Timestamp:",-1)),(0,r.Lk)("span",ps,(0,h.v_)(l.formatDateTime(n.currentTransaction.timestamp)),1)])]),(0,r.Lk)("div",fs,[(0,r.bF)(L,{dark:"",class:"changes-table"},{default:(0,r.k6)((()=>[t[43]||(t[43]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left field-column"},"Field"),(0,r.Lk)("th",{class:"text-center old-value-column"},"Old Value"),(0,r.Lk)("th",{class:"text-center new-value-column"},"New Value")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.currentChanges,((e,t)=>((0,r.uX)(),(0,r.CE)("tr",{key:t},[(0,r.Lk)("td",ks,(0,h.v_)(e.field),1),(0,r.Lk)("td",vs,(0,h.v_)(e.oldValue),1),(0,r.Lk)("td",bs,(0,h.v_)(e.newValue),1)])))),128))])])),_:1,__:[43]})])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})],4)])),_:1})])),_:1})])),_:1})}function _s(e,t,a,s,n,l){const i=(0,r.g2)("v-btn"),o=(0,r.g2)("v-toolbar-items"),d=(0,r.g2)("v-spacer"),c=(0,r.g2)("v-card-title"),u=(0,r.g2)("v-textarea"),m=(0,r.g2)("v-card-text"),g=(0,r.g2)("v-card-actions"),h=(0,r.g2)("v-card"),p=(0,r.g2)("v-dialog"),f=(0,r.g2)("v-toolbar");return(0,r.uX)(),(0,r.Wv)(f,{elevation:8,dark:"",prominent:"",style:{"background-color":"navy"}},{default:(0,r.k6)((()=>[(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.bF)(i,{onClick:t[0]||(t[0]=e=>n.showNoteDialog=!0),class:"toolbar-btn"},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/note.png",alt:"Note Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"Note",-1)]))),_:1,__:[8]})])),_:1}),(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.bF)(i,{onClick:t[1]||(t[1]=e=>n.showAboutDialog=!0),class:"toolbar-btn"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/info.png",alt:"About Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"About",-1)]))),_:1,__:[9]})])),_:1}),(0,r.bF)(d),(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.bF)(i,{class:"toolbar-btn",onClick:t[2]||(t[2]=t=>e.$router.go(-1))},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.Lk)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/back.png",alt:"Back Icon",class:"icon"},null,-1),(0,r.Lk)("span",{class:"toolbar-text"},"Back",-1)]))),_:1,__:[10]})])),_:1}),(0,r.bF)(p,{modelValue:n.showNoteDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>n.showNoteDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(h,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("Quick Note")]))),_:1,__:[11]}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:n.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.note=e),outlined:"",placeholder:"Type your notes here..."},null,8,["modelValue"])])),_:1}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(d),(0,r.bF)(i,{color:"primary",onClick:l.saveNote},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("Save")]))),_:1,__:[12]},8,["onClick"]),(0,r.bF)(i,{onClick:t[4]||(t[4]=e=>n.showNoteDialog=!1)},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Cancel")]))),_:1,__:[13]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(p,{modelValue:n.showAboutDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>n.showAboutDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(h,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("About Bytes Touchlog")]))),_:1,__:[14]}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.Lk)("p",null,"Bytes Touchlog is an efficient attendance system designed for Bytes officers to streamline student attendance tracking during events. This user-friendly system simplifies the check-in process, ensuring accurate and real-time recording of participants. With Bytes Touchlog, officers can quickly verify attendance, reduce manual errors, and generate reports effortlessly, making event management smoother and more organized. Ideal for tech-driven environments, it enhances accountability and saves time, allowing officers to focus on delivering a seamless event experience.",-1)]))),_:1,__:[15]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(d),(0,r.bF)(i,{color:"primary",onClick:t[6]||(t[6]=e=>n.showAboutDialog=!1)},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("Close")]))),_:1,__:[16]})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var Ss={data(){return{showNoteDialog:!1,showAboutDialog:!1,note:""}},methods:{saveNote(){alert("Note saved successfully!"),this.showNoteDialog=!1}}};const ys=(0,c.A)(Ss,[["render",_s],["__scopeId","data-v-83b0acac"]]);var Ls=ys,ws={components:{PageHeader:Ls},data(){return{sidebarButtons:[{text:"Dashboard",route:"Home",icon:"mdi-view-dashboard"},{text:"Manage Student",route:"manage-students",icon:"mdi-account-group"},{text:"Manage Event",route:"manage-events",icon:"mdi-calendar-multiple"},{text:"History Log",route:"history-log",icon:"mdi-history"}],backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",tab:0,tabs:["Login/Logout","Fine Payments","Transactions"],search:"",page:1,itemsPerPage:5,loginHeaders:[{text:"User",value:"user",align:"center",width:"20%"},{text:"IP Address",value:"ip",align:"center",width:"20%"},{text:"Device",value:"device",align:"center",width:"20%"},{text:"Timestamp",value:"timestamp",align:"center",width:"40%"}],paymentHeaders:[{text:"Student",value:"studentName",align:"center",width:"25%"},{text:"Admin",value:"adminName",align:"center",width:"15%"},{text:"Event",value:"event",align:"center",width:"20%"},{text:"Amount",value:"amount",align:"center",width:"10%"},{text:"Timestamp",value:"timestamp",align:"center",width:"15%"},{text:"Receipt",value:"receipt",align:"center",width:"15%"}],transactionHeaders:[{text:"Admin",value:"adminName",align:"center",width:"20%"},{text:"Target",value:"target",align:"center",width:"35%"},{text:"Changes",value:"changes",align:"center",width:"15%"},{text:"Timestamp",value:"timestamp",align:"center",width:"30%"}],loginLogs:[],paymentLogs:[{id:"PAY-001",studentName:"AI-shields Fiction",adminName:"admin1",event:"Orientation",amount:500,timestamp:new Date("2025-05-18T05:25:00")},{id:"PAY-002",studentName:"Jane Batuhan",adminName:"admin2",event:"Seminar",amount:500,timestamp:new Date("2025-05-17T05:25:00")},{id:"PAY-003",studentName:"Almon Punibaya",adminName:"admin1",event:"Workshop",amount:200,timestamp:new Date("2025-05-19T05:25:00")},{id:"PAY-004",studentName:"Sodais Macapantao",adminName:"admin2",event:"Orientation",amount:500,timestamp:new Date("2025-05-16T05:25:00")},{id:"PAY-005",studentName:"Abdulazis Mapandi",adminName:"admin1",event:"Seminar",amount:500,timestamp:new Date("2025-05-15T05:25:00")},{id:"PAY-006",studentName:"Faiz Rataban",adminName:"admin2",event:"Workshop",amount:200,timestamp:new Date("2025-05-14T05:25:00")},{id:"PAY-007",studentName:"Doms Benito",adminName:"admin1",event:"Orientation",amount:500,timestamp:new Date("2025-05-13T05:25:00")},{id:"PAY-008",studentName:"John Doe",adminName:"admin2",event:"Seminar",amount:500,timestamp:new Date("2025-05-12T05:25:00")},{id:"PAY-009",studentName:"Jane Smith",adminName:"admin1",event:"Workshop",amount:200,timestamp:new Date("2025-05-11T05:25:00")},{id:"PAY-010",studentName:"Robert Johnson",adminName:"admin2",event:"Orientation",amount:500,timestamp:new Date("2025-05-10T05:25:00")}],transactionLogs:[{id:"TRX-001",adminName:"admin1",action:"Updated",target:"Student: AI-shields Honor",changes:[{field:"Status",oldValue:"Regular",newValue:"Irregular"},{field:"Year Level",oldValue:"2nd Year",newValue:"3rd Year"}],timestamp:new Date("2025-05-18T05:25:00")},{id:"TRX-002",adminName:"admin2",action:"Created",target:"Event: Seminar",changes:[{field:"New Event",oldValue:"",newValue:"Annual Seminar"}],timestamp:new Date("2025-05-17T05:25:00")},{id:"TRX-003",adminName:"admin1",action:"Deleted",target:"Fine: PA-003",changes:[{field:"Fine Record",oldValue:"₱200.00",newValue:"Deleted"}],timestamp:new Date("2025-05-18T05:25:00")},{id:"TRX-004",adminName:"admin2",action:"Updated",target:"Student: Jane Batuhan",changes:[{field:"Course",oldValue:"BSIT",newValue:"BSCS"},{field:"Status",oldValue:"Regular",newValue:"Shifted"}],timestamp:new Date("2025-05-16T05:25:00")},{id:"TRX-005",adminName:"admin1",action:"Created",target:"Student: Almon Punibaya",changes:[{field:"New Student",oldValue:"",newValue:"Created"}],timestamp:new Date("2025-05-15T05:25:00")},{id:"TRX-006",adminName:"admin2",action:"Updated",target:"Event: Workshop",changes:[{field:"Date",oldValue:"2025-05-20",newValue:"2025-05-25"},{field:"Fee",oldValue:"₱200.00",newValue:"₱250.00"}],timestamp:new Date("2025-05-14T05:25:00")},{id:"TRX-007",adminName:"admin1",action:"Deleted",target:"Student: John Doe",changes:[{field:"Student Record",oldValue:"Active",newValue:"Deleted"}],timestamp:new Date("2025-05-13T05:25:00")},{id:"TRX-008",adminName:"admin2",action:"Updated",target:"System Settings",changes:[{field:"Fine Rate",oldValue:"₱500",newValue:"₱550"}],timestamp:new Date("2025-05-12T05:25:00")},{id:"TRX-009",adminName:"admin1",action:"Created",target:"User: admin3",changes:[{field:"New Admin",oldValue:"",newValue:"Created"}],timestamp:new Date("2025-05-11T05:25:00")},{id:"TRX-010",adminName:"admin2",action:"Updated",target:"User: admin1",changes:[{field:"Permissions",oldValue:"Basic",newValue:"Admin"}],timestamp:new Date("2025-05-10T05:25:00")}],receiptDialog:!1,currentReceipt:{},changesDialog:!1,currentChanges:[],currentTransaction:{}}},mounted(){this.fetchLoginHistory(),this.refreshInterval=setInterval((()=>{0===this.tab&&this.fetchLoginHistory()}),3e4)},beforeUnmount(){clearInterval(this.refreshInterval)},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}},filteredLoginLogs(){if(!this.search)return this.loginLogs;const e=this.search.toLowerCase();return this.loginLogs.filter((t=>t.user.toLowerCase().includes(e)||t.ip.toLowerCase().includes(e)||t.device.toLowerCase().includes(e)))},filteredPaymentLogs(){if(!this.search)return this.paymentLogs;const e=this.search.toLowerCase();return this.paymentLogs.filter((t=>t.studentName.toLowerCase().includes(e)||t.adminName.toLowerCase().includes(e)||t.event.toLowerCase().includes(e)||t.amount.toString().includes(e)))},filteredTransactionLogs(){if(!this.search)return this.transactionLogs;const e=this.search.toLowerCase();return this.transactionLogs.filter((t=>t.adminName.toLowerCase().includes(e)||t.target.toLowerCase().includes(e)||t.action.toLowerCase().includes(e)))},paginatedLoginLogs(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredLoginLogs.slice(e,t)},paginatedPaymentLogs(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredPaymentLogs.slice(e,t)},paginatedTransactionLogs(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredTransactionLogs.slice(e,t)},loginPageCount(){return Math.ceil(this.filteredLoginLogs.length/this.itemsPerPage)},paymentPageCount(){return Math.ceil(this.filteredPaymentLogs.length/this.itemsPerPage)},transactionPageCount(){return Math.ceil(this.filteredTransactionLogs.length/this.itemsPerPage)}},methods:{async fetchLoginHistory(){try{const e=await Ee.getLoginHistory();this.loginLogs=e.data.map((e=>({id:e.id,user:e.user?e.user.username:"Unknown",ip:e.ipAddress,device:e.device,timestamp:e.timestamp,action:e.action,logoutTimestamp:e.logoutTimestamp||null})))}catch(e){console.error("Failed to fetch login history:",e),alert("Failed to load login history. Please try again.")}},navigateTo(e){this.$router.push({name:e})},formatDateTime(e){return(0,lt.GP)(new Date(e),"MMM dd yyyy h:mma")},generateReceipt(e){this.currentReceipt=e,this.receiptDialog=!0},printReceipt(){window.print()},downloadReceipt(){alert("PDF download would start here in a real implementation")},showChanges(e){this.currentTransaction=e,this.currentChanges=e.changes,this.changesDialog=!0}}};const Cs=(0,c.A)(ws,[["render",Fs],["__scopeId","data-v-2d996356"]]);var Ds=Cs;const Es={class:"form"},As={class:"mode-selector"},xs={key:0,class:"reader-section"},Vs={class:"select-wrapper"},Ns=["value"],Ws={key:1},Rs={class:"reader-info"},Is={key:0,class:"enrollment-section"},Ms={class:"input-wrapper"},Ts={key:1,class:"fingerprint-display"},Ps={class:"progress-container"},Us={class:"progress-text"},$s={class:"scan-progress"},Xs={class:"fingerprint-animation"},qs={key:0,class:"loading-dots"},Bs={class:"status-message"},Hs={key:2,class:"identification-section"},Ys={class:"reader-info"},Os={key:0,class:"identification-controls"},js={key:1,class:"fingerprint-display"},Qs={class:"fingerprint-animation"},zs={key:0,class:"loading-dots"},Ks={class:"status-message"},Gs={key:0,class:"debug-info"},Js={key:1,class:"result-display"},Zs={key:0,class:"success-result"},en={key:0},tn={key:1,class:"error-result"},an={key:3,class:"reader-communication-error"};function sn(e,t,a,s,n,l){const o=(0,r.g2)("PageHeader");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle),id:"bp"},[(0,r.Lk)("div",Es,[(0,r.Lk)("div",As,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>l.setMode("enroll")),class:(0,h.C4)(["mode-btn",{active:"enroll"===n.mode}])},t[7]||(t[7]=[(0,r.Lk)("i",{class:"fas fa-fingerprint"},null,-1),(0,r.eW)(" Enroll Fingerprint ")]),2),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>l.setMode("identify")),class:(0,h.C4)(["mode-btn",{active:"identify"===n.mode}])},t[8]||(t[8]=[(0,r.Lk)("i",{class:"fas fa-search"},null,-1),(0,r.eW)(" Identify Fingerprint ")]),2)]),n.selectedReader?"enroll"===n.mode?((0,r.uX)(),(0,r.CE)("div",Ws,[(0,r.Lk)("p",Rs,"Selected Reader: "+(0,h.v_)(n.selectedReader),1),t[16]||(t[16]=(0,r.Lk)("h2",null,[(0,r.Lk)("i",{class:"fas fa-user-plus"}),(0,r.eW)(" Fingerprint Enrollment")],-1)),n.enrollmentStarted?((0,r.uX)(),(0,r.CE)("div",Ts,[(0,r.Lk)("div",Ps,[(0,r.Lk)("div",{class:"progress-bar",style:(0,h.Tr)({width:n.enrollmentProgress+"%"})},null,4),(0,r.Lk)("span",Us,(0,h.v_)(Math.round(n.enrollmentProgress))+"% Complete",1)]),(0,r.Lk)("p",$s," Scan "+(0,h.v_)(n.enrollScanStep+1)+"/4 for "+(0,h.v_)(n.currentEnrollFinger)+" finger ",1),(0,r.Lk)("div",Xs,[(0,r.Lk)("div",{class:(0,h.C4)(["fingerprint-icon",{scanning:n.isScanning}])},t[14]||(t[14]=[(0,r.Lk)("i",{class:"fas fa-fingerprint"},null,-1)]),2),n.isScanning?((0,r.uX)(),(0,r.CE)("div",qs,t[15]||(t[15]=[(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1)]))):(0,r.Q3)("",!0)]),(0,r.Lk)("p",Bs,(0,h.v_)(n.statusMessage),1)])):((0,r.uX)(),(0,r.CE)("div",Is,[(0,r.Lk)("div",Ms,[t[12]||(t[12]=(0,r.Lk)("i",{class:"fas fa-user input-icon"},null,-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.enrollName=e),type:"text",placeholder:"Enter name for enrollment",class:"name-input"},null,512),[[i.Jo,n.enrollName]])]),(0,r.Lk)("button",{class:"btn enroll-btn",onClick:t[5]||(t[5]=(...e)=>l.startEnrollment&&l.startEnrollment(...e))},t[13]||(t[13]=[(0,r.Lk)("i",{class:"fas fa-play"},null,-1),(0,r.eW)(" Start Enrollment ")]))]))])):((0,r.uX)(),(0,r.CE)("div",Hs,[(0,r.Lk)("p",Ys,"Selected Reader: "+(0,h.v_)(n.selectedReader),1),t[27]||(t[27]=(0,r.Lk)("h2",null,[(0,r.Lk)("i",{class:"fas fa-search"}),(0,r.eW)(" Fingerprint Identification")],-1)),n.identificationStarted?((0,r.uX)(),(0,r.CE)("div",js,[t[26]||(t[26]=(0,r.Lk)("p",{class:"scan-progress"},"Place your finger on the scanner",-1)),(0,r.Lk)("div",Qs,[(0,r.Lk)("div",{class:(0,h.C4)(["fingerprint-icon",{scanning:n.isScanning}])},t[18]||(t[18]=[(0,r.Lk)("i",{class:"fas fa-fingerprint"},null,-1)]),2),n.isScanning?((0,r.uX)(),(0,r.CE)("div",zs,t[19]||(t[19]=[(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1)]))):(0,r.Q3)("",!0)]),(0,r.Lk)("p",Ks,(0,h.v_)(n.statusMessage),1),n.debugInfo?((0,r.uX)(),(0,r.CE)("div",Gs,[t[20]||(t[20]=(0,r.Lk)("h3",null,[(0,r.Lk)("i",{class:"fas fa-bug"}),(0,r.eW)(" Debug Information")],-1)),(0,r.Lk)("pre",null,(0,h.v_)(n.debugInfo),1)])):(0,r.Q3)("",!0),n.identificationResult?((0,r.uX)(),(0,r.CE)("div",Js,[n.identificationResult.success?((0,r.uX)(),(0,r.CE)("div",Zs,[t[24]||(t[24]=(0,r.Lk)("h3",null,[(0,r.Lk)("i",{class:"fas fa-check-circle"}),(0,r.eW)(" User Identified")],-1)),(0,r.Lk)("p",null,[t[21]||(t[21]=(0,r.Lk)("strong",null,"Name:",-1)),(0,r.eW)(" "+(0,h.v_)(n.identificationResult.name),1)]),n.identificationResult.userId?((0,r.uX)(),(0,r.CE)("p",en,[t[22]||(t[22]=(0,r.Lk)("strong",null,"User ID:",-1)),(0,r.eW)(" "+(0,h.v_)(n.identificationResult.userId),1)])):(0,r.Q3)("",!0),(0,r.Lk)("p",null,[t[23]||(t[23]=(0,r.Lk)("strong",null,"Enrolled At:",-1)),(0,r.eW)(" "+(0,h.v_)(l.formatDate(n.identificationResult.enrolledAt)),1)])])):((0,r.uX)(),(0,r.CE)("div",tn,[t[25]||(t[25]=(0,r.Lk)("h3",null,[(0,r.Lk)("i",{class:"fas fa-times-circle"}),(0,r.eW)(" Identification Failed")],-1)),(0,r.Lk)("p",null,(0,h.v_)(n.identificationResult.error||"No matching fingerprint found."),1)]))])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",Os,[(0,r.Lk)("button",{class:"btn identify-btn",onClick:t[6]||(t[6]=(...e)=>l.startIdentification&&l.startIdentification(...e))},t[17]||(t[17]=[(0,r.Lk)("i",{class:"fas fa-play"},null,-1),(0,r.eW)(" Start Identification ")]))]))])):((0,r.uX)(),(0,r.CE)("div",xs,[(0,r.Lk)("div",Vs,[t[10]||(t[10]=(0,r.Lk)("i",{class:"fas fa-fingerprint select-icon"},null,-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedReaderName=e),class:"reader-select"},[t[9]||(t[9]=(0,r.Lk)("option",{value:"",disabled:""},"Select a reader",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.readers,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,h.v_)(e),9,Ns)))),128))],512),[[i.u1,n.selectedReaderName]])]),(0,r.Lk)("button",{class:"btn",onClick:t[3]||(t[3]=(...e)=>l.selectReader&&l.selectReader(...e))},t[11]||(t[11]=[(0,r.Lk)("i",{class:"fas fa-check"},null,-1),(0,r.eW)(" Select Reader ")]))])),n.showLiteClientLink?((0,r.uX)(),(0,r.CE)("div",an,t[28]||(t[28]=[(0,r.Lk)("i",{class:"fas fa-exclamation-triangle"},null,-1),(0,r.eW)(" Cannot connect to your fingerprint device. Make sure the device is connected. You may need to download and install "),(0,r.Lk)("a",{href:"https://crossmatch.hid.gl/lite-client",target:"_blank"},"DigitalPersona Lite Client",-1),(0,r.eW)(". ")]))):(0,r.Q3)("",!0)])],4)],64)}var nn={components:{PageHeader:E},data(){return{mode:"enroll",backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",reader:null,readers:[],selectedReaderName:"",selectedReader:null,enrollName:"",enrollScanStep:0,currentEnrollFinger:"index",indexFingerSamples:[],middleFingerSamples:[],enrollmentStarted:!1,isScanning:!1,enrollmentProgress:0,identificationStarted:!1,identificationResult:null,fingerprintImage:null,statusMessage:"Waiting for reader selection...",showLiteClientLink:!1,debugInfo:""}},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}}},async mounted(){try{if(!window.Fingerprint?.WebApi)throw new Error("Fingerprint SDK not available");console.log("✅ SDK available"),this.reader=new window.Fingerprint.WebApi,this.reader.onDeviceConnected=()=>{this.statusMessage="Device connected. Ready to scan."},this.reader.onDeviceDisconnected=()=>{this.statusMessage="Device disconnected.",this.isScanning=!1},this.reader.onCommunicationFailed=()=>{this.statusMessage="Communication with reader failed.",this.isScanning=!1},this.reader.onSamplesAcquired=this.handleEnrollmentSample;const e=await this.reader.enumerateDevices();this.readers=e,this.statusMessage=e.length?"Select a reader":"No fingerprint readers found",console.log("📡 Available readers:",e)}catch(e){console.error("❌ SDK init error:",e),this.statusMessage=`SDK error: ${e.message}`,this.showLiteClientLink=!0}},methods:{setMode(e){this.resetAll(),this.mode=e,this.statusMessage="Mode set to "+("enroll"===e?"Enrollment":"Identification")},selectReader(){this.selectedReaderName?(this.selectedReader=this.selectedReaderName,this.statusMessage=`Reader "${this.selectedReader}" selected.`,console.log("🖐️ Reader selected:",this.selectedReader)):this.statusMessage="Please select a reader first"},async startEnrollment(){if(this.enrollName){this.debugInfo="Initializing enrollment...",this.enrollScanStep=0,this.indexFingerSamples=[],this.middleFingerSamples=[],this.currentEnrollFinger="index",this.enrollmentStarted=!0,this.isScanning=!0,this.enrollmentProgress=0,this.statusMessage="Starting enrollment... Place your index finger on the scanner";try{await this.reader.startAcquisition(window.Fingerprint.SampleFormat.Intermediate,this.selectedReader)}catch(e){this.debugInfo+=`\nAcquisition error: ${e.message}`,this.statusMessage=`Acquisition failed: ${e.message}`,this.isScanning=!1,console.error("❌ Acquisition error:",e)}}else this.statusMessage="Please enter a name"},async handleEnrollmentSample(e){try{const t=JSON.parse(e.samples),a=t[0].Data;if(this.isScanning=!1,this.enrollmentProgress=12.5*(this.indexFingerSamples.length+this.middleFingerSamples.length+1),"index"===this.currentEnrollFinger)this.indexFingerSamples.push(a),this.enrollScanStep++,this.statusMessage=`Scan ${this.enrollScanStep}/4 for index finger (${Math.round(this.enrollmentProgress)}% complete)`,4===this.indexFingerSamples.length&&(this.currentEnrollFinger="middle",this.enrollScanStep=0,this.statusMessage="Now scanning middle finger... Place your middle finger on the scanner");else if("middle"===this.currentEnrollFinger&&(this.middleFingerSamples.push(a),this.enrollScanStep++,this.statusMessage=`Scan ${this.enrollScanStep}/4 for middle finger (${Math.round(this.enrollmentProgress)}% complete)`,4===this.middleFingerSamples.length))return await this.reader.stopAcquisition(),this.statusMessage="Sending enrollment data to backend...",void await this.sendEnrollment();await this.delay(800),this.isScanning=!0}catch(t){this.statusMessage=`❌ Sample error: ${t.message}`,this.isScanning=!1,console.error("⚠️ Sample error:",t)}},async sendEnrollment(){try{this.isScanning=!0,this.statusMessage="Processing enrollment data...";const e=await Ee.enrollFingerprint({name:this.enrollName,enrolled_index_finger_data:this.indexFingerSamples,enrolled_middle_finger_data:this.middleFingerSamples});if("Enrollment successful"!==e.data?.message)throw new Error(e.data?.error||"Enrollment failed");this.statusMessage=`✅ ${this.enrollName} enrolled successfully!`,this.enrollmentProgress=100}catch(e){this.statusMessage=`❌ Enrollment error: ${e.message}`}finally{this.isScanning=!1,setTimeout((()=>this.resetEnrollment()),3e3)}},async startIdentification(){this.identificationStarted=!0,this.isScanning=!0,this.statusMessage="Starting identification... Place your finger on the scanner",this.debugInfo="",this.fingerprintImage=null,this.identificationResult=null;try{await this.reader.startAcquisition(window.Fingerprint.SampleFormat.Intermediate,this.selectedReader),this.reader.onSamplesAcquired=this.handleIdentificationSample}catch(e){this.statusMessage=`Acquisition error: ${e.message}`,this.isScanning=!1,console.error("Identification start error:",e)}},async handleIdentificationSample(e){try{this.isScanning=!1;const t=JSON.parse(e.samples),a=t[0].Data;await this.reader.stopAcquisition(),this.statusMessage="Identifying fingerprint...";const s=await Ee.identifyFingerprint({fmd:a});if(s.data.success){const e=s.data.user;this.identificationResult={success:!0,name:e?.name||"Unknown",userId:e?.id||"-",enrolledAt:e?.enrolledAt||null},this.statusMessage=`✅ User identified: ${this.identificationResult.name}`,await this.delay(2e3)}else this.identificationResult={success:!1,error:s.data.message||"Identification failed"},this.statusMessage=`❌ ${this.identificationResult.error}`,await this.delay(1e3);this.identificationResult=null,this.isScanning=!0,await this.reader.startAcquisition(window.Fingerprint.SampleFormat.Intermediate,this.selectedReader),this.statusMessage="Place your finger on the scanner"}catch(t){console.error("❌ Identification error:",t),this.statusMessage=`Identification error: ${t?.response?.data?.error||t.message}`,this.isScanning=!1}},async delay(e){return new Promise((t=>setTimeout(t,e)))},resetEnrollment(){this.enrollScanStep=0,this.indexFingerSamples=[],this.middleFingerSamples=[],this.enrollName="",this.enrollmentStarted=!1,this.fingerprintImage=null,this.currentEnrollFinger="index",this.isScanning=!1,this.enrollmentProgress=0},resetAll(){this.resetEnrollment(),this.identificationStarted=!1,this.identificationResult=null,this.fingerprintImage=null,this.statusMessage="Mode switched. Select reader and start.",this.debugInfo="",this.isScanning=!1},formatDate(e){return e?new Date(e).toLocaleString():"Unknown"}}};const ln=(0,c.A)(nn,[["render",sn],["__scopeId","data-v-7bfe44c3"]]);var rn=ln;const on={class:"form"},dn={class:"create-account"},cn={key:0,class:"error"},un={key:0,class:"error"};function mn(e,t,a,s,n,l){const o=(0,r.g2)("HeaderNav");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle),id:"bp"},[(0,r.Lk)("div",on,[(0,r.Lk)("form",{class:"login-form",onSubmit:t[4]||(t[4]=(0,i.D$)(((...e)=>l.createAccount&&l.createAccount(...e)),["prevent"]))},[t[8]||(t[8]=(0,r.Lk)("h2",null,"Account Management",-1)),(0,r.Lk)("div",dn,[t[7]||(t[7]=(0,r.Lk)("h3",null,"Create New Account",-1)),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.newUser.username=e),placeholder:"Username",required:""},null,512),[[i.Jo,n.newUser.username]]),n.errors.username?((0,r.uX)(),(0,r.CE)("p",cn,(0,h.v_)(n.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.newUser.password=e),placeholder:"Password",required:""},null,512),[[i.Jo,n.newUser.password]]),n.errors.password?((0,r.uX)(),(0,r.CE)("p",un,(0,h.v_)(n.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.newUser.role=e),class:"styled-select"},t[5]||(t[5]=[(0,r.Lk)("option",{value:"user"},"User",-1),(0,r.Lk)("option",{value:"admin"},"Admin",-1)]),512),[[i.u1,n.newUser.role]])]),(0,r.Lk)("button",{class:"btn",dark:"",onClick:t[3]||(t[3]=(...e)=>l.createAccount&&l.createAccount(...e)),rounded:"xl",size:"x-large",block:""},t[6]||(t[6]=[(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.eW)(" Create Account ")]))]),t[9]||(t[9]=(0,r.Lk)("p",{class:"message"},[(0,r.eW)("Manage existing accounts in the "),(0,r.Lk)("a",{href:"/account-list"},"Account List")],-1))],32)])],4)],64)}var gn={components:{HeaderNav:E},data(){return{backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",newUser:{username:"",password:"",role:"user"},errors:{}}},beforeRouteEnter(e,t,a){a((e=>{e.$store.getters.isAuthenticated&&"dev"===e.$store.getters.currentUser?.username.toLowerCase()||e.$router.push("/home")}))},beforeRouteUpdate(e,t,a){this.$store.getters.isAuthenticated&&"dev"===this.$store.getters.currentUser?.username.toLowerCase()||this.$router.push("/home"),a()},methods:{async createAccount(){this.errors={};try{const e=await Ee.createAccount(this.newUser);if(e.data.error)throw new Error(e.data.error);this.newUser={username:"",password:"",role:"user"},alert("Account created successfully!")}catch(e){if(403===e.response?.status&&(alert("Session expired. Please login again."),this.$router.push("/")),e.response){const t=e.response.data?.error;t.includes("username")?this.errors.username=t:t.includes("password")?this.errors.password=t:alert(t)}}}},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",margin:0,padding:0}}}};const hn=(0,c.A)(gn,[["render",mn],["__scopeId","data-v-300965f1"]]);var pn=hn;const fn={class:"settings-container"};function kn(e,t){const a=(0,r.g2)("PageHeader");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(a),(0,r.Lk)("div",fn,[t[8]||(t[8]=(0,r.Lk)("h2",null,"Account Settings",-1)),(0,r.Lk)("form",{onSubmit:t[3]||(t[3]=(0,i.D$)(((...t)=>e.updateAccount&&e.updateAccount(...t)),["prevent"]))},[(0,r.Lk)("label",null,[t[4]||(t[4]=(0,r.eW)("Username: ")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentUser.username=t)},null,512),[[i.Jo,e.currentUser.username]])]),(0,r.Lk)("label",null,[t[5]||(t[5]=(0,r.eW)("New Password: ")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.passwordChange.newPassword=t),type:"password"},null,512),[[i.Jo,e.passwordChange.newPassword]])]),(0,r.Lk)("label",null,[t[6]||(t[6]=(0,r.eW)("Current Password (to confirm changes): ")),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.passwordChange.currentPassword=t),type:"password"},null,512),[[i.Jo,e.passwordChange.currentPassword]])]),t[7]||(t[7]=(0,r.Lk)("button",{type:"submit"},"Save Changes",-1))],32)])],64)}const vn={},bn=(0,c.A)(vn,[["render",kn]]);var Fn=bn;const _n={class:"action-buttons"},Sn={class:"details-header"},yn={class:"mb-2"},Ln={class:"regular-buttons"};function wn(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-card-title"),c=(0,r.g2)("v-card-text"),u=(0,r.g2)("v-spacer"),m=(0,r.g2)("v-btn"),g=(0,r.g2)("v-card-actions"),p=(0,r.g2)("v-card"),f=(0,r.g2)("v-dialog"),k=(0,r.g2)("v-chip"),v=(0,r.g2)("v-data-table"),b=(0,r.g2)("v-col"),F=(0,r.g2)("v-text-field"),_=(0,r.g2)("v-select"),S=(0,r.g2)("v-form"),y=(0,r.g2)("v-row"),L=(0,r.g2)("v-container");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(L,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,{modelValue:n.welcomeDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.welcomeDialog=e),persistent:"","max-width":"600"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"text-h5"},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("Important Information")]))),_:1,__:[9]}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)(" This is the account list interface. Please handle it with caution as it is strictly intended for managing user accounts and passwords. Only authorized administrators should perform actions here to ensure the security and privacy of user data. ")]))),_:1,__:[10]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(u),(0,r.bF)(m,{color:"primary",onClick:t[0]||(t[0]=e=>n.welcomeDialog=!1)},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("Understood")]))),_:1,__:[11]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(f,{modelValue:n.actionDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>n.actionDialog=e),persistent:"","max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"text-h5"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.dialogTitle),1)])),_:1}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.dialogMessage),1)])),_:1}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(u),(0,r.bF)(m,{color:"grey",onClick:t[2]||(t[2]=e=>n.actionDialog=!1)},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("Cancel")]))),_:1,__:[12]}),(0,r.bF)(m,{color:"primary",onClick:l.confirmAction},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Confirm")]))),_:1,__:[13]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(f,{modelValue:n.passwordConfirmDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>n.passwordConfirmDialog=e),persistent:"","max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("Confirm Password Change")]))),_:1,__:[14]}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)(" You're about to change the account password. This action cannot be undone. ")]))),_:1,__:[15]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(u),(0,r.bF)(m,{color:"grey",onClick:t[4]||(t[4]=e=>n.passwordConfirmDialog=!1)},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("Cancel")]))),_:1,__:[16]}),(0,r.bF)(m,{color:"primary",onClick:l.saveAccount},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("Confirm")]))),_:1,__:[17]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.Lk)("h1",{class:"table-title"},"Account List",-1)]))),_:1,__:[18]}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:n.selectedAccount?8:12},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"student-list-card"},{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[t[20]||(t[20]=(0,r.Lk)("div",{class:"student-list-header"},[(0,r.Lk)("span",{class:"col-username"},"Username"),(0,r.Lk)("span",{class:"col-role"},"Role"),(0,r.Lk)("span",{class:"col-status"},"Status"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(v,{headers:n.accountHeaders,items:l.filteredAccounts,search:n.search,"items-per-page":10,class:"elevation-1 student-fines-table",dark:"","hide-default-header":""},{["item.status"]:(0,r.k6)((({item:e})=>[(0,r.bF)(k,{small:"",color:e.isEnabled?"green":"red"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.isEnabled?"Active":"Inactive"),1)])),_:2},1032,["color"])])),["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("div",_n,[(0,r.bF)(m,{small:"",color:"warning",onClick:t=>l.editAccount(e),class:"action-btn"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)(" Update ")]))),_:2,__:[19]},1032,["onClick"]),(0,r.bF)(m,{small:"",color:e.isEnabled?"error":"success",onClick:t=>l.initiateAction("toggle",e),class:"action-btn"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.isEnabled?"Disable":"Enable"),1)])),_:2},1032,["color","onClick"])])])),_:2},1032,["headers","items","search"])])),_:1,__:[20]})])),_:1})])),_:1},8,["cols"]),n.selectedAccount?((0,r.uX)(),(0,r.Wv)(b,{key:0,cols:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"right-side-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Sn,[(0,r.bF)(d,{class:"details-title"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedAccount.username)+" Details ",1)])),_:1})]),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[n.selectedAccount?((0,r.uX)(),(0,r.Wv)(S,{key:0,onSubmit:(0,i.D$)(l.showConfirmation,["prevent"])},{default:(0,r.k6)((()=>[(0,r.Lk)("div",yn,[t[21]||(t[21]=(0,r.Lk)("strong",null,"Username:",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedAccount.username),1)]),(0,r.bF)(F,{modelValue:n.editForm.newPassword,"onUpdate:modelValue":t[6]||(t[6]=e=>n.editForm.newPassword=e),label:"New Password",type:"password",outlined:"",dense:"",class:"mb-2",placeholder:"Leave empty to keep current password"},null,8,["modelValue"]),(0,r.bF)(_,{modelValue:n.editForm.role,"onUpdate:modelValue":t[7]||(t[7]=e=>n.editForm.role=e),items:n.roles,label:"Role",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.bF)(_,{modelValue:n.editForm.status,"onUpdate:modelValue":t[8]||(t[8]=e=>n.editForm.status=e),items:n.statusOptions,label:"Status",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.Lk)("div",Ln,[(0,r.bF)(m,{type:"submit",color:"success"},{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)("Save Changes")]))),_:1,__:[22]}),(0,r.bF)(m,{onClick:l.cancelEdit,class:"ml-2"},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Cancel")]))),_:1,__:[23]},8,["onClick"])])])),_:1},8,["onSubmit"])):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],4)])}var Cn={components:{PageHeader:Ls},data(){return{welcomeDialog:!1,actionDialog:!1,dialogTitle:"",dialogMessage:"",currentAction:null,selectedAccount:null,backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",search:"",passwordConfirmDialog:!1,editForm:{newPassword:""},statusOptions:["Active","Inactive"],roles:["admin","user"],accountHeaders:[{text:"Username",value:"username",align:"center",width:"30%"},{text:"Role",value:"role",align:"center",width:"20%"},{text:"Status",value:"status",align:"center",width:"20%"},{text:"Actions",value:"actions",align:"center",width:"30%",sortable:!1}],accounts:[]}},computed:{filteredAccounts(){return this.accounts.filter((e=>e.username.toLowerCase().includes(this.search.toLowerCase())))},backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}}},async mounted(){await this.loadAccounts(),this.welcomeDialog=!0},methods:{initiateAction(e,t){this.currentAction={type:e,account:{...t},id:t.id};const a={toggle:`Are you sure you want to ${t.isEnabled?"disable":"enable"} ${t.username}?`,delete:`Permanently delete account ${t.username}? This cannot be undone!`,edit:"Save changes to this account?"};this.dialogTitle=`${e.charAt(0).toUpperCase()+e.slice(1)} Confirmation`,this.dialogMessage=a[e],this.actionDialog=!0},async confirmAction(){if(this.actionDialog=!1,!this.currentAction||!this.currentAction.type)return console.error("No valid currentAction provided."),this.dialogTitle="Error",this.dialogMessage="No action was selected or the action is invalid.",void(this.actionDialog=!0);try{switch(this.currentAction.type){case"toggle":await this.toggleAccountStatus();break;case"delete":await Ee.deleteAccount(this.currentAction.account.id),await this.loadAccounts(),this.dialogTitle="Success",this.dialogMessage="Account deleted successfully.";break;case"edit":await this.saveAccount();break;default:this.dialogTitle="Error",this.dialogMessage=`Unknown action type: ${this.currentAction.type}`;break}}catch(e){console.error("Action failed:",e),this.dialogTitle="Error",this.dialogMessage="Action failed. Please try again."}finally{this.actionDialog=!1}},async loadAccounts(){try{const e=await Ee.getAccounts();this.accounts=e.data.map((e=>({...e,status:e.isEnabled?"Active":"Inactive"})))}catch(e){console.error("Error loading accounts:",e)}},async toggleAccountStatus(){try{const e=!this.currentAction.account.isEnabled;await Ee.toggleAccountStatus(this.currentAction.id),await this.loadAccounts(),this.dialogTitle="Success",this.dialogMessage=`Account ${e?"enabled":"disabled"} successfully.`}catch(e){console.error("Error toggling status:",e),this.dialogTitle="Error",this.dialogMessage="Failed to update account status."}},async deleteAccount(e){try{await Ee.deleteAccount(e),this.accounts=this.accounts.filter((t=>t.id!==e))}catch(t){throw console.error("Error deleting account:",t),t}},getStatusColor(e){return"Active"===e?"green":"red"},editAccount(e){this.selectedAccount=e,this.editForm={...e,currentPassword:"",newPassword:""}},async saveAccount(){try{const e=Object.keys(this.editForm).some((e=>"currentPassword"!==e&&"newPassword"!==e&&this.editForm[e]!==this.selectedAccount[e]));if(!e&&!this.editForm.newPassword)return this.dialogTitle="No Changes",void(this.dialogMessage="No changes detected to save.");console.log(this.editForm.id),console.log(this.editForm.newPassword);const t={id:this.editForm.id,password:this.editForm.newPassword||void 0};console.log(t.password),await Ee.updateAccount(t),await this.loadAccounts(),this.dialogTitle="Success",this.dialogMessage="Account updated successfully.",this.passwordConfirmDialog=!1,this.cancelEdit()}catch(e){console.error("Error updating account:",e),this.dialogTitle="Error",this.dialogMessage="Failed to update account."}finally{this.cancelEdit()}},showConfirmation(){this.editForm.newPassword?this.passwordConfirmDialog=!0:this.saveAccount()},cancelEdit(){this.selectedAccount=null,this.editForm={newPassword:""}}}};const Dn=(0,c.A)(Cn,[["render",wn],["__scopeId","data-v-039f5e3a"]]);var En=Dn;const An={class:"button-wrapper"},xn={class:"button-content"},Vn={class:"button-text"};function Nn(e,t,a,s,n,l){const i=(0,r.g2)("page-header"),o=(0,r.g2)("v-icon"),d=(0,r.g2)("v-btn"),c=(0,r.g2)("v-col"),u=(0,r.g2)("v-row"),m=(0,r.g2)("v-container");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(i),(0,r.Lk)("div",{style:(0,h.Tr)(l.mainContentStyle)},[(0,r.bF)(m,{class:"button-container"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"d-flex justify-center align-center"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.devButtons,(e=>((0,r.uX)(),(0,r.Wv)(c,{cols:"auto",key:e.route},{default:(0,r.k6)((()=>[(0,r.Lk)("div",An,[(0,r.bF)(d,{class:"square-button",color:e.color,onClick:t=>l.navigateTo(e.route),height:"280px",width:"280px"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",xn,[(0,r.bF)(o,{size:"84"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.icon),1)])),_:2},1024),(0,r.Lk)("div",Vn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.text.split(" "),((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t},(0,h.v_)(e),1)))),128))])])])),_:2},1032,["color","onClick"]),t[0]||(t[0]=(0,r.Lk)("div",{class:"border-animation-container"},[(0,r.Lk)("span",{class:"border-animation top"}),(0,r.Lk)("span",{class:"border-animation right"}),(0,r.Lk)("span",{class:"border-animation bottom"}),(0,r.Lk)("span",{class:"border-animation left"})],-1))])])),_:2},1024)))),128))])),_:1})])),_:1})],4)])}var Wn={components:{PageHeader:Ve},data(){return{devButtons:[{text:"Registration",route:"Register",color:"black-transparent",icon:"mdi-account-plus"},{text:"Create Event",route:"Event",color:"black-transparent",icon:"mdi-calendar-plus"},{text:"Attendance",route:"attendance",color:"black-transparent",icon:"mdi-fingerprint"},{text:"Student Management",route:"StudentManage",color:"black-transparent",icon:"mdi-account-group"}]}},computed:{mainContentStyle(){return{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundImage:"url('https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg')",backgroundSize:"cover",backgroundPosition:"center",padding:"20px 0"}}},methods:{navigateTo(e){this.$router.push({name:e})}}};const Rn=(0,c.A)(Wn,[["render",Nn],["__scopeId","data-v-e3507634"]]);var In=Rn;const Mn={class:"d-flex align-center flex-wrap",style:{gap:"12px"}},Tn={class:"col-fname text-center"},Pn={class:"col-mi text-center"},Un={class:"col-lname text-center"},$n={class:"col-course text-center"},Xn={class:"col-year text-center"},qn={class:"col-actions text-center"},Bn={class:"action-buttons"},Hn={class:"text-center pt-2"},Yn={class:"details-header"},On={class:"mt-4 fingerprint-section"},jn={class:"progress-label"},Qn={class:"regular-buttons"},zn={class:"text-h6"},Kn={class:"text-body-2"},Gn={class:"file-input-container"},Jn={class:"subtitle"},Zn={class:"fingerprint-message"},el={key:0,class:"fingerprint-display"},tl={class:"progress-container"},al={class:"progress-text"},sl={class:"fingerprint-animation"},nl={key:0,class:"loading-dots"};function ll(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-icon"),c=(0,r.g2)("v-btn"),u=(0,r.g2)("v-select"),m=(0,r.g2)("v-card-title"),g=(0,r.g2)("v-col"),p=(0,r.g2)("v-text-field"),f=(0,r.g2)("v-row"),k=(0,r.g2)("v-pagination"),v=(0,r.g2)("v-data-table"),b=(0,r.g2)("v-card-text"),F=(0,r.g2)("v-card"),_=(0,r.g2)("v-alert"),S=(0,r.g2)("v-progress-linear"),y=(0,r.g2)("v-form"),L=(0,r.g2)("v-container"),w=(0,r.g2)("v-card-actions"),C=(0,r.g2)("v-dialog"),D=(0,r.g2)("v-file-input"),E=(0,r.g2)("v-spacer");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(L,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(g,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{class:"d-flex justify-space-between align-center flex-wrap"},{default:(0,r.k6)((()=>[t[21]||(t[21]=(0,r.Lk)("h1",{class:"table-title"},"STUDENT MANAGEMENT",-1)),(0,r.Lk)("div",Mn,[(0,r.bF)(c,{icon:"",onClick:l.refreshReaders,class:"refresh-reader-btn",title:"Refresh Readers"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{color:"white"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("mdi-refresh")]))),_:1,__:[16]})])),_:1},8,["onClick"]),(0,r.bF)(u,{modelValue:n.selectedReader,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedReader=e),items:n.readers,"item-title":"name","item-value":"serialNumber",label:"Select Reader",density:"compact","hide-details":"",outlined:"",dark:"",placeholder:"No Reader",class:"reader-select",style:{"min-width":"220px"}},null,8,["modelValue","items"]),(0,r.bF)(c,{color:"success",dark:"",onClick:l.openRegistrationDialog,class:"mr-2"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("mdi-account-plus")]))),_:1,__:[17]}),t[18]||(t[18]=(0,r.eW)(" Register Student "))])),_:1,__:[18]},8,["onClick"]),(0,r.bF)(c,{color:"primary",dark:"",onClick:l.openUploadDialog},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("mdi-upload")]))),_:1,__:[19]}),t[20]||(t[20]=(0,r.eW)(" Upload Students "))])),_:1,__:[20]},8,["onClick"])])])),_:1,__:[21]}),(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(g,{cols:n.selectedStudent?8:12},{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"student-list-card"},{default:(0,r.k6)((()=>[(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"mb-1",align:"center"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{cols:"12",class:"d-flex"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:n.filter.department,"onUpdate:modelValue":t[1]||(t[1]=e=>n.filter.department=e),items:n.department,label:"Select Department",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1}),(0,r.bF)(g,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:n.filter.yearLevel,"onUpdate:modelValue":t[2]||(t[2]=e=>n.filter.yearLevel=e),items:n.yearLevels,label:"Select Year Level",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1})])),_:1}),(0,r.bF)(g,{cols:"12",class:"mt-n4"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:n.search,"onUpdate:modelValue":t[3]||(t[3]=e=>n.search=e),"append-icon":"mdi-magnify",label:"Search students...","single-line":"","hide-details":"",outlined:"",dark:"",class:"search-field"},null,8,["modelValue"])])),_:1})])),_:1}),t[23]||(t[23]=(0,r.Lk)("div",{class:"student-list-header"},[(0,r.Lk)("span",{class:"col-fname"},"First Name"),(0,r.Lk)("span",{class:"col-mi"},"M.I."),(0,r.Lk)("span",{class:"col-lname"},"Last Name"),(0,r.Lk)("span",{class:"col-course"},"Course"),(0,r.Lk)("span",{class:"col-year"},"Year Level"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(v,{headers:n.studentHeaders,items:l.filteredStudents,search:n.search,"items-per-page":10,class:"elevation-1 student-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",Tn,(0,h.v_)(e.firstName),1),(0,r.Lk)("td",Pn,(0,h.v_)(e.middleInitial),1),(0,r.Lk)("td",Un,(0,h.v_)(e.lastName),1),(0,r.Lk)("td",$n,(0,h.v_)(e.department),1),(0,r.Lk)("td",Xn,(0,h.v_)(e.yearLevel),1),(0,r.Lk)("td",qn,[(0,r.Lk)("div",Bn,[(0,r.bF)(c,{small:"",color:"teal",dark:"",onClick:t=>l.openFingerprintDialog(e),class:"action-btn"},{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)(" Fingerprint ")]))),_:2,__:[22]},1032,["onClick"])])])])])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",Hn,[(0,r.bF)(k,{modelValue:n.page,"onUpdate:modelValue":t[4]||(t[4]=e=>n.page=e),length:n.pageCount,"total-visible":5,color:"primary",dark:"",class:"custom-pagination"},null,8,["modelValue","length"])])])),_:1},8,["headers","items","search"])])),_:1,__:[23]})])),_:1})])),_:1},8,["cols"]),n.selectedStudent||n.isNewStudent?((0,r.uX)(),(0,r.Wv)(g,{key:0,cols:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"fine-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Yn,[(0,r.bF)(m,{class:"details-title white--text"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.isNewStudent?"New Student Registration":n.selectedStudent.firstName+" "+n.selectedStudent.lastName),1)])),_:1})]),(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.bF)(y,{onSubmit:(0,i.D$)(l.handleRegistration,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(p,{modelValue:n.editForm.firstName,"onUpdate:modelValue":t[5]||(t[5]=e=>n.editForm.firstName=e),label:"First Name",outlined:"",dense:"",class:"mb-2 white--text",color:"white"},null,8,["modelValue"]),(0,r.bF)(p,{modelValue:n.editForm.middleInitial,"onUpdate:modelValue":t[6]||(t[6]=e=>n.editForm.middleInitial=e),label:"Middle Initial",outlined:"",dense:"",class:"mb-2 white--text",maxlength:"1",color:"white"},null,8,["modelValue"]),(0,r.bF)(p,{modelValue:n.editForm.lastName,"onUpdate:modelValue":t[7]||(t[7]=e=>n.editForm.lastName=e),label:"Last Name",outlined:"",dense:"",class:"mb-2 white--text",color:"white"},null,8,["modelValue"]),(0,r.bF)(u,{modelValue:n.editForm.department,"onUpdate:modelValue":t[8]||(t[8]=e=>n.editForm.department=e),items:n.department.filter((e=>"All"!==e)),label:"Department",outlined:"",dense:"",class:"mb-2 white--text",color:"white"},null,8,["modelValue","items"]),(0,r.bF)(u,{modelValue:n.editForm.yearLevel,"onUpdate:modelValue":t[9]||(t[9]=e=>n.editForm.yearLevel=e),items:n.yearLevels.filter((e=>"All"!==e)),label:"Year Level",outlined:"",dense:"",class:"mb-2 white--text",color:"white"},null,8,["modelValue","items"]),(0,r.Lk)("div",On,[n.statusMessage?((0,r.uX)(),(0,r.Wv)(_,{key:0,color:n.fingerprintCaptured?"success":"info",dense:"",outlined:"",class:"mb-2",style:{"background-color":"rgba(255, 255, 255, 0.05)",color:"white"}},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.statusMessage),1)])),_:1},8,["color"])):(0,r.Q3)("",!0),(0,r.bF)(c,{color:"cyan darken-2",disabled:n.enrollmentStarted,onClick:l.startFingerprintEnrollment,class:"mb-2",block:"",dark:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)("mdi-fingerprint")]))),_:1,__:[24]}),t[25]||(t[25]=(0,r.eW)(" Start Fingerprint Enrollment "))])),_:1,__:[25]},8,["disabled","onClick"]),n.fingerprintLoading?((0,r.uX)(),(0,r.Wv)(S,{key:1,value:n.fingerprintProgress,height:"25",color:"teal lighten-2",class:"mt-4 fingerprint-progress-bar",rounded:"","background-color":"rgba(255,255,255,0.1)"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",jn,(0,h.v_)(n.fingerprintProgress)+"%",1)])),_:1},8,["value"])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Qn,[(0,r.bF)(c,{type:"submit",color:"success",dark:""},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.eW)("Complete Registration")]))),_:1,__:[26]}),(0,r.bF)(c,{onClick:l.cancelRegistration,class:"ml-2",dark:""},{default:(0,r.k6)((()=>t[27]||(t[27]=[(0,r.eW)("Cancel")]))),_:1,__:[27]},8,["onClick"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(C,{modelValue:n.responseDialog,"onUpdate:modelValue":t[11]||(t[11]=e=>n.responseDialog=e),"max-width":"400",class:"response-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:(0,h.C4)(["pa-4","response-dialog-card","success"===n.responseType?"response-success":"response-error"])},{default:(0,r.k6)((()=>[(0,r.bF)(m,{class:"d-flex align-center"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{color:"success"===n.responseType?"green":"red",class:"mr-2"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.responseIcon),1)])),_:1},8,["color"]),(0,r.Lk)("span",zn,(0,h.v_)(n.responseTitle),1)])),_:1}),(0,r.bF)(b,{class:"pt-2"},{default:(0,r.k6)((()=>[(0,r.Lk)("p",Kn,(0,h.v_)(n.responseMessage),1)])),_:1}),(0,r.bF)(w,{class:"justify-end"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{text:"",onClick:t[10]||(t[10]=e=>n.responseDialog=!1)},{default:(0,r.k6)((()=>t[28]||(t[28]=[(0,r.eW)("OK")]))),_:1,__:[28]})])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue"]),(0,r.bF)(C,{modelValue:n.uploadDialog,"onUpdate:modelValue":t[14]||(t[14]=e=>n.uploadDialog=e),"max-width":"600",dark:""},{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"upload-dialog dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{class:"headline white--text"},{default:(0,r.k6)((()=>t[29]||(t[29]=[(0,r.eW)("Upload Students")]))),_:1,__:[29]}),(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",Gn,[(0,r.bF)(D,{modelValue:n.uploadFile,"onUpdate:modelValue":t[12]||(t[12]=e=>n.uploadFile=e),label:"SELECT FILE",accept:".xlsx",outlined:"",dark:"","prepend-icon":"mdi-paperclip",class:"centered-file-input"},null,8,["modelValue"])])])),_:1}),(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.bF)(E),(0,r.bF)(c,{color:"primary",dark:"",onClick:l.uploadStudents},{default:(0,r.k6)((()=>t[30]||(t[30]=[(0,r.eW)("Upload")]))),_:1,__:[30]},8,["onClick"]),(0,r.bF)(c,{text:"",dark:"",onClick:t[13]||(t[13]=e=>n.uploadDialog=!1)},{default:(0,r.k6)((()=>t[31]||(t[31]=[(0,r.eW)("Cancel")]))),_:1,__:[31]})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(C,{modelValue:n.fingerprintDialog,"onUpdate:modelValue":t[15]||(t[15]=e=>n.fingerprintDialog=e),"max-width":"500",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"fingerprint-dialog dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{class:"text-center white--text"},{default:(0,r.k6)((()=>[t[32]||(t[32]=(0,r.Lk)("h2",null,"Fingerprint Enrollment",-1)),(0,r.Lk)("div",Jn,(0,h.v_)(n.fingerprintStudent.firstName)+" "+(0,h.v_)(n.fingerprintStudent.lastName),1)])),_:1,__:[32]}),(0,r.bF)(b,{class:"text-center white--text"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{"x-large":"",class:"mb-4 fingerprint-icon"},{default:(0,r.k6)((()=>t[33]||(t[33]=[(0,r.eW)("mdi-fingerprint")]))),_:1,__:[33]}),(0,r.Lk)("p",Zn,(0,h.v_)(n.fingerprintMessage),1),n.fingerprintLoading?((0,r.uX)(),(0,r.CE)("div",el,[(0,r.Lk)("div",tl,[(0,r.Lk)("div",{class:"progress-bar",style:(0,h.Tr)({width:n.fingerprintProgress+"%"})},null,4),(0,r.Lk)("span",al,(0,h.v_)(Math.round(n.fingerprintProgress))+"% Complete",1)]),(0,r.Lk)("div",sl,[e.isScanning?((0,r.uX)(),(0,r.CE)("div",nl,t[34]||(t[34]=[(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1)]))):(0,r.Q3)("",!0)])])):((0,r.uX)(),(0,r.Wv)(c,{key:1,color:"primary",class:"mt-4",onClick:l.startFingerprintProcess,block:"",dark:""},{default:(0,r.k6)((()=>t[35]||(t[35]=[(0,r.eW)(" Start Enrollment ")]))),_:1,__:[35]},8,["onClick"]))])),_:1}),(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.bF)(E),(0,r.bF)(c,{color:"error",onClick:l.cancelFingerprintEnrollment,disabled:n.fingerprintLoading,dark:""},{default:(0,r.k6)((()=>t[36]||(t[36]=[(0,r.eW)(" Cancel ")]))),_:1,__:[36]},8,["onClick","disabled"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],4)])}var il=a.p+"media/scan-beep.34558ef1.mp3",rl=a.p+"media/success-sound.9f1291c2.mp3",ol={components:{PageHeader:Ls},data(){return{availableReaders:[],reader:null,readers:[],scanAudio:null,successAudio:null,selectedReader:null,enrollmentStarted:!1,enrollScanStep:0,indexFingerSamples:[],middleFingerSamples:[],currentEnrollFinger:"index",fingerprintCaptured:!1,fingerprintDialog:!1,fingerprintStudent:{},fingerprintLoading:!1,fingerprintMessage:"Enrolling Fingerprint Requires 8 scans",fingerprintProgress:0,backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",isNewStudent:!1,responseDialog:!1,responseType:"success",responseTitle:"",responseMessage:"",responseIcon:"",students:[],selectedStudent:null,editForm:{firstName:"",lastName:"",middleInitial:"",department:"",yearLevel:""},filter:{course:null,yearLevel:null},search:"",uploadDialog:!1,uploadFile:null,statusMessage:"",department:["All","BSIT","BSIS","BSCS","BSIT-DB","BSIT-MM"],yearLevels:["All","1st Year","2nd Year","3rd Year","4th Year"],studentHeaders:[{text:"First Name",value:"firstName",align:"center",width:"20%"},{text:"M.I.",value:"middleInitial",align:"center",width:"20%"},{text:"Last Name",value:"lastName",align:"center",width:"20%"},{text:"Course",value:"department",align:"center",width:"20%"},{text:"Year Level",value:"yearLevel",align:"center",width:"20%"},{text:"Actions",value:"actions",align:"center",width:"20%",sortable:!1}],page:1,pageCount:3}},async mounted(){this.scanAudio=new Audio(il),this.successAudio=new Audio(rl),await this.fetchStudents();try{if(!window.Fingerprint?.WebApi)throw new Error("Fingerprint SDK not available");console.log("✅ SDK available"),this.reader=new window.Fingerprint.WebApi,this.reader.onDeviceConnected=()=>this.statusMessage="Device connected. Ready to scan.",this.reader.onDeviceDisconnected=()=>this.statusMessage="Device disconnected.",this.reader.onCommunicationFailed=()=>this.statusMessage="Communication with reader failed.",this.reader.onSamplesAcquired=this.handleEnrollmentSample;const e=await this.reader.enumerateDevices();this.readers=e,this.selectedReader=e[0]?.serialNumber||null,this.statusMessage=e.length?"Select a reader":"No fingerprint readers found",console.log("📡 Available readers:",e)}catch(e){console.error("❌ SDK init error:",e),this.statusMessage=`SDK error: ${e.message}`,this.showLiteClientLink=!0}},computed:{filteredStudents(){return this.students.filter((e=>("All"===this.filter.department||!this.filter.department||e.department===this.filter.department)&&("All"===this.filter.yearLevel||!this.filter.yearLevel||e.yearLevel===this.filter.yearLevel)&&(""===this.search||e.firstName.toLowerCase().includes(this.search.toLowerCase())||e.lastName.toLowerCase().includes(this.search.toLowerCase())||e.department.toLowerCase().includes(this.search.toLowerCase())||e.yearLevel.toLowerCase().includes(this.search.toLowerCase()))))},backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}}},methods:{async refreshReaders(){try{if(!window.Fingerprint?.WebApi)throw new Error("Fingerprint SDK not available");console.log("✅ SDK available"),this.reader=new window.Fingerprint.WebApi,this.reader.onDeviceConnected=()=>{this.statusMessage="Device connected. Ready to scan."},this.reader.onDeviceDisconnected=()=>{this.statusMessage="Device disconnected."},this.reader.onCommunicationFailed=()=>{this.statusMessage="Communication with reader failed."},this.reader.onSamplesAcquired=this.handleEnrollmentSample;const e=await this.reader.enumerateDevices();this.readers=e,this.selectedReader=e[0]?.serialNumber||null,this.statusMessage=e.length?"Select a reader":"No fingerprint readers found",console.log("📡 Available readers:",e)}catch(e){console.error("❌ SDK init error:",e),this.statusMessage=`SDK error: ${e.message}`,this.showLiteClientLink=!0}},async fetchStudents(){try{const e=await Ee.getStudents();this.students=e.data}catch(e){console.error("Error fetching students:",e)}},openRegistrationDialog(){this.selectedStudent={},this.isNewStudent=!0,this.editForm={firstName:"",middleInitial:"",lastName:"",department:"",yearLevel:""},this.fingerprintCaptured=!1,this.statusMessage="",this.fingerprintProgress=0,this.enrollmentStarted=!1},cancelRegistration(){this.selectedStudent=null,this.isNewStudent=!1,this.editForm={firstName:"",middleInitial:"",lastName:"",department:"",yearLevel:""},this.fingerprintCaptured=!1,this.statusMessage="",this.fingerprintProgress=0,this.enrollmentStarted=!1},openUploadDialog(){this.uploadDialog=!0,this.uploadFile=null},openFingerprintDialog(e){this.fingerprintStudent={...e},this.fingerprintDialog=!0,this.fingerprintLoading=!1,this.fingerprintMessage="Enrolling Fingerprint Requires 8 scans",this.fingerprintProgress=0},completeFingerprintEnrollment(){this.fingerprintMessage="Fingerprint enrolled successfully!",setTimeout((()=>{this.fingerprintDialog=!1,this.$toast&&this.$toast.success("Fingerprint enrollment completed"),setTimeout((()=>{window.location.reload()}),500)}),1500)},showResponse(e,t,a){this.responseType=e,this.responseTitle=t,this.responseMessage=a,this.responseIcon="success"===e?"mdi-check-circle":"mdi-alert-circle",this.responseDialog=!0},async handleRegistration(){if(!this.fingerprintCaptured)return void this.showResponse("error","Missing Fingerprint","Please complete fingerprint enrollment first.");const e={...this.editForm,middleInitial:this.editForm.middleInitial?.trim().charAt(0).toUpperCase()||"",enrolled_index_finger_data:this.indexFingerSamples,enrolled_middle_finger_data:this.middleFingerSamples};if(e.firstName&&e.lastName&&e.department&&e.yearLevel)try{const t=await Ee.createStudent(e);if(t.data.error)return void this.showResponse("error","Registration Failed",t.data.error);this.showResponse("success","Success","Student registered successfully"),await this.fetchStudents(),this.resetForm()}catch(t){const e=t.response?.data?.message||"Registration failed due to server error";this.showResponse("error","Error",e)}else this.showResponse("error","Validation Error","Please fill all required fields")},validateRegistrationForm(){return this.editForm.firstName.trim()&&this.editForm.lastName.trim()&&this.editForm.department&&this.editForm.yearLevel},resetForm(){this.selectedStudent=null,this.isNewStudent=!1,this.editForm={firstName:"",lastName:"",middleInitial:"",department:"",yearLevel:""}},async uploadStudents(){try{if(!this.uploadFile)return void this.showResponse("error","Upload Error","Please select a file first");const e=await Ee.uploadStudents(this.uploadFile);if(e.data.error)return void this.showResponse("error","Upload Failed",e.data.error);this.showResponse("success","Success",`${e.data.count} students uploaded successfully`),await this.fetchStudents(),this.uploadDialog=!1,this.uploadFile=null}catch(e){const t=e.response?.data?.message||"File upload failed";this.showResponse("error","Upload Error",t)}},async startFingerprintEnrollment(){if(this.readers&&this.selectedReader){this.enrollScanStep=0,this.indexFingerSamples=[],this.middleFingerSamples=[],this.currentEnrollFinger="index",this.enrollmentStarted=!0,this.statusMessage="Starting enrollment... Scan 0/4 for index finger",this.fingerprintProgress=0;try{await this.reader.startAcquisition(window.Fingerprint.SampleFormat.Intermediate,this.selectedReader)}catch(e){this.statusMessage=`Failed to start acquisition: ${e.message}`}}else this.statusMessage="No reader selected"},async handleEnrollmentSample(e){const t=JSON.parse(e.samples)[0].Data;"index"===this.currentEnrollFinger?this.indexFingerSamples.push(t):this.middleFingerSamples.push(t),this.enrollScanStep++,this.fingerprintProgress=Math.floor(this.enrollScanStep/4*100),this.statusMessage=`Scan ${this.enrollScanStep+1}/4 for ${this.currentEnrollFinger} finger`,4===this.enrollScanStep&&("index"===this.currentEnrollFinger?(this.currentEnrollFinger="middle",this.enrollScanStep=0,this.statusMessage="Now scan 0/4 for middle finger"):(await this.reader.stopAcquisition(),this.enrollmentStarted=!1,this.statusMessage="Fingerprint enrollment completed",this.fingerprintCaptured=!0))},async startFingerprintProcess(){if(this.readers&&this.selectedReader)if(this.fingerprintStudent?.id){this.fingerprintLoading=!0,this.enrollScanStep=0,this.indexFingerSamples=[],this.middleFingerSamples=[],this.currentEnrollFinger="index",this.fingerprintMessage="MAKE SURE TO KEEP YOUR FINGER CONSISTENTLY FLAT FACE ON THE READER",this.fingerprintProgress=0;try{const e=this.reader,t=window.Fingerprint.SampleFormat.Intermediate;e.onSamplesAcquired=null,await e.startAcquisition(t,this.selectedReader),e.onSamplesAcquired=async t=>{const a=JSON.parse(t.samples)[0].Data;"index"===this.currentEnrollFinger?this.indexFingerSamples.push(a):this.middleFingerSamples.push(a),this.enrollScanStep++;const s="index"===this.currentEnrollFinger?this.enrollScanStep:this.enrollScanStep+4;if(this.fingerprintProgress=Math.floor(s/8*100),this.fingerprintMessage=`Scan ${this.enrollScanStep}/4 for this finger `,4===this.enrollScanStep)if("index"===this.currentEnrollFinger)this.currentEnrollFinger="middle",this.enrollScanStep=0,this.fingerprintMessage="Now scan 0/4 for this finger";else{try{await e.stopAcquisition()}catch(n){console.warn("Failed to stop acquisition:",n)}e.onSamplesAcquired=null,this.fingerprintMessage="Sending to backend...";const t={studentId:this.fingerprintStudent.id,enrolled_index_finger_data:this.indexFingerSamples,enrolled_middle_finger_data:this.middleFingerSamples};try{console.log("Enroll Payload:",t);const e=await Ee.EnrollExist(t);if(e.data?.error){const t="string"===typeof e.data.error?e.data.error:"Unknown error during enrollment";return this.showResponse("error","Registration Failed",t),void this.resetFingerprintState()}this.showResponse("success","Enrollment Complete","Fingerprint enrolled successfully."),await this.fetchStudents(),this.completeFingerprintEnrollment()}catch(l){const e=l.response?.data?.message||"Registration failed due to server error";this.showResponse("error","Error",e)}await this.fetchStudents(),this.resetFingerprintState(),this.resetForm()}}}catch(e){this.showResponse("error","Acquisition Failed",e.message||"Error during fingerprint acquisition"),await(this.safeStopAcquisition?.()),this.resetFingerprintState()}this.isScanning=!0,this.playScanSound()}else this.showResponse("error","Missing Student","Please select a valid student.");else this.showResponse("Try again","No reader selected","Please Select a reader")},playScanSound(){this.scanAudio&&(this.scanAudio.currentTime=0,this.scanAudio.play().catch((e=>console.log("Sound play error",e))))},playSuccessSound(){this.successAudio&&this.successAudio.play().catch((e=>console.log("Sound play error",e)))},resetFingerprintState(){this.fingerprintLoading=!1,this.fingerprintProgress=0,this.fingerprintMessage="Ready to enroll fingerprint"},cancelFingerprintEnrollment(){this.fingerprintLoading&&this.showResponse("warning","Warning","Enrollment process was interrupted"),this.resetFingerprintState(),this.fingerprintDialog=!1}}};const dl=(0,c.A)(ol,[["render",ll],["__scopeId","data-v-dd4aae86"]]);var cl=dl;const ul={class:"col-name text-left"},ml={class:"col-sem text-left"},gl={class:"col-fee text-left"},hl={class:"col-date text-left"},pl={class:"col-actions text-center"},fl={class:"action-buttons"};function kl(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-icon"),c=(0,r.g2)("v-btn"),u=(0,r.g2)("v-card-title"),m=(0,r.g2)("v-data-table"),g=(0,r.g2)("v-card-text"),p=(0,r.g2)("v-card"),f=(0,r.g2)("v-col"),k=(0,r.g2)("v-row"),v=(0,r.g2)("v-container"),b=(0,r.g2)("v-text-field"),F=(0,r.g2)("v-select"),_=(0,r.g2)("v-form"),S=(0,r.g2)("v-spacer"),y=(0,r.g2)("v-card-actions"),L=(0,r.g2)("v-dialog"),w=(0,r.g2)("v-main"),C=(0,r.g2)("v-layout"),D=(0,r.g2)("v-app");return(0,r.uX)(),(0,r.Wv)(D,null,{default:(0,r.k6)((()=>[(0,r.bF)(o),(0,r.bF)(C,null,{default:(0,r.k6)((()=>[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.bF)(k,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>[t[12]||(t[12]=(0,r.Lk)("h1",{class:"table-title"},"Event Management",-1)),(0,r.bF)(c,{color:"teal",dark:"",onClick:l.openCreateDialog},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.eW)("mdi-plus")]))),_:1,__:[10]}),t[11]||(t[11]=(0,r.eW)(" Create New Event "))])),_:1,__:[11]},8,["onClick"])])),_:1,__:[12]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[t[17]||(t[17]=(0,r.Lk)("div",{class:"event-list-header"},[(0,r.Lk)("span",{class:"col-name"},"Event Name"),(0,r.Lk)("span",{class:"col-sem"},"Semester"),(0,r.Lk)("span",{class:"col-fee"},"Fee Amount"),(0,r.Lk)("span",{class:"col-date"},"Date"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(m,{headers:n.tableHeaders,items:n.events,"items-per-page":-1,"hide-default-footer":!0,class:"elevation-1 event-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",ul,(0,h.v_)(e.name),1),(0,r.Lk)("td",ml,(0,h.v_)(e.semester),1),(0,r.Lk)("td",gl,"₱"+(0,h.v_)(e.fee),1),(0,r.Lk)("td",hl,(0,h.v_)(l.formatDate(e.date)),1),(0,r.Lk)("td",pl,[(0,r.Lk)("div",fl,[(0,r.bF)(c,{small:"",color:"primary",onClick:t=>l.initiateEdit(e)},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("mdi-pencil")]))),_:1,__:[13]}),t[14]||(t[14]=(0,r.eW)(" Edit "))])),_:2,__:[14]},1032,["onClick"]),(0,r.bF)(c,{small:"",color:"error",onClick:t=>l.confirmDeletion(e)},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("mdi-delete")]))),_:1,__:[15]}),t[16]||(t[16]=(0,r.eW)(" Remove "))])),_:2,__:[16]},1032,["onClick"])])])])])),_:1},8,["headers","items"])])),_:1,__:[17]})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(L,{modelValue:n.createDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>n.createDialog=e),"max-width":"600",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"fine-card"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)("Create New Event")]))),_:1,__:[18]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,{ref:"creationForm",onSubmit:(0,i.D$)(l.submitNewEvent,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(b,{modelValue:n.newEvent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.newEvent.name=e),label:"Event Name",outlined:"",dark:"",rules:[e=>!!e||"Event name is required"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(F,{modelValue:n.newEvent.semester,"onUpdate:modelValue":t[1]||(t[1]=e=>n.newEvent.semester=e),items:n.semesters.filter((e=>"All"!==e)),label:"Semester",outlined:"",dense:"",dark:"","hide-details":"",rules:[e=>!!e||"Semester is required"],required:""},null,8,["modelValue","items","rules"]),(0,r.bF)(b,{modelValue:n.newEvent.fee,"onUpdate:modelValue":t[2]||(t[2]=e=>n.newEvent.fee=e),label:"Fee Amount",type:"number",prefix:"₱",outlined:"",dark:"",rules:[e=>!!e||"Fee is required",e=>e>=0||"Fee must be positive"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(b,{modelValue:n.newEvent.date,"onUpdate:modelValue":t[3]||(t[3]=e=>n.newEvent.date=e),label:"Date",type:"date",outlined:"",dark:"",rules:[e=>!!e||"Date is required"],required:""},null,8,["modelValue","rules"])])),_:1},8,["onSubmit"])])),_:1}),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(S),(0,r.bF)(c,{color:"secondary",onClick:l.closeCreateDialog},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("Cancel")]))),_:1,__:[19]},8,["onClick"]),(0,r.bF)(c,{color:"teal",dark:"",onClick:l.submitNewEvent},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("Create")]))),_:1,__:[20]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(L,{modelValue:n.editDialog,"onUpdate:modelValue":t[9]||(t[9]=e=>n.editDialog=e),"max-width":"600",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"fine-card"},{default:(0,r.k6)((()=>[(0,r.bF)(u,null,{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("Edit Event")]))),_:1,__:[21]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,{ref:"editForm",onSubmit:(0,i.D$)(l.updateEvent,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(b,{modelValue:n.editingEvent.name,"onUpdate:modelValue":t[5]||(t[5]=e=>n.editingEvent.name=e),label:"Event Name",outlined:"",dark:"",rules:[e=>!!e||"Event name is required"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(F,{modelValue:n.editingEvent.semester,"onUpdate:modelValue":t[6]||(t[6]=e=>n.editingEvent.semester=e),items:n.semesters.filter((e=>"All"!==e)),label:"Semester",outlined:"",dense:"",dark:"","hide-details":"",rules:[e=>!!e||"Semester is required"],required:""},null,8,["modelValue","items","rules"]),(0,r.bF)(b,{modelValue:n.editingEvent.fee,"onUpdate:modelValue":t[7]||(t[7]=e=>n.editingEvent.fee=e),label:"Fee Amount",type:"number",prefix:"₱",outlined:"",dark:"",rules:[e=>!!e||"Fee is required",e=>e>=0||"Fee must be positive"],required:""},null,8,["modelValue","rules"]),(0,r.bF)(b,{modelValue:n.editingEvent.date,"onUpdate:modelValue":t[8]||(t[8]=e=>n.editingEvent.date=e),label:"Date",type:"date",outlined:"",dark:"",rules:[e=>!!e||"Date is required"],required:""},null,8,["modelValue","rules"])])),_:1},8,["onSubmit"])])),_:1}),(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(S),(0,r.bF)(c,{color:"secondary",onClick:l.closeEditDialog},{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)("Cancel")]))),_:1,__:[22]},8,["onClick"]),(0,r.bF)(c,{color:"teal",dark:"",onClick:l.updateEvent},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Save")]))),_:1,__:[23]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],4)])),_:1})])),_:1})])),_:1})}var vl={components:{PageHeader:Ve},async mounted(){await this.fetchEvents()},data(){return{sidebarButtons:[{text:"Dashboard",route:"Home",icon:"mdi-view-dashboard"},{text:"Manage Student",route:"manage-students",icon:"mdi-account-group"},{text:"Manage Event",route:"manage-events",icon:"mdi-calendar-multiple"},{text:"History Log",route:"history-log",icon:"mdi-history"}],backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",createDialog:!1,editDialog:!1,attendanceDialog:!1,searchQuery:"",filter:{semester:"All"},semesters:["All","1st Semester","2nd Semester","Summer"],newEvent:{name:"",semester:"1st Semester",fee:"",date:""},editingEvent:{id:null,name:"",semester:"",fee:"",date:""},currentEvent:{id:null,name:""},isScanning:!1,scanResult:null,instructionText:"Place your finger on the sensor to scan",events:[],tableHeaders:[{text:"Event Name",value:"name"},{text:"Semester",value:"semester"},{text:"Fee Amount",value:"fee"},{text:"Date",value:"date"},{text:"Actions",value:"actions",sortable:!1}]}},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}},filteredEvents(){let e=this.events;if("All"!==this.filter.semester&&(e=e.filter((e=>e.semester===this.filter.semester))),this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.semester.toLowerCase().includes(t)||e.fee.toString().includes(t)||this.formatDate(e.date).toLowerCase().includes(t)))}return e}},methods:{navigateTo(e){this.$router.push({name:e})},formatDate(e){return e?(0,lt.GP)(new Date(e),"MMM dd, yyyy"):"N/A"},openCreateDialog(){this.createDialog=!0},closeCreateDialog(){this.createDialog=!1,this.$refs.creationForm?.reset(),this.newEvent={name:"",semester:"1st Semester",fee:0,date:""}},async fetchEvents(){try{const e=await Ee.getEvents();this.events=e.data}catch(e){console.error("Error fetching events:",e)}},async submitNewEvent(){if(this.$refs.creationForm.validate())try{const e=await Ee.createEvent(this.newEvent);this.events.push(e.data),this.closeCreateDialog()}catch(e){console.error("Failed to create event:",e)}},initiateEdit(e){this.editingEvent={...e},this.editDialog=!0},closeEditDialog(){this.editDialog=!1,this.$refs.editForm?.reset(),this.editingEvent={id:null,name:"",semester:"",fee:"",date:""}},async updateEvent(){if(!this.$refs.editForm.validate())return;const e=this.events.findIndex((e=>e.id===this.editingEvent.id));-1!==e&&this.events.splice(e,1,{...this.editingEvent,fee:parseFloat(this.editingEvent.fee)}),this.closeEditDialog()},confirmDeletion(e){confirm(`Are you sure you want to delete "${e.name}"?`)&&(this.events=this.events.filter((t=>t.id!==e.id)))},openAttendanceDialog(e){this.currentEvent={id:e.id,name:e.name},this.attendanceDialog=!0,this.resetScanner()},closeAttendanceDialog(){this.attendanceDialog=!1,this.resetScanner()},resetScanner(){this.isScanning=!1,this.scanResult=null,this.instructionText="Place your finger on the sensor to scan"},startScan(){this.isScanning||(this.isScanning=!0,this.scanResult=null,this.instructionText="Scanning in progress...",setTimeout((()=>{this.isScanning=!1;const e=Math.random()>.2;this.scanResult={success:e,message:e?"Attendance recorded successfully!":"Scan failed. Fingerprint not recognized."},this.instructionText=e?"Scan completed successfully":"Scan failed. Please try again.",e&&setTimeout((()=>{this.scanResult=null,this.instructionText="Place your finger on the sensor to scan"}),3e3)}),2e3))}}};const bl=(0,c.A)(vl,[["render",kl],["__scopeId","data-v-607b36e6"]]);var Fl=bl;const _l={class:"d-flex align-center flex-wrap",style:{gap:"12px"}},Sl={key:0,class:"status-message"},yl={class:"fingerprint-animation"},Ll={key:0,class:"loading-dots"},wl={key:1,class:"result-display"},Cl={key:0,class:"success-result"},Dl={key:1,class:"error-result"},El={class:"col-fname text-center"},Al={class:"col-mi text-center"},xl={class:"col-lname text-center"},Vl={class:"col-course text-center"},Nl={class:"col-actions text-center"},Wl={key:0,class:"action-buttons"},Rl={key:1},Il={class:"mt-1"},Ml={class:"text-center pt-2"},Tl={class:"error-message"};function Pl(e,t,a,s,n,l){const i=(0,r.g2)("page-header"),o=(0,r.g2)("v-select"),d=(0,r.g2)("v-icon"),c=(0,r.g2)("v-btn"),u=(0,r.g2)("v-card-title"),m=(0,r.g2)("v-card-text"),g=(0,r.g2)("v-spacer"),p=(0,r.g2)("v-card-actions"),f=(0,r.g2)("v-card"),k=(0,r.g2)("v-dialog"),v=(0,r.g2)("v-col"),b=(0,r.g2)("v-text-field"),F=(0,r.g2)("v-row"),_=(0,r.g2)("v-pagination"),S=(0,r.g2)("v-data-table"),y=(0,r.g2)("v-container"),L=(0,r.g2)("v-date-picker"),w=(0,r.g2)("v-menu"),C=(0,r.g2)("v-form");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",null,[(0,r.bF)(i),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,null,{default:(0,r.k6)((()=>[(0,r.bF)(v,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"d-flex justify-space-between align-center flex-wrap"},{default:(0,r.k6)((()=>[t[19]||(t[19]=(0,r.Lk)("h1",{class:"table-title"},"ATTENDANCE MANAGEMENT",-1)),(0,r.Lk)("div",_l,[(0,r.bF)(o,{modelValue:n.selectedReader,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedReader=e),items:n.readers,"item-title":"name","item-value":"serialNumber",label:"Select Reader",density:"compact","hide-details":"",outlined:"",dark:"",placeholder:"No Reader",class:"reader-select",style:{"min-width":"220px"}},null,8,["modelValue","items"]),(0,r.bF)(c,{onClick:l.startFingerprintIdentification,color:"primary",class:"mb-4",disabled:!n.selectedEvent},{default:(0,r.k6)((()=>[(0,r.bF)(d,{left:""},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("mdi-fingerprint")]))),_:1,__:[17]}),t[18]||(t[18]=(0,r.eW)(" Identify via Fingerprint "))])),_:1,__:[18]},8,["onClick","disabled"])])])),_:1,__:[19]}),(0,r.bF)(k,{modelValue:n.fingerprintDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.fingerprintDialog=e),"max-width":"600",persistent:""},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"fingerprint-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"headline"},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("Fingerprint Identification")]))),_:1,__:[20]}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[n.fingerprintStatusMessage?((0,r.uX)(),(0,r.CE)("div",Sl,(0,h.v_)(n.fingerprintStatusMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",yl,[(0,r.Lk)("div",{class:(0,h.C4)(["fingerprint-icon",{scanning:n.isScanning}])},t[21]||(t[21]=[(0,r.Lk)("i",{class:"fas fa-fingerprint"},null,-1)]),2),n.isScanning?((0,r.uX)(),(0,r.CE)("div",Ll,t[22]||(t[22]=[(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1),(0,r.Lk)("span",null,null,-1)]))):(0,r.Q3)("",!0)]),n.identificationResult?((0,r.uX)(),(0,r.CE)("div",wl,[n.identificationResult.success?((0,r.uX)(),(0,r.CE)("div",Cl,t[23]||(t[23]=[(0,r.Lk)("h3",null,[(0,r.Lk)("i",{class:"fas fa-check-circle"}),(0,r.eW)(" Student Attended")],-1)]))):((0,r.uX)(),(0,r.CE)("div",Dl,[t[24]||(t[24]=(0,r.Lk)("h3",null,[(0,r.Lk)("i",{class:"fas fa-times-circle"}),(0,r.eW)("Failed, Try Again")],-1)),(0,r.Lk)("p",null,(0,h.v_)(n.identificationResult.message||"No matching fingerprint found."),1)]))])):(0,r.Q3)("",!0)])),_:1}),(0,r.bF)(p,null,{default:(0,r.k6)((()=>[(0,r.bF)(g),(0,r.bF)(c,{color:"error",onClick:l.closeFingerprintDialog},{default:(0,r.k6)((()=>t[25]||(t[25]=[(0,r.eW)("Close")]))),_:1,__:[25]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,null,{default:(0,r.k6)((()=>[(0,r.bF)(v,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"student-list-card"},{default:(0,r.k6)((()=>[(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"mb-1",align:"center",dense:""},{default:(0,r.k6)((()=>[(0,r.bF)(v,{cols:"12",sm:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:n.selectedEvent,"onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedEvent=e),items:n.events,label:"Select Event",outlined:"",dense:"",dark:"","return-object":"","item-title":e=>e.name+" ("+l.formatDate(e.date)+")"},null,8,["modelValue","items","item-title"])])),_:1}),(0,r.bF)(v,{cols:"12",sm:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:n.filter.course,"onUpdate:modelValue":t[3]||(t[3]=e=>n.filter.course=e),items:n.courses,label:"Select Course",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1}),(0,r.bF)(v,{cols:"12",sm:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{modelValue:n.filter.yearLevel,"onUpdate:modelValue":t[4]||(t[4]=e=>n.filter.yearLevel=e),items:n.yearLevels,label:"Select Year Level",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1}),(0,r.bF)(v,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{modelValue:n.searchQuery,"onUpdate:modelValue":t[5]||(t[5]=e=>n.searchQuery=e),label:"Search Name","prepend-inner-icon":"mdi-magnify",dense:"",outlined:"",dark:"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),t[30]||(t[30]=(0,r.Lk)("div",{class:"student-list-header"},[(0,r.Lk)("span",{class:"col-fname"},"First Name"),(0,r.Lk)("span",{class:"col-mi"},"M.I."),(0,r.Lk)("span",{class:"col-lname"},"Last Name"),(0,r.Lk)("span",{class:"col-course"},"Course"),(0,r.Lk)("span",{class:"col-actions"},"Attendance")],-1)),(0,r.bF)(S,{headers:n.studentHeaders,items:l.filteredStudents,"items-per-page":n.itemsPerPage,"v-model":n.page,class:"elevation-1 student-table",dark:"","hide-default-header":""},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",{class:(0,h.C4)(l.getAttendanceClass(e))},[(0,r.Lk)("td",El,(0,h.v_)(e.firstName),1),(0,r.Lk)("td",Al,(0,h.v_)(e.middleInitial),1),(0,r.Lk)("td",xl,(0,h.v_)(e.lastName),1),(0,r.Lk)("td",Vl,(0,h.v_)(e.department),1),(0,r.Lk)("td",Nl,[n.attendanceRecords[e.id]?((0,r.uX)(),(0,r.CE)("div",Rl,[(0,r.bF)(d,{color:"present"===n.attendanceRecords[e.id]?"green":"red"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)("present"===n.attendanceRecords[e.id]?"mdi-check":"mdi-close"),1)])),_:2},1032,["color"]),(0,r.Lk)("div",Il,(0,h.v_)("present"===n.attendanceRecords[e.id]?"Present":"Absent"),1)])):((0,r.uX)(),(0,r.CE)("div",Wl,[(0,r.bF)(c,{small:"",color:"success",onClick:t=>l.markPresent(e),class:"action-btn",disabled:!n.selectedEvent},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.eW)("mdi-check")]))),_:1,__:[26]}),t[27]||(t[27]=(0,r.eW)(" Present "))])),_:2,__:[27]},1032,["onClick","disabled"]),(0,r.bF)(c,{small:"",color:"error",onClick:t=>l.markAbsent(e),class:"action-btn",disabled:!n.selectedEvent},{default:(0,r.k6)((()=>[(0,r.bF)(d,{small:"",left:""},{default:(0,r.k6)((()=>t[28]||(t[28]=[(0,r.eW)("mdi-close")]))),_:1,__:[28]}),t[29]||(t[29]=(0,r.eW)(" Absent "))])),_:2,__:[29]},1032,["onClick","disabled"])]))])],2)])),footer:(0,r.k6)((()=>[(0,r.Lk)("div",Ml,[(0,r.bF)(_,{modelValue:n.page,"onUpdate:modelValue":t[6]||(t[6]=e=>n.page=e),length:l.pageCount,"total-visible":5,color:"primary",dark:""},null,8,["modelValue","length"])])])),_:1},8,["headers","items","items-per-page","v-model"])])),_:1,__:[30]})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(k,{modelValue:n.eventDialog,"onUpdate:modelValue":t[14]||(t[14]=e=>n.eventDialog=e),"max-width":"600"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"event-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"headline"},{default:(0,r.k6)((()=>t[31]||(t[31]=[(0,r.eW)("Add New Event")]))),_:1,__:[31]}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.bF)(C,{ref:"eventForm"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{modelValue:n.newEvent.name,"onUpdate:modelValue":t[7]||(t[7]=e=>n.newEvent.name=e),label:"Event Name",outlined:"",dense:"",class:"mb-2",rules:[e=>!!e||"Event name is required"]},null,8,["modelValue","rules"]),(0,r.bF)(o,{modelValue:n.newEvent.semester,"onUpdate:modelValue":t[8]||(t[8]=e=>n.newEvent.semester=e),items:n.semesters,label:"Semester",outlined:"",dense:"",class:"mb-2",rules:[e=>!!e||"Semester is required"]},null,8,["modelValue","items","rules"]),(0,r.bF)(w,{modelValue:n.dateMenu,"onUpdate:modelValue":t[12]||(t[12]=e=>n.dateMenu=e),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},{activator:(0,r.k6)((({props:e})=>[(0,r.bF)(b,(0,r.v6)({modelValue:n.newEvent.date,"onUpdate:modelValue":t[9]||(t[9]=e=>n.newEvent.date=e),label:"Event Date","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},e,{rules:[e=>!!e||"Date is required"]}),null,16,["modelValue","rules"])])),default:(0,r.k6)((()=>[(0,r.bF)(L,{modelValue:n.newEvent.date,"onUpdate:modelValue":t[10]||(t[10]=e=>n.newEvent.date=e),"no-title":"",onInput:t[11]||(t[11]=e=>n.dateMenu=!1)},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},512)])),_:1}),(0,r.bF)(p,null,{default:(0,r.k6)((()=>[(0,r.bF)(g),(0,r.bF)(c,{color:"primary",onClick:l.saveEvent},{default:(0,r.k6)((()=>t[32]||(t[32]=[(0,r.eW)("Save")]))),_:1,__:[32]},8,["onClick"]),(0,r.bF)(c,{text:"",onClick:t[13]||(t[13]=e=>n.eventDialog=!1)},{default:(0,r.k6)((()=>t[33]||(t[33]=[(0,r.eW)("Cancel")]))),_:1,__:[33]})])),_:1})])),_:1})])),_:1},8,["modelValue"])],4)]),(0,r.bF)(k,{modelValue:n.errorDialog,"onUpdate:modelValue":t[16]||(t[16]=e=>n.errorDialog=e),"max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{class:"error-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{class:"headline"},{default:(0,r.k6)((()=>t[34]||(t[34]=[(0,r.eW)("Error")]))),_:1,__:[34]}),(0,r.bF)(m,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",Tl,(0,h.v_)(n.errorMessage),1)])),_:1}),(0,r.bF)(p,null,{default:(0,r.k6)((()=>[(0,r.bF)(g),(0,r.bF)(c,{color:"primary",text:"",onClick:t[15]||(t[15]=e=>n.errorDialog=!1)},{default:(0,r.k6)((()=>t[35]||(t[35]=[(0,r.eW)("Close")]))),_:1,__:[35]})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var Ul={components:{PageHeader:Ls},data(){return{searchQuery:"",scanAudio:null,successAudio:null,backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",filter:{course:null,yearLevel:null},readers:[],fingerprintDialog:!1,isScanning:!1,fingerprintStatusMessage:"",identificationResult:null,reader:null,selectedReader:null,errorDialog:!1,errorMessage:"",eventDialog:!1,dateMenu:!1,selectedEvent:null,events:[],semesters:["1st Semester","2nd Semester","Summer"],newEvent:{name:"",semester:null,date:null},courses:["All","BSIT","BSIS","BSCS","BS Information Technology (Network Systems)","BS Information Technology (Database Systems)"],yearLevels:["All","1st Year","2nd Year","3rd Year","4th Year"],studentHeaders:[{text:"First Name",value:"firstName",align:"center",width:"20%"},{text:"M.I.",value:"mi",align:"center",width:"5%"},{text:"Last Name",value:"lastName",align:"center",width:"20%"},{text:"Course",value:"course",align:"center",width:"20%"},{text:"Attendance",value:"actions",align:"center",width:"35%",sortable:!1}],students:[],attendanceRecords:{},page:1,itemsPerPage:10}},computed:{backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}},search(){if(!this.searchQuery)return this.students;const e=this.searchQuery.toLowerCase();return this.students.filter((t=>t.firstName.toLowerCase().includes(e)||t.lastName.toLowerCase().includes(e)))},filteredStudents(){const e=this.searchQuery.toLowerCase();return this.students.filter((t=>{const a=`${t.firstName} ${t.lastName}`.toLowerCase().includes(e),s=!this.filter.course||t.department===this.filter.course,n=!this.filter.yearLevel||t.yearLevel===this.filter.yearLevel;return a&&s&&n}))},pageCount(){return Math.ceil(this.filteredStudents.length/this.itemsPerPage)}},watch:{selectedEvent(e){e&&this.fetchAttendanceForEvent(e.eventId)}},async mounted(){this.scanAudio=new Audio(il),this.successAudio=new Audio(rl);try{if(!window.Fingerprint?.WebApi)throw new Error("Fingerprint SDK not available");console.log("✅ SDK available"),this.reader=new window.Fingerprint.WebApi,this.reader.onDeviceConnected=()=>{this.statusMessage="Device connected. Ready to scan."},this.reader.onDeviceDisconnected=()=>{this.statusMessage="Device disconnected.",this.isScanning=!1},this.reader.onCommunicationFailed=()=>{this.statusMessage="Communication with reader failed.",this.isScanning=!1},this.reader.onSamplesAcquired=this.handleEnrollmentSample;const e=await this.reader.enumerateDevices();this.readers=e,this.statusMessage=e.length?"Select a reader":"No fingerprint readers found",console.log("📡 Available readers:",e)}catch(e){console.error("❌ SDK init error:",e),this.statusMessage=`SDK error: ${e.message}`,this.showLiteClientLink=!0}await this.fetchEvents(),await this.fetchStudents()},methods:{playSuccessSound(){this.successAudio&&this.successAudio.play().catch((e=>console.log("Sound play error",e)))},playScanSound(){this.scanAudio&&(this.scanAudio.currentTime=0,this.scanAudio.play().catch((e=>console.log("Sound play error",e))))},getAttendanceClass(e){const t=this.attendanceRecords[e.id];return"present"===t?"present-row":"absent"===t?"absent-row":""},openEventDialog(){this.newEvent={name:"",semester:null,date:null},this.eventDialog=!0,this.$refs.eventForm&&this.$refs.eventForm.resetValidation()},async fetchStudents(){try{const e=await Ee.getStudents();this.students=e.data}catch(e){console.error("Error fetching students:",e),alert("Failed to load students: "+(e.response?.data?.message||e.message))}},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"})},async fetchEvents(){try{const e=await Ee.getEvents();this.events=e.data.map((e=>({...e,_id:e.eventId,name:e.name,date:e.date,semester:e.semester})))}catch(e){console.error("Error fetching events:",e),alert("Failed to load events: "+(e.response?.data?.message||e.message))}},async fetchAttendanceForEvent(e){try{if(!e)return;const t=await Ee.getAttendanceForEvent(e);this.attendanceRecords=t.data}catch(t){this.showError("Failed to load attendance records",t)}},showError(e,t=null){this.errorMessage=e,t&&(this.errorMessage+=`: ${t.response?.data?.error||t.message}`),this.errorDialog=!0},async saveEvent(){if(this.$refs.eventForm.validate())try{const e={name:this.newEvent.name,semester:this.newEvent.semester,date:this.newEvent.date},t=await Ee.createEvent(e),a={...t.data,_id:t.data.eventId,name:t.data.name,date:t.data.date,semester:t.data.semester};this.events.push(a),alert("Event created successfully"),this.eventDialog=!1}catch(e){console.error("Error creating event:",e),alert("Failed to create event: "+(e.response?.data?.error||e.message))}},async markPresent(e){if(this.selectedEvent)try{await this.updateAttendance(e,"present")}catch(t){console.error("Error marking present:",t),alert("Failed to mark student as present: "+(t.message||"Unknown error"))}else alert("Please select an event first")},async markAbsent(e){if(this.selectedEvent)try{await this.updateAttendance(e,"absent")}catch(t){console.error("Error marking absent:",t),alert("Failed to mark student as absent: "+(t.message||"Unknown error"))}else alert("Please select an event first")},async updateAttendance(e,t){if(this.selectedEvent)try{await Ee.updateAttendance({studentId:e.id,eventId:this.selectedEvent.eventId,status:t}),this.attendanceRecords[e.id]=t}catch(a){this.showError("Failed to update attendance",a)}else this.showError("Please select an event first")},async startFingerprintIdentification(){if(this.selectedEvent){this.fingerprintDialog=!0,this.fingerprintStatusMessage="Initializing fingerprint scanner...",this.identificationResult=null;try{if(!window.Fingerprint?.WebApi)throw new Error("Fingerprint SDK not available");this.reader=new window.Fingerprint.WebApi;const e=await this.reader.enumerateDevices();if(0===e.length)throw new Error("No fingerprint readers found");this.selectedReader=e[0],this.fingerprintStatusMessage="Ready to scan. Place your finger on the scanner",this.isScanning=!0,await this.reader.startAcquisition(window.Fingerprint.SampleFormat.Intermediate,this.selectedReader),this.reader.onSamplesAcquired=this.handleFingerprintSample}catch(e){console.error("Fingerprint error:",e),this.fingerprintStatusMessage=`Error: ${e.message}`,this.isScanning=!1}}else this.showError("Please select an event first")},async handleFingerprintSample(e){try{this.playScanSound(),this.isScanning=!1,this.fingerprintStatusMessage="Processing fingerprint...";const t=JSON.parse(e.samples),a=t[0].Data,s=await Ee.identifyFingerprint2({fmd:a});if(s.data.success){this.playSuccessSound();const e=this.students.find((e=>e.id===s.data.student.id));e?(await this.markPresent(e),this.identificationResult={success:!0,name:`${e.firstName} ${e.lastName}`},this.fingerprintStatusMessage=`✅ ${this.identificationResult.name} MARKED`):(this.identificationResult={success:!1,error:"Student not found in the list"},this.fingerprintStatusMessage="❌ Student not found in the list"),setTimeout((()=>{this.identificationResult=null,this.fingerprintStatusMessage="Place your finger on the scanner",this.isScanning=!0}),2e3)}else this.identificationResult={success:!1,error:s.data.message||"Identification failed"},this.fingerprintStatusMessage="❌ Identification failed. Please try again.",setTimeout((()=>{this.identificationResult=null,this.fingerprintStatusMessage="Place your finger on the scanner",this.isScanning=!0}),2e3)}catch(t){console.error("Identification error:",t),this.fingerprintStatusMessage=`Error: ${t.message}`,this.isScanning=!1}},closeFingerprintDialog(){this.fingerprintDialog=!1,this.isScanning=!1,this.identificationResult=null,this.reader&&this.reader.isAcquisitionStarted&&this.reader.stopAcquisition(),setTimeout((()=>{window.location.reload()}),500)}}};const $l=(0,c.A)(Ul,[["render",Pl],["__scopeId","data-v-021b3492"]]);var Xl=$l;const ql={class:"col-fname text-center"},Bl={class:"col-mi text-center"},Hl={class:"col-lname text-center"},Yl={class:"col-course text-center"},Ol={class:"col-year text-center"},jl={class:"col-status text-center"},Ql={class:"col-actions text-center"},zl={class:"action-buttons"},Kl={class:"details-header"},Gl={class:"regular-buttons"},Jl={class:"student-info mb-4"},Zl={key:0,class:"locked-notice mb-4"},ei={class:"text-h6"},ti={class:"text-body-2"},ai={class:"total-fines"},si={class:"d-flex mt-4"};function ni(e,t,a,s,n,l){const o=(0,r.g2)("page-header"),d=(0,r.g2)("v-card-title"),c=(0,r.g2)("v-card-text"),u=(0,r.g2)("v-spacer"),m=(0,r.g2)("v-btn"),g=(0,r.g2)("v-card-actions"),p=(0,r.g2)("v-card"),f=(0,r.g2)("v-dialog"),k=(0,r.g2)("v-icon"),v=(0,r.g2)("v-select"),b=(0,r.g2)("v-col"),F=(0,r.g2)("v-row"),_=(0,r.g2)("v-chip"),S=(0,r.g2)("v-data-table"),y=(0,r.g2)("v-text-field"),L=(0,r.g2)("v-form"),w=(0,r.g2)("v-alert"),C=(0,r.g2)("v-container");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(o),(0,r.Lk)("div",{style:(0,h.Tr)(l.backgroundStyle)},[(0,r.bF)(C,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,{modelValue:n.actionDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>n.actionDialog=e),persistent:"","max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"text-h5"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.dialogTitle),1)])),_:1}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.dialogMessage),1)])),_:1}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(u),(0,r.bF)(m,{color:"grey",onClick:t[0]||(t[0]=e=>n.actionDialog=!1)},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.eW)("Cancel")]))),_:1,__:[18]}),(0,r.bF)(m,{color:"primary",onClick:l.confirmAction},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.eW)("Confirm")]))),_:1,__:[19]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(f,{modelValue:n.deleteAllDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>n.deleteAllDialog=e),persistent:"","max-width":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"dark-card"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"text-h5"},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("Confirm Delete All Students")]))),_:1,__:[20]}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("This will permanently delete all student records. Are you sure?")]))),_:1,__:[21]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(u),(0,r.bF)(m,{color:"grey",onClick:t[2]||(t[2]=e=>n.deleteAllDialog=!1)},{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)("Cancel")]))),_:1,__:[22]}),(0,r.bF)(m,{color:"error",onClick:l.removeAllStudents},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Confirm Delete")]))),_:1,__:[23]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(F,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"fine-card",elevation:"2"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"d-flex justify-space-between align-center"},{default:(0,r.k6)((()=>[t[28]||(t[28]=(0,r.Lk)("h1",{class:"table-title"},"Student Management",-1)),(0,r.Lk)("div",null,[(0,r.bF)(m,{color:"error",dark:"",onClick:t[4]||(t[4]=e=>n.deleteAllDialog=!0),class:"mr-2"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{left:""},{default:(0,r.k6)((()=>t[24]||(t[24]=[(0,r.eW)("mdi-delete")]))),_:1,__:[24]}),t[25]||(t[25]=(0,r.eW)(" Remove All "))])),_:1,__:[25]}),(0,r.bF)(m,{color:"primary",dark:"",onClick:l.openUploadDialog},{default:(0,r.k6)((()=>[(0,r.bF)(k,{left:""},{default:(0,r.k6)((()=>t[26]||(t[26]=[(0,r.eW)("mdi-upload")]))),_:1,__:[26]}),t[27]||(t[27]=(0,r.eW)(" Upload Students "))])),_:1,__:[27]},8,["onClick"])])])),_:1,__:[28]}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,null,{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:n.selectedStudent?8:12},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"student-list-card"},{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.bF)(F,{class:"mb-4",align:"center"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"12",class:"d-flex"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:n.filter.course,"onUpdate:modelValue":t[5]||(t[5]=e=>n.filter.course=e),items:n.courses,label:"Select Course",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1}),(0,r.bF)(b,{cols:"6"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{modelValue:n.filter.yearLevel,"onUpdate:modelValue":t[6]||(t[6]=e=>n.filter.yearLevel=e),items:n.yearLevels,label:"Select Year Level",outlined:"",dense:"",dark:""},null,8,["modelValue","items"])])),_:1})])),_:1})])),_:1}),t[30]||(t[30]=(0,r.Lk)("div",{class:"student-list-header"},[(0,r.Lk)("span",{class:"col-fname"},"First Name"),(0,r.Lk)("span",{class:"col-lname"},"Last Name"),(0,r.Lk)("span",{class:"col-course"},"Course"),(0,r.Lk)("span",{class:"col-year"},"Year Level"),(0,r.Lk)("span",{class:"col-status"},"Status"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),(0,r.bF)(S,{items:l.filteredStudents,"items-per-page":10,class:"elevation-1 student-fines-table",dark:"","hide-default-header":"",loading:n.loadingStudents},{item:(0,r.k6)((({item:e})=>[(0,r.Lk)("tr",null,[(0,r.Lk)("td",ql,(0,h.v_)(e.firstName),1),(0,r.Lk)("td",Bl,(0,h.v_)(e.middleInitial),1),(0,r.Lk)("td",Hl,(0,h.v_)(e.lastName),1),(0,r.Lk)("td",Yl,(0,h.v_)(e.department),1),(0,r.Lk)("td",Ol,(0,h.v_)(e.yearLevel),1),(0,r.Lk)("td",jl,[(0,r.bF)(_,{small:"",color:l.getStatusColor(e.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(e.status),1)])),_:2},1032,["color"])]),(0,r.Lk)("td",Ql,[(0,r.Lk)("div",zl,[(0,r.bF)(m,{small:"",color:"primary",onClick:t=>{l.viewStudent(e)},class:"action-btn",disabled:l.isStudentLocked(e)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent&&n.selectedStudent.id===e.id?"Hide":"View"),1)])),_:2},1032,["onClick","disabled"]),(0,r.bF)(m,{small:"",color:"warning",onClick:t=>{l.editStudent(e)},class:"action-btn",disabled:l.isStudentLocked(e)},{default:(0,r.k6)((()=>t[29]||(t[29]=[(0,r.eW)(" Update ")]))),_:2,__:[29]},1032,["onClick","disabled"])])])])])),_:1},8,["items","loading"])])),_:1,__:[30]})])),_:1})])),_:1},8,["cols"]),n.selectedStudent?((0,r.uX)(),(0,r.Wv)(b,{key:0,cols:"4"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"right-side-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",Kl,[(0,r.bF)(d,{class:"details-title"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent.firstName)+" "+(0,h.v_)(n.selectedStudent.lastName)+"'s Details ",1)])),_:1})]),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[n.isEditing&&!l.isStudentLocked(n.selectedStudent)?((0,r.uX)(),(0,r.Wv)(L,{key:0,onSubmit:(0,i.D$)(l.checkStatusBeforeSave,["prevent"])},{default:(0,r.k6)((()=>[(0,r.bF)(y,{modelValue:n.editForm.firstName,"onUpdate:modelValue":t[7]||(t[7]=e=>n.editForm.firstName=e),label:"First Name",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue"]),(0,r.bF)(y,{modelValue:n.editForm.lastName,"onUpdate:modelValue":t[8]||(t[8]=e=>n.editForm.lastName=e),label:"Last Name",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue"]),(0,r.bF)(y,{modelValue:n.editForm.middleInitial,"onUpdate:modelValue":t[9]||(t[9]=e=>n.editForm.middleInitial=e),label:"Middle Initial",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue"]),(0,r.bF)(v,{modelValue:n.editForm.department,"onUpdate:modelValue":t[10]||(t[10]=e=>n.editForm.department=e),items:n.courses.filter((e=>"All"!==e)),label:"Course",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.bF)(v,{modelValue:n.editForm.yearLevel,"onUpdate:modelValue":t[11]||(t[11]=e=>n.editForm.yearLevel=e),items:n.yearLevels.filter((e=>"All"!==e)),label:"Year Level",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.bF)(v,{modelValue:n.editForm.status,"onUpdate:modelValue":t[12]||(t[12]=e=>n.editForm.status=e),items:n.statusOptions,label:"Status",outlined:"",dense:"",class:"mb-2"},null,8,["modelValue","items"]),(0,r.Lk)("div",Gl,[(0,r.bF)(m,{type:"submit",color:"success"},{default:(0,r.k6)((()=>t[31]||(t[31]=[(0,r.eW)("Save Changes")]))),_:1,__:[31]}),(0,r.bF)(m,{onClick:l.cancelEdit,class:"ml-2"},{default:(0,r.k6)((()=>t[32]||(t[32]=[(0,r.eW)("Cancel")]))),_:1,__:[32]},8,["onClick"])])])),_:1},8,["onSubmit"])):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Lk)("div",Jl,[(0,r.Lk)("p",null,[t[33]||(t[33]=(0,r.Lk)("strong",null,"Course: ",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedStudent.department),1)]),(0,r.Lk)("p",null,[t[34]||(t[34]=(0,r.Lk)("strong",null,"Year Level:",-1)),(0,r.eW)(" "+(0,h.v_)(n.selectedStudent.yearLevel),1)]),(0,r.Lk)("p",null,[t[35]||(t[35]=(0,r.Lk)("strong",null,"Status: ",-1)),(0,r.bF)(_,{small:"",color:l.getStatusColor(n.selectedStudent.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.selectedStudent.status),1)])),_:1},8,["color"])])]),l.isStudentLocked(n.selectedStudent)?((0,r.uX)(),(0,r.CE)("div",Zl,[(0,r.bF)(w,{type:"info",dense:""},{default:(0,r.k6)((()=>t[36]||(t[36]=[(0,r.eW)(" This student record is locked and cannot be modified. ")]))),_:1,__:[36]})])):(0,r.Q3)("",!0),(0,r.bF)(f,{modelValue:n.confirmDialog,"onUpdate:modelValue":t[14]||(t[14]=e=>n.confirmDialog=e),"max-width":"400"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"confirm-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"headline"},{default:(0,r.k6)((()=>t[37]||(t[37]=[(0,r.eW)("Warning!")]))),_:1,__:[37]}),(0,r.bF)(c,null,{default:(0,r.k6)((()=>[t[38]||(t[38]=(0,r.eW)(" Changing status to ")),(0,r.Lk)("strong",null,(0,h.v_)(n.editForm.status),1),t[39]||(t[39]=(0,r.eW)(" will permanently lock this student record. Are you sure you want to proceed? "))])),_:1,__:[38,39]}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>[(0,r.bF)(u),(0,r.bF)(m,{color:"grey",onClick:t[13]||(t[13]=e=>n.confirmDialog=!1)},{default:(0,r.k6)((()=>t[40]||(t[40]=[(0,r.eW)("Cancel")]))),_:1,__:[40]}),(0,r.bF)(m,{color:"red darken-1",onClick:l.confirmAndSave},{default:(0,r.k6)((()=>t[41]||(t[41]=[(0,r.eW)("Yes, Save and Lock")]))),_:1,__:[41]},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(f,{modelValue:n.responseDialog,"onUpdate:modelValue":t[16]||(t[16]=e=>n.responseDialog=e),"max-width":"400",class:"response-dialog"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:(0,h.C4)(["pa-4","response-dialog-card","success"===n.responseType?"response-success":"response-error"])},{default:(0,r.k6)((()=>[(0,r.bF)(d,{class:"d-flex align-center"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{color:"success"===n.responseType?"green":"red",class:"mr-2"},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(n.responseIcon),1)])),_:1},8,["color"]),(0,r.Lk)("span",ei,(0,h.v_)(n.responseTitle),1)])),_:1}),(0,r.bF)(c,{class:"pt-2"},{default:(0,r.k6)((()=>[(0,r.Lk)("p",ti,(0,h.v_)(n.responseMessage),1)])),_:1}),(0,r.bF)(g,{class:"justify-end"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{text:"",onClick:t[15]||(t[15]=e=>n.responseDialog=!1)},{default:(0,r.k6)((()=>t[42]||(t[42]=[(0,r.eW)("OK")]))),_:1,__:[42]})])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue"]),t[46]||(t[46]=(0,r.Lk)("div",{class:"fine-details-header"},[(0,r.Lk)("span",{class:"col-event"},"Event"),(0,r.Lk)("span",{class:"col-date"},"Date"),(0,r.Lk)("span",{class:"col-amount"},"Amount Due"),(0,r.Lk)("span",{class:"col-status"},"Status"),(0,r.Lk)("span",{class:"col-actions"},"Actions")],-1)),0!==n.fineDetails.length||n.loadingFines?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(w,{key:1,type:"info",class:"my-4"},{default:(0,r.k6)((()=>t[43]||(t[43]=[(0,r.eW)(" No fine records found for this student ")]))),_:1,__:[43]})),(0,r.bF)(S,{headers:n.fineDetailsHeaders,items:l.processedFineDetails,"hide-default-footer":"",class:"elevation-1 fine-details-table",dark:"","hide-default-header":"",loading:n.loadingFines},{["item.event"]:(0,r.k6)((({item:e})=>[(0,r.eW)((0,h.v_)(e.event?.name||"N/A"),1)])),["item.date"]:(0,r.k6)((({item:e})=>[(0,r.eW)((0,h.v_)(l.formatDate(e.event?.date)),1)])),["item.amount"]:(0,r.k6)((({item:e})=>[(0,r.Lk)("span",{class:(0,h.C4)({"red--text":"absent"===e.status&&!e.paid})}," ₱"+(0,h.v_)(("absent"===e.status&&e.event?.fee||0).toFixed(2)),3)])),["item.status"]:(0,r.k6)((({item:e})=>[(0,r.bF)(_,{small:"",color:l.getFineStatusColor(e)},{default:(0,r.k6)((()=>[(0,r.eW)((0,h.v_)(l.getFineStatusText(e)),1)])),_:2},1032,["color"])])),["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.bF)(m,{"x-small":"",color:"error",onClick:t=>l.initiateAction("removeFine",e),loading:n.deletingFine===e.id,disabled:e.paid},{default:(0,r.k6)((()=>t[44]||(t[44]=[(0,r.eW)(" Remove ")]))),_:2,__:[44]},1032,["onClick","loading","disabled"])])),_:2},1032,["headers","items","loading"]),(0,r.Lk)("div",ai,[(0,r.Lk)("strong",null,"Total Unpaid Fines: ₱"+(0,h.v_)(l.calculateTotalUnpaidFines().toFixed(2)),1)]),(0,r.Lk)("div",si,[(0,r.bF)(m,{color:"success",class:"paid-btn",onClick:t[17]||(t[17]=e=>l.initiateAction("clearFines",n.selectedStudent)),disabled:0===n.fineDetails.length||!l.hasUnpaidFines,loading:n.clearingFines},{default:(0,r.k6)((()=>t[45]||(t[45]=[(0,r.eW)(" Mark All as Paid ")]))),_:1,__:[45]},8,["disabled","loading"])])],64))])),_:1})])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],4)])}var li={components:{PageHeader:Ls},data(){return{confirmDialog:!1,confirmDialogMessage:"",confirmDialogCallback:null,search:"",welcomeDialog:!1,actionDialog:!1,deleteAllDialog:!1,dialogTitle:"",dialogMessage:"",currentAction:null,selectedStudent:null,isEditing:!1,backgroundImage:"https://cdn.vuetifyjs.com/images/backgrounds/vbanner.jpg",filter:{course:null,yearLevel:null},editForm:{},statusOptions:["Enrolled","Graduated","Shifted","Dropped"],fineDetails:[],courses:["All","BSIT","BSIS","BSCS","BS Information Technology (Network Systems)","BS Information Technology (Database Systems)"],yearLevels:["All","1st Year","2nd Year","3rd Year","4th Year"],studentFinesHeaders:[{text:"First Name",value:"firstName",align:"center",width:"15%"},{text:"M.I.",value:"middleInitial",align:"center",width:"5%"},{text:"Last Name",value:"lastName",align:"center",width:"15%"},{text:"Course",value:"department",align:"center",width:"15%"},{text:"Year Level",value:"yearLevel",align:"center",width:"15%"},{text:"Status",value:"status",align:"center",width:"15%"},{text:"Actions",value:"actions",align:"center",width:"20%",sortable:!1}],fineDetailsHeaders:[{text:"Event Name",value:"event",align:"center",width:"25%"},{text:"Date",value:"date",align:"center",width:"15%"},{text:"Amount Due",value:"amount",align:"center",width:"15%"},{text:"Status",value:"status",align:"center",width:"15%"},{text:"Actions",value:"actions",align:"center",width:"15%"}],responseDialog:!1,responseType:"success",responseTitle:"",responseMessage:"",responseIcon:"",students:[],loadingStudents:!1,loadingFines:!1,savingStudent:!1,clearingFines:!1,deletingFine:null}},computed:{processedFineDetails(){return this.fineDetails.filter((e=>"absent"===e.status)).map((e=>({...e,amount:e.event?.fee||0,statusText:e.paid?"Paid":"Unpaid",statusColor:e.paid?"blue":"red"})))},backgroundStyle(){return{backgroundImage:`url(${this.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",padding:"20px 0"}},filteredStudents(){return this.students.filter((e=>("All"===this.filter.department||!this.filter.department||e.department===this.filter.department)&&("All"===this.filter.yearLevel||!this.filter.yearLevel||e.yearLevel===this.filter.yearLevel)&&(""===this.search||e.firstName.toLowerCase().includes(this.search.toLowerCase())||e.lastName.toLowerCase().includes(this.search.toLowerCase())||e.department.toLowerCase().includes(this.search.toLowerCase())||e.yearLevel.toLowerCase().includes(this.search.toLowerCase()))))},hasUnpaidFines(){return this.fineDetails.some((e=>"absent"===e.status&&!e.paid))}},async mounted(){await this.fetchStudents()},methods:{showResponse(e,t,a){this.responseType=e,this.responseTitle=t,this.responseMessage=a,this.responseIcon="success"===e?"mdi-check-circle":"mdi-alert-circle",this.responseDialog=!0},getFineStatusColor(e){return e.statusColor},formatDate(e){if(!e)return"N/A";const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},isStudentLocked(e){return e.isLocked||["Graduated","Shifted","Dropped"].includes(e.status)},async fetchStudents(){this.loadingStudents=!0;try{console.log("Fetching all students from backend");const e=await Ee.getStudents();this.students=e.data}catch(e){console.error("Error:",e),this.dialogTitle="Error",this.dialogMessage="Failed to load students",this.actionDialog=!0}finally{this.loadingStudents=!1}},async fetchFines(e){this.loadingFines=!0;try{const t=await Ee.getStudentFines(e);console.log("Fines data:",t.data),this.fineDetails=t.data}catch(t){console.error("Error fetching fines:",t),this.dialogTitle="Error",this.dialogMessage="Failed to load fines",this.actionDialog=!0}finally{this.loadingFines=!1}},initiateAction(e,t={}){this.currentAction={type:e,item:{...t},id:t._id||t.id||null};const a=this.selectedStudent||{},s={removeFine:`Remove fine for ${a.firstName} ${a.lastName}?`,clearFines:`Mark all fines as paid for ${a.firstName} ${a.lastName}?`,deleteAll:"Permanently delete all student records? This cannot be undone!",edit:"Save changes to this student?"};this.dialogTitle=`${e.charAt(0).toUpperCase()+e.slice(1)} Confirmation`,this.dialogMessage=s[e]||"Are you sure?",this.actionDialog=!0},async confirmAction(){if(this.actionDialog=!1,!this.currentAction||!this.currentAction.type)return console.error("No valid currentAction provided."),this.dialogTitle="Error",this.dialogMessage="No action was selected or the action is invalid.",void(this.actionDialog=!0);try{switch(this.currentAction.type){case"removeFine":await this.removeFine();break;case"clearFines":await this.clearFines();break;case"deleteAll":await this.removeAllStudents();break;case"edit":await this.saveStudent();break;default:throw new Error(`Unknown action type: ${this.currentAction.type}`)}}catch(e){console.error("Action failed:",e),this.dialogTitle="Error",this.dialogMessage=e.message||"Action failed. Please try again.",this.actionDialog=!0}},async removeFine(){this.deletingFine=this.currentAction.id;try{console.log(`Deleting fine ID: ${this.currentAction.id}`),await Ee.deleteFine(this.currentAction.id),this.fineDetails=this.fineDetails.filter((e=>e._id!==this.currentAction.id)),this.dialogTitle="Success",this.dialogMessage="Fine removed successfully"}catch(e){console.error("Error removing fine:",e),this.dialogTitle="Error",this.dialogMessage="Failed to remove fine",this.actionDialog=!0}finally{this.deletingFine=null}},async clearFines(){this.clearingFines=!0;try{await Ee.clearStudentFines(this.currentAction.id),await this.fetchFines(this.selectedStudent.id),this.dialogTitle="Success",this.dialogMessage="All fines marked as paid"}catch(e){console.error("Error clearing fines:",e),this.dialogTitle="Error",this.dialogMessage="Failed to mark fines as paid",this.actionDialog=!0}finally{this.clearingFines=!1}},async removeAllStudents(){this.deleteAllDialog=!1;try{console.log("Deleting all student records"),await Ee.deleteAllStudents(),this.students=[],this.dialogTitle="Success",this.dialogMessage="All student data has been deleted"}catch(e){console.error("Delete error:",e),this.dialogTitle="Error",this.dialogMessage="Failed to delete data"}finally{this.actionDialog=!0}},hasChanges(){const e=["firstName","lastName","middleInitial","department","yearLevel","status"];return e.some((e=>this.editForm[e]!==this.selectedStudent[e]))},getStatusColor(e){const t={Enrolled:"green",Shifted:"blue",Graduated:"purple",Dropped:"red"};return t[e]||"gray"},getFineStatusText(e){return e.statusText},calculateTotalUnpaidFines(){return this.processedFineDetails.filter((e=>!e.paid)).reduce(((e,t)=>e+t.amount),0)},viewStudent(e){this.selectedStudent&&this.selectedStudent.id===e.id?(this.selectedStudent=null,this.isEditing=!1,this.fineDetails=[]):(this.selectedStudent=e,this.isEditing=!1,this.fetchFines(e.id))},editStudent(e){this.isStudentLocked(e)||(this.isNewStudent=!1,this.selectedStudent=e,this.isEditing=!0,this.editForm={...e,id:e.id})},async saveStudent(e=!1){try{const t=this.editForm.id,a={firstName:this.editForm.firstName,lastName:this.editForm.lastName,middleInitial:this.editForm.middleInitial,department:this.editForm.department,yearLevel:this.editForm.yearLevel,status:this.editForm.status},s=await Ee.updateStudents(t,a);this.selectedStudent=s.data,this.isEditing=!1,e&&(this.selectedStudent.isLocked=!0),this.showResponse("success","Student Updated","Record has been updated."),await this.fetchStudents()}catch(t){console.error("Update failed:",t),this.showResponse("error","Update Failed",t.response?.data?.message||"An error occurred during the update.")}},cancelEdit(){this.isEditing=!1},confirmAndSave(){this.confirmDialog=!1,this.confirmDialogCallback&&this.confirmDialogCallback()},openUploadDialog(){console.log("Upload dialog would open here")},checkStatusBeforeSave(){this.hasChanges()?["Graduated","Shifted","Dropped"].includes(this.editForm.status)?(this.confirmDialogMessage=`Changing the status to "${this.editForm.status}" will lock this student. Proceed?`,this.confirmDialogCallback=()=>this.saveStudent(!0),this.confirmDialog=!0):this.saveStudent():this.showResponse("info","No Changes Detected","You haven’t made any changes to the student record.")}}};const ii=(0,c.A)(li,[["render",ni],["__scopeId","data-v-26152c8c"]]);var ri=ii;const oi=[{path:"/",name:"login",component:V,meta:{public:!0}},{path:"/dev",name:"Development",component:In,meta:{public:!0}},{path:"/Register",name:"Register",component:cl,meta:{public:!0}},{path:"/account-management",name:"AccountManagement",component:pn,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/account-list",name:"AccountList",component:En,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/account-settings",name:"AccSetting",component:Fn,meta:{requiresAuth:!0}},{path:"/user",name:"user",component:P,meta:{requiresAuth:!0}},{path:"/home",name:"Home",component:ot,meta:{requiresAuth:!0}},{path:"/manage-students",name:"manage-students",component:sa,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/StudentManage",name:"StudentManage",component:ri,meta:{requiresAuth:!0,adminOnly:!0}},{path:"/history-log",name:"history-log",component:Ds,meta:{requiresAuth:!0}},{path:"/manage-events",name:"manage-events",component:wt,meta:{requiresAuth:!0}},{path:"/account",name:"account",component:P,meta:{requiresAuth:!0}},{path:"/logout",name:"logout",component:P,meta:{requiresAuth:!0}},{path:"/about",name:"about",component:ca},{path:"/attendance-history",name:"attendance-history",component:ha,meta:{requiresAuth:!0}},{path:"/attendance",name:"attendance",component:Xl,meta:{requiresAuth:!0}},{path:"/fp",name:"FingerPrint",component:rn,meta:{requiresAuth:!0}},{path:"/fingerprint/:studentId?",name:"fingerprint",component:rn,meta:{requiresAuth:!0},props:!0},{path:"/event",name:"Event",component:Fl,props:!0}],di=(0,g.aE)({history:(0,g.LA)(),routes:oi});di.beforeEach((async(e,t,a)=>{await w.dispatch("initializeAuth");const s=w.getters.isAuthenticated,n=w.getters.userRole;if(e.meta?.public)return a();if(e.meta?.requiresAuth){if(!s)return a("/");if(e.meta?.adminOnly&&"admin"!==n)return a("/home")}a()}));var ci=di;const ui=(0,s.$N)({components:n,directives:l});(0,i.Ef)(m).use(w).use(ci).use(ui).mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,l){if(!s){var i=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],l=e[c][2];for(var r=!0,o=0;o<s.length;o++)(!1&l||i>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[o])}))?s.splice(o--,1):(r=!1,l<i&&(i=l));if(r){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[s,n,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,l,i=s[0],r=s[1],o=s[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(o)var c=o(a)}for(t&&t(s);d<i.length;d++)l=i[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},s=self["webpackChunkbytes"]=self["webpackChunkbytes"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(5271)}));s=a.O(s)})();
//# sourceMappingURL=app.44c3ba0e.js.map